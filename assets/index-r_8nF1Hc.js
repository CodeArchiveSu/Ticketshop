function DO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Pf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var UP={exports:{}},bf={},$P={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yc=Symbol.for("react.element"),LO=Symbol.for("react.portal"),MO=Symbol.for("react.fragment"),VO=Symbol.for("react.strict_mode"),FO=Symbol.for("react.profiler"),UO=Symbol.for("react.provider"),$O=Symbol.for("react.context"),BO=Symbol.for("react.forward_ref"),jO=Symbol.for("react.suspense"),zO=Symbol.for("react.memo"),qO=Symbol.for("react.lazy"),DI=Symbol.iterator;function GO(t){return t===null||typeof t!="object"?null:(t=DI&&t[DI]||t["@@iterator"],typeof t=="function"?t:null)}var BP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jP=Object.assign,zP={};function ja(t,e,n){this.props=t,this.context=e,this.refs=zP,this.updater=n||BP}ja.prototype.isReactComponent={};ja.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ja.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qP(){}qP.prototype=ja.prototype;function Oy(t,e,n){this.props=t,this.context=e,this.refs=zP,this.updater=n||BP}var Dy=Oy.prototype=new qP;Dy.constructor=Oy;jP(Dy,ja.prototype);Dy.isPureReactComponent=!0;var LI=Array.isArray,GP=Object.prototype.hasOwnProperty,Ly={current:null},WP={key:!0,ref:!0,__self:!0,__source:!0};function HP(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)GP.call(e,r)&&!WP.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:yc,type:t,key:s,ref:o,props:i,_owner:Ly.current}}function WO(t,e){return{$$typeof:yc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function My(t){return typeof t=="object"&&t!==null&&t.$$typeof===yc}function HO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var MI=/\/+/g;function Em(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HO(""+t.key):e.toString(36)}function Fd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yc:case LO:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Em(o,0):r,LI(i)?(n="",t!=null&&(n=t.replace(MI,"$&/")+"/"),Fd(i,e,n,"",function(u){return u})):i!=null&&(My(i)&&(i=WO(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(MI,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",LI(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Em(s,a);o+=Fd(s,e,n,l,i)}else if(l=GO(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Em(s,a++),o+=Fd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ad(t,e,n){if(t==null)return t;var r=[],i=0;return Fd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function KO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},Ud={transition:null},QO={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:Ud,ReactCurrentOwner:Ly};function KP(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:ad,forEach:function(t,e,n){ad(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ad(t,function(){e++}),e},toArray:function(t){return ad(t,function(e){return e})||[]},only:function(t){if(!My(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=ja;le.Fragment=MO;le.Profiler=FO;le.PureComponent=Oy;le.StrictMode=VO;le.Suspense=jO;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QO;le.act=KP;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jP({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Ly.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)GP.call(e,l)&&!WP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:yc,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:$O,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:UO,_context:t},t.Consumer=t};le.createElement=HP;le.createFactory=function(t){var e=HP.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:BO,render:t}};le.isValidElement=My;le.lazy=function(t){return{$$typeof:qO,_payload:{_status:-1,_result:t},_init:KO}};le.memo=function(t,e){return{$$typeof:zO,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Ud.transition;Ud.transition={};try{t()}finally{Ud.transition=e}};le.unstable_act=KP;le.useCallback=function(t,e){return en.current.useCallback(t,e)};le.useContext=function(t){return en.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return en.current.useDeferredValue(t)};le.useEffect=function(t,e){return en.current.useEffect(t,e)};le.useId=function(){return en.current.useId()};le.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return en.current.useMemo(t,e)};le.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};le.useRef=function(t){return en.current.useRef(t)};le.useState=function(t){return en.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return en.current.useTransition()};le.version="18.3.1";$P.exports=le;var x=$P.exports;const ve=Pf(x),YO=DO({__proto__:null,default:ve},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XO=x,JO=Symbol.for("react.element"),ZO=Symbol.for("react.fragment"),eD=Object.prototype.hasOwnProperty,tD=XO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nD={key:!0,ref:!0,__self:!0,__source:!0};function QP(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)eD.call(e,r)&&!nD.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:JO,type:t,key:s,ref:o,props:i,_owner:tD.current}}bf.Fragment=ZO;bf.jsx=QP;bf.jsxs=QP;UP.exports=bf;var M=UP.exports,Dg={},YP={exports:{}},bn={},XP={exports:{}},JP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,H){var Q=$.length;$.push(H);e:for(;0<Q;){var oe=Q-1>>>1,ae=$[oe];if(0<i(ae,H))$[oe]=H,$[Q]=ae,Q=oe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var H=$[0],Q=$.pop();if(Q!==H){$[0]=Q;e:for(var oe=0,ae=$.length,Ee=ae>>>1;oe<Ee;){var $t=2*(oe+1)-1,Le=$[$t],Bt=$t+1,zn=$[Bt];if(0>i(Le,Q))Bt<ae&&0>i(zn,Le)?($[oe]=zn,$[Bt]=Q,oe=Bt):($[oe]=Le,$[$t]=Q,oe=$t);else if(Bt<ae&&0>i(zn,Q))$[oe]=zn,$[Bt]=Q,oe=Bt;else break e}}return H}function i($,H){var Q=$.sortIndex-H.sortIndex;return Q!==0?Q:$.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,g=!1,_=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=$)r(u),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(u)}}function C($){if(E=!1,w($),!_)if(n(l)!==null)_=!0,Se(O);else{var H=n(u);H!==null&&Be(C,H.startTime-$)}}function O($,H){_=!1,E&&(E=!1,m(I),I=-1),g=!0;var Q=f;try{for(w(H),h=n(l);h!==null&&(!(h.expirationTime>H)||$&&!k());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,f=h.priorityLevel;var ae=oe(h.expirationTime<=H);H=t.unstable_now(),typeof ae=="function"?h.callback=ae:h===n(l)&&r(l),w(H)}else r(l);h=n(l)}if(h!==null)var Ee=!0;else{var $t=n(u);$t!==null&&Be(C,$t.startTime-H),Ee=!1}return Ee}finally{h=null,f=Q,g=!1}}var D=!1,A=null,I=-1,P=5,S=-1;function k(){return!(t.unstable_now()-S<P)}function N(){if(A!==null){var $=t.unstable_now();S=$;var H=!0;try{H=A(!0,$)}finally{H?R():(D=!1,A=null)}}else D=!1}var R;if(typeof v=="function")R=function(){v(N)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ie=Z.port2;Z.port1.onmessage=N,R=function(){ie.postMessage(null)}}else R=function(){T(N,0)};function Se($){A=$,D||(D=!0,R())}function Be($,H){I=T(function(){$(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,Se(O))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var H=3;break;default:H=f}var Q=f;f=H;try{return $()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,H){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=f;f=$;try{return H()}finally{f=Q}},t.unstable_scheduleCallback=function($,H,Q){var oe=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?oe+Q:oe):Q=oe,$){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Q+ae,$={id:d++,callback:H,priorityLevel:$,startTime:Q,expirationTime:ae,sortIndex:-1},Q>oe?($.sortIndex=Q,e(u,$),n(l)===null&&$===n(u)&&(E?(m(I),I=-1):E=!0,Be(C,Q-oe))):($.sortIndex=ae,e(l,$),_||g||(_=!0,Se(O))),$},t.unstable_shouldYield=k,t.unstable_wrapCallback=function($){var H=f;return function(){var Q=f;f=H;try{return $.apply(this,arguments)}finally{f=Q}}}})(JP);XP.exports=JP;var rD=XP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iD=x,Tn=rD;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZP=new Set,Pu={};function uo(t,e){va(t,e),va(t+"Capture",e)}function va(t,e){for(Pu[t]=e,t=0;t<e.length;t++)ZP.add(e[t])}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lg=Object.prototype.hasOwnProperty,sD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VI={},FI={};function oD(t){return Lg.call(FI,t)?!0:Lg.call(VI,t)?!1:sD.test(t)?FI[t]=!0:(VI[t]=!0,!1)}function aD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lD(t,e,n,r){if(e===null||typeof e>"u"||aD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vy=/[\-:]([a-z])/g;function Fy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vy,Fy);Rt[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vy,Fy);Rt[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vy,Fy);Rt[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uy(t,e,n,r){var i=Rt.hasOwnProperty(e)?Rt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lD(e,n,i,r)&&(n=null),r||i===null?oD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yr=iD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ld=Symbol.for("react.element"),Bo=Symbol.for("react.portal"),jo=Symbol.for("react.fragment"),$y=Symbol.for("react.strict_mode"),Mg=Symbol.for("react.profiler"),eb=Symbol.for("react.provider"),tb=Symbol.for("react.context"),By=Symbol.for("react.forward_ref"),Vg=Symbol.for("react.suspense"),Fg=Symbol.for("react.suspense_list"),jy=Symbol.for("react.memo"),mi=Symbol.for("react.lazy"),nb=Symbol.for("react.offscreen"),UI=Symbol.iterator;function Sl(t){return t===null||typeof t!="object"?null:(t=UI&&t[UI]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Im;function zl(t){if(Im===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Im=e&&e[1]||""}return`
`+Im+t}var Tm=!1;function Sm(t,e){if(!t||Tm)return"";Tm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Tm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zl(t):""}function uD(t){switch(t.tag){case 5:return zl(t.type);case 16:return zl("Lazy");case 13:return zl("Suspense");case 19:return zl("SuspenseList");case 0:case 2:case 15:return t=Sm(t.type,!1),t;case 11:return t=Sm(t.type.render,!1),t;case 1:return t=Sm(t.type,!0),t;default:return""}}function Ug(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jo:return"Fragment";case Bo:return"Portal";case Mg:return"Profiler";case $y:return"StrictMode";case Vg:return"Suspense";case Fg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tb:return(t.displayName||"Context")+".Consumer";case eb:return(t._context.displayName||"Context")+".Provider";case By:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jy:return e=t.displayName||null,e!==null?e:Ug(t.type)||"Memo";case mi:e=t._payload,t=t._init;try{return Ug(t(e))}catch{}}return null}function cD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ug(e);case 8:return e===$y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dD(t){var e=rb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ud(t){t._valueTracker||(t._valueTracker=dD(t))}function ib(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ph(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $g(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $I(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$i(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function sb(t,e){e=e.checked,e!=null&&Uy(t,"checked",e,!1)}function Bg(t,e){sb(t,e);var n=$i(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jg(t,e.type,n):e.hasOwnProperty("defaultValue")&&jg(t,e.type,$i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function BI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jg(t,e,n){(e!=="number"||ph(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ql=Array.isArray;function ta(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$i(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function zg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(ql(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$i(n)}}function ob(t,e){var n=$i(e.value),r=$i(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ab(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ab(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var cd,lb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(cd=cd||document.createElement("div"),cd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=cd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hD=["Webkit","ms","Moz","O"];Object.keys(ru).forEach(function(t){hD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ru[e]=ru[t]})});function ub(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ru.hasOwnProperty(t)&&ru[t]?(""+e).trim():e+"px"}function cb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ub(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var fD=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gg(t,e){if(e){if(fD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Wg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hg=null;function zy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kg=null,na=null,ra=null;function qI(t){if(t=Ec(t)){if(typeof Kg!="function")throw Error(z(280));var e=t.stateNode;e&&(e=kf(e),Kg(t.stateNode,t.type,e))}}function db(t){na?ra?ra.push(t):ra=[t]:na=t}function hb(){if(na){var t=na,e=ra;if(ra=na=null,qI(t),e)for(t=0;t<e.length;t++)qI(e[t])}}function fb(t,e){return t(e)}function pb(){}var Pm=!1;function mb(t,e,n){if(Pm)return t(e,n);Pm=!0;try{return fb(t,e,n)}finally{Pm=!1,(na!==null||ra!==null)&&(pb(),hb())}}function Au(t,e){var n=t.stateNode;if(n===null)return null;var r=kf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Qg=!1;if(zr)try{var Pl={};Object.defineProperty(Pl,"passive",{get:function(){Qg=!0}}),window.addEventListener("test",Pl,Pl),window.removeEventListener("test",Pl,Pl)}catch{Qg=!1}function pD(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var iu=!1,mh=null,gh=!1,Yg=null,mD={onError:function(t){iu=!0,mh=t}};function gD(t,e,n,r,i,s,o,a,l){iu=!1,mh=null,pD.apply(mD,arguments)}function vD(t,e,n,r,i,s,o,a,l){if(gD.apply(this,arguments),iu){if(iu){var u=mh;iu=!1,mh=null}else throw Error(z(198));gh||(gh=!0,Yg=u)}}function co(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function GI(t){if(co(t)!==t)throw Error(z(188))}function yD(t){var e=t.alternate;if(!e){if(e=co(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return GI(i),t;if(s===r)return GI(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function vb(t){return t=yD(t),t!==null?yb(t):null}function yb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yb(t);if(e!==null)return e;t=t.sibling}return null}var _b=Tn.unstable_scheduleCallback,WI=Tn.unstable_cancelCallback,_D=Tn.unstable_shouldYield,wD=Tn.unstable_requestPaint,et=Tn.unstable_now,ED=Tn.unstable_getCurrentPriorityLevel,qy=Tn.unstable_ImmediatePriority,wb=Tn.unstable_UserBlockingPriority,vh=Tn.unstable_NormalPriority,ID=Tn.unstable_LowPriority,Eb=Tn.unstable_IdlePriority,Af=null,gr=null;function TD(t){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(Af,t,void 0,(t.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:bD,SD=Math.log,PD=Math.LN2;function bD(t){return t>>>=0,t===0?32:31-(SD(t)/PD|0)|0}var dd=64,hd=4194304;function Gl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Gl(a):(s&=o,s!==0&&(r=Gl(s)))}else o=n&~i,o!==0?r=Gl(o):s!==0&&(r=Gl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Xn(e),i=1<<n,r|=t[n],e&=~i;return r}function AD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Xn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=AD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Xg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ib(){var t=dd;return dd<<=1,!(dd&4194240)&&(dd=64),t}function bm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _c(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Xn(e),t[e]=n}function CD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Xn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Gy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Xn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function Tb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Sb,Wy,Pb,bb,Ab,Jg=!1,fd=[],xi=null,ki=null,Ni=null,Ru=new Map,Cu=new Map,yi=[],xD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function HI(t,e){switch(t){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Ni=null;break;case"pointerover":case"pointerout":Ru.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cu.delete(e.pointerId)}}function bl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ec(e),e!==null&&Wy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kD(t,e,n,r,i){switch(e){case"focusin":return xi=bl(xi,t,e,n,r,i),!0;case"dragenter":return ki=bl(ki,t,e,n,r,i),!0;case"mouseover":return Ni=bl(Ni,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ru.set(s,bl(Ru.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Cu.set(s,bl(Cu.get(s)||null,t,e,n,r,i)),!0}return!1}function Rb(t){var e=Rs(t.target);if(e!==null){var n=co(e);if(n!==null){if(e=n.tag,e===13){if(e=gb(n),e!==null){t.blockedOn=e,Ab(t.priority,function(){Pb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $d(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hg=r,n.target.dispatchEvent(r),Hg=null}else return e=Ec(n),e!==null&&Wy(e),t.blockedOn=n,!1;e.shift()}return!0}function KI(t,e,n){$d(t)&&n.delete(e)}function ND(){Jg=!1,xi!==null&&$d(xi)&&(xi=null),ki!==null&&$d(ki)&&(ki=null),Ni!==null&&$d(Ni)&&(Ni=null),Ru.forEach(KI),Cu.forEach(KI)}function Al(t,e){t.blockedOn===e&&(t.blockedOn=null,Jg||(Jg=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,ND)))}function xu(t){function e(i){return Al(i,t)}if(0<fd.length){Al(fd[0],t);for(var n=1;n<fd.length;n++){var r=fd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xi!==null&&Al(xi,t),ki!==null&&Al(ki,t),Ni!==null&&Al(Ni,t),Ru.forEach(e),Cu.forEach(e),n=0;n<yi.length;n++)r=yi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<yi.length&&(n=yi[0],n.blockedOn===null);)Rb(n),n.blockedOn===null&&yi.shift()}var ia=Yr.ReactCurrentBatchConfig,_h=!0;function OD(t,e,n,r){var i=_e,s=ia.transition;ia.transition=null;try{_e=1,Hy(t,e,n,r)}finally{_e=i,ia.transition=s}}function DD(t,e,n,r){var i=_e,s=ia.transition;ia.transition=null;try{_e=4,Hy(t,e,n,r)}finally{_e=i,ia.transition=s}}function Hy(t,e,n,r){if(_h){var i=Zg(t,e,n,r);if(i===null)Mm(t,e,r,wh,n),HI(t,r);else if(kD(i,t,e,n,r))r.stopPropagation();else if(HI(t,r),e&4&&-1<xD.indexOf(t)){for(;i!==null;){var s=Ec(i);if(s!==null&&Sb(s),s=Zg(t,e,n,r),s===null&&Mm(t,e,r,wh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Mm(t,e,r,null,n)}}var wh=null;function Zg(t,e,n,r){if(wh=null,t=zy(r),t=Rs(t),t!==null)if(e=co(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wh=t,null}function Cb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ED()){case qy:return 1;case wb:return 4;case vh:case ID:return 16;case Eb:return 536870912;default:return 16}default:return 16}}var Ti=null,Ky=null,Bd=null;function xb(){if(Bd)return Bd;var t,e=Ky,n=e.length,r,i="value"in Ti?Ti.value:Ti.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Bd=i.slice(t,1<r?1-r:void 0)}function jd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pd(){return!0}function QI(){return!1}function An(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pd:QI,this.isPropagationStopped=QI,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qy=An(za),wc=Ge({},za,{view:0,detail:0}),LD=An(wc),Am,Rm,Rl,Rf=Ge({},wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rl&&(Rl&&t.type==="mousemove"?(Am=t.screenX-Rl.screenX,Rm=t.screenY-Rl.screenY):Rm=Am=0,Rl=t),Am)},movementY:function(t){return"movementY"in t?t.movementY:Rm}}),YI=An(Rf),MD=Ge({},Rf,{dataTransfer:0}),VD=An(MD),FD=Ge({},wc,{relatedTarget:0}),Cm=An(FD),UD=Ge({},za,{animationName:0,elapsedTime:0,pseudoElement:0}),$D=An(UD),BD=Ge({},za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jD=An(BD),zD=Ge({},za,{data:0}),XI=An(zD),qD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WD[t])?!!e[t]:!1}function Yy(){return HD}var KD=Ge({},wc,{key:function(t){if(t.key){var e=qD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=jd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yy,charCode:function(t){return t.type==="keypress"?jd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),QD=An(KD),YD=Ge({},Rf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JI=An(YD),XD=Ge({},wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yy}),JD=An(XD),ZD=Ge({},za,{propertyName:0,elapsedTime:0,pseudoElement:0}),eL=An(ZD),tL=Ge({},Rf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nL=An(tL),rL=[9,13,27,32],Xy=zr&&"CompositionEvent"in window,su=null;zr&&"documentMode"in document&&(su=document.documentMode);var iL=zr&&"TextEvent"in window&&!su,kb=zr&&(!Xy||su&&8<su&&11>=su),ZI=" ",eT=!1;function Nb(t,e){switch(t){case"keyup":return rL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ob(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zo=!1;function sL(t,e){switch(t){case"compositionend":return Ob(e);case"keypress":return e.which!==32?null:(eT=!0,ZI);case"textInput":return t=e.data,t===ZI&&eT?null:t;default:return null}}function oL(t,e){if(zo)return t==="compositionend"||!Xy&&Nb(t,e)?(t=xb(),Bd=Ky=Ti=null,zo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kb&&e.locale!=="ko"?null:e.data;default:return null}}var aL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aL[t.type]:e==="textarea"}function Db(t,e,n,r){db(r),e=Eh(e,"onChange"),0<e.length&&(n=new Qy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ou=null,ku=null;function lL(t){Gb(t,0)}function Cf(t){var e=Wo(t);if(ib(e))return t}function uL(t,e){if(t==="change")return e}var Lb=!1;if(zr){var xm;if(zr){var km="oninput"in document;if(!km){var nT=document.createElement("div");nT.setAttribute("oninput","return;"),km=typeof nT.oninput=="function"}xm=km}else xm=!1;Lb=xm&&(!document.documentMode||9<document.documentMode)}function rT(){ou&&(ou.detachEvent("onpropertychange",Mb),ku=ou=null)}function Mb(t){if(t.propertyName==="value"&&Cf(ku)){var e=[];Db(e,ku,t,zy(t)),mb(lL,e)}}function cL(t,e,n){t==="focusin"?(rT(),ou=e,ku=n,ou.attachEvent("onpropertychange",Mb)):t==="focusout"&&rT()}function dL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cf(ku)}function hL(t,e){if(t==="click")return Cf(e)}function fL(t,e){if(t==="input"||t==="change")return Cf(e)}function pL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zn=typeof Object.is=="function"?Object.is:pL;function Nu(t,e){if(Zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Lg.call(e,i)||!Zn(t[i],e[i]))return!1}return!0}function iT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sT(t,e){var n=iT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=iT(n)}}function Vb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Fb(){for(var t=window,e=ph();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ph(t.document)}return e}function Jy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mL(t){var e=Fb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Vb(n.ownerDocument.documentElement,n)){if(r!==null&&Jy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=sT(n,s);var o=sT(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gL=zr&&"documentMode"in document&&11>=document.documentMode,qo=null,ev=null,au=null,tv=!1;function oT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tv||qo==null||qo!==ph(r)||(r=qo,"selectionStart"in r&&Jy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),au&&Nu(au,r)||(au=r,r=Eh(ev,"onSelect"),0<r.length&&(e=new Qy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qo)))}function md(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Go={animationend:md("Animation","AnimationEnd"),animationiteration:md("Animation","AnimationIteration"),animationstart:md("Animation","AnimationStart"),transitionend:md("Transition","TransitionEnd")},Nm={},Ub={};zr&&(Ub=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function xf(t){if(Nm[t])return Nm[t];if(!Go[t])return t;var e=Go[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ub)return Nm[t]=e[n];return t}var $b=xf("animationend"),Bb=xf("animationiteration"),jb=xf("animationstart"),zb=xf("transitionend"),qb=new Map,aT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(t,e){qb.set(t,e),uo(e,[t])}for(var Om=0;Om<aT.length;Om++){var Dm=aT[Om],vL=Dm.toLowerCase(),yL=Dm[0].toUpperCase()+Dm.slice(1);ts(vL,"on"+yL)}ts($b,"onAnimationEnd");ts(Bb,"onAnimationIteration");ts(jb,"onAnimationStart");ts("dblclick","onDoubleClick");ts("focusin","onFocus");ts("focusout","onBlur");ts(zb,"onTransitionEnd");va("onMouseEnter",["mouseout","mouseover"]);va("onMouseLeave",["mouseout","mouseover"]);va("onPointerEnter",["pointerout","pointerover"]);va("onPointerLeave",["pointerout","pointerover"]);uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_L=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function lT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vD(r,e,void 0,t),t.currentTarget=null}function Gb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;lT(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;lT(i,a,u),s=l}}}if(gh)throw t=Yg,gh=!1,Yg=null,t}function ke(t,e){var n=e[ov];n===void 0&&(n=e[ov]=new Set);var r=t+"__bubble";n.has(r)||(Wb(e,t,2,!1),n.add(r))}function Lm(t,e,n){var r=0;e&&(r|=4),Wb(n,t,r,e)}var gd="_reactListening"+Math.random().toString(36).slice(2);function Ou(t){if(!t[gd]){t[gd]=!0,ZP.forEach(function(n){n!=="selectionchange"&&(_L.has(n)||Lm(n,!1,t),Lm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gd]||(e[gd]=!0,Lm("selectionchange",!1,e))}}function Wb(t,e,n,r){switch(Cb(e)){case 1:var i=OD;break;case 4:i=DD;break;default:i=Hy}n=i.bind(null,e,n,t),i=void 0,!Qg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Mm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Rs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}mb(function(){var u=s,d=zy(n),h=[];e:{var f=qb.get(t);if(f!==void 0){var g=Qy,_=t;switch(t){case"keypress":if(jd(n)===0)break e;case"keydown":case"keyup":g=QD;break;case"focusin":_="focus",g=Cm;break;case"focusout":_="blur",g=Cm;break;case"beforeblur":case"afterblur":g=Cm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=YI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=VD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=JD;break;case $b:case Bb:case jb:g=$D;break;case zb:g=eL;break;case"scroll":g=LD;break;case"wheel":g=nL;break;case"copy":case"cut":case"paste":g=jD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=JI}var E=(e&4)!==0,T=!E&&t==="scroll",m=E?f!==null?f+"Capture":null:f;E=[];for(var v=u,w;v!==null;){w=v;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,m!==null&&(C=Au(v,m),C!=null&&E.push(Du(v,C,w)))),T)break;v=v.return}0<E.length&&(f=new g(f,_,null,n,d),h.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Hg&&(_=n.relatedTarget||n.fromElement)&&(Rs(_)||_[qr]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=u,_=_?Rs(_):null,_!==null&&(T=co(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=u),g!==_)){if(E=YI,C="onMouseLeave",m="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(E=JI,C="onPointerLeave",m="onPointerEnter",v="pointer"),T=g==null?f:Wo(g),w=_==null?f:Wo(_),f=new E(C,v+"leave",g,n,d),f.target=T,f.relatedTarget=w,C=null,Rs(d)===u&&(E=new E(m,v+"enter",_,n,d),E.target=w,E.relatedTarget=T,C=E),T=C,g&&_)t:{for(E=g,m=_,v=0,w=E;w;w=bo(w))v++;for(w=0,C=m;C;C=bo(C))w++;for(;0<v-w;)E=bo(E),v--;for(;0<w-v;)m=bo(m),w--;for(;v--;){if(E===m||m!==null&&E===m.alternate)break t;E=bo(E),m=bo(m)}E=null}else E=null;g!==null&&uT(h,f,g,E,!1),_!==null&&T!==null&&uT(h,T,_,E,!0)}}e:{if(f=u?Wo(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var O=uL;else if(tT(f))if(Lb)O=fL;else{O=dL;var D=cL}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=hL);if(O&&(O=O(t,u))){Db(h,O,n,d);break e}D&&D(t,f,u),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&jg(f,"number",f.value)}switch(D=u?Wo(u):window,t){case"focusin":(tT(D)||D.contentEditable==="true")&&(qo=D,ev=u,au=null);break;case"focusout":au=ev=qo=null;break;case"mousedown":tv=!0;break;case"contextmenu":case"mouseup":case"dragend":tv=!1,oT(h,n,d);break;case"selectionchange":if(gL)break;case"keydown":case"keyup":oT(h,n,d)}var A;if(Xy)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else zo?Nb(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(kb&&n.locale!=="ko"&&(zo||I!=="onCompositionStart"?I==="onCompositionEnd"&&zo&&(A=xb()):(Ti=d,Ky="value"in Ti?Ti.value:Ti.textContent,zo=!0)),D=Eh(u,I),0<D.length&&(I=new XI(I,t,null,n,d),h.push({event:I,listeners:D}),A?I.data=A:(A=Ob(n),A!==null&&(I.data=A)))),(A=iL?sL(t,n):oL(t,n))&&(u=Eh(u,"onBeforeInput"),0<u.length&&(d=new XI("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=A))}Gb(h,e)})}function Du(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Eh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Au(t,n),s!=null&&r.unshift(Du(t,s,i)),s=Au(t,e),s!=null&&r.push(Du(t,s,i))),t=t.return}return r}function bo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function uT(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Au(n,s),l!=null&&o.unshift(Du(n,l,a))):i||(l=Au(n,s),l!=null&&o.push(Du(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var wL=/\r\n?/g,EL=/\u0000|\uFFFD/g;function cT(t){return(typeof t=="string"?t:""+t).replace(wL,`
`).replace(EL,"")}function vd(t,e,n){if(e=cT(e),cT(t)!==e&&n)throw Error(z(425))}function Ih(){}var nv=null,rv=null;function iv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sv=typeof setTimeout=="function"?setTimeout:void 0,IL=typeof clearTimeout=="function"?clearTimeout:void 0,dT=typeof Promise=="function"?Promise:void 0,TL=typeof queueMicrotask=="function"?queueMicrotask:typeof dT<"u"?function(t){return dT.resolve(null).then(t).catch(SL)}:sv;function SL(t){setTimeout(function(){throw t})}function Vm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),xu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xu(e)}function Oi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qa=Math.random().toString(36).slice(2),sr="__reactFiber$"+qa,Lu="__reactProps$"+qa,qr="__reactContainer$"+qa,ov="__reactEvents$"+qa,PL="__reactListeners$"+qa,bL="__reactHandles$"+qa;function Rs(t){var e=t[sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qr]||n[sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hT(t);t!==null;){if(n=t[sr])return n;t=hT(t)}return e}t=n,n=t.parentNode}return null}function Ec(t){return t=t[sr]||t[qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function kf(t){return t[Lu]||null}var av=[],Ho=-1;function ns(t){return{current:t}}function Oe(t){0>Ho||(t.current=av[Ho],av[Ho]=null,Ho--)}function Ae(t,e){Ho++,av[Ho]=t.current,t.current=e}var Bi={},Ut=ns(Bi),cn=ns(!1),js=Bi;function ya(t,e){var n=t.type.contextTypes;if(!n)return Bi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function dn(t){return t=t.childContextTypes,t!=null}function Th(){Oe(cn),Oe(Ut)}function fT(t,e,n){if(Ut.current!==Bi)throw Error(z(168));Ae(Ut,e),Ae(cn,n)}function Hb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,cD(t)||"Unknown",i));return Ge({},n,r)}function Sh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Bi,js=Ut.current,Ae(Ut,t),Ae(cn,cn.current),!0}function pT(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Hb(t,e,js),r.__reactInternalMemoizedMergedChildContext=t,Oe(cn),Oe(Ut),Ae(Ut,t)):Oe(cn),Ae(cn,n)}var kr=null,Nf=!1,Fm=!1;function Kb(t){kr===null?kr=[t]:kr.push(t)}function AL(t){Nf=!0,Kb(t)}function rs(){if(!Fm&&kr!==null){Fm=!0;var t=0,e=_e;try{var n=kr;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kr=null,Nf=!1}catch(i){throw kr!==null&&(kr=kr.slice(t+1)),_b(qy,rs),i}finally{_e=e,Fm=!1}}return null}var Ko=[],Qo=0,Ph=null,bh=0,xn=[],kn=0,zs=null,Dr=1,Lr="";function vs(t,e){Ko[Qo++]=bh,Ko[Qo++]=Ph,Ph=t,bh=e}function Qb(t,e,n){xn[kn++]=Dr,xn[kn++]=Lr,xn[kn++]=zs,zs=t;var r=Dr;t=Lr;var i=32-Xn(r)-1;r&=~(1<<i),n+=1;var s=32-Xn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Dr=1<<32-Xn(e)+i|n<<i|r,Lr=s+t}else Dr=1<<s|n<<i|r,Lr=t}function Zy(t){t.return!==null&&(vs(t,1),Qb(t,1,0))}function e_(t){for(;t===Ph;)Ph=Ko[--Qo],Ko[Qo]=null,bh=Ko[--Qo],Ko[Qo]=null;for(;t===zs;)zs=xn[--kn],xn[kn]=null,Lr=xn[--kn],xn[kn]=null,Dr=xn[--kn],xn[kn]=null}var In=null,wn=null,Ve=!1,Kn=null;function Yb(t,e){var n=On(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,In=t,wn=Oi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,In=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zs!==null?{id:Dr,overflow:Lr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=On(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,In=t,wn=null,!0):!1;default:return!1}}function lv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uv(t){if(Ve){var e=wn;if(e){var n=e;if(!mT(t,e)){if(lv(t))throw Error(z(418));e=Oi(n.nextSibling);var r=In;e&&mT(t,e)?Yb(r,n):(t.flags=t.flags&-4097|2,Ve=!1,In=t)}}else{if(lv(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ve=!1,In=t}}}function gT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;In=t}function yd(t){if(t!==In)return!1;if(!Ve)return gT(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!iv(t.type,t.memoizedProps)),e&&(e=wn)){if(lv(t))throw Xb(),Error(z(418));for(;e;)Yb(t,e),e=Oi(e.nextSibling)}if(gT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=Oi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=In?Oi(t.stateNode.nextSibling):null;return!0}function Xb(){for(var t=wn;t;)t=Oi(t.nextSibling)}function _a(){wn=In=null,Ve=!1}function t_(t){Kn===null?Kn=[t]:Kn.push(t)}var RL=Yr.ReactCurrentBatchConfig;function Cl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function _d(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vT(t){var e=t._init;return e(t._payload)}function Jb(t){function e(m,v){if(t){var w=m.deletions;w===null?(m.deletions=[v],m.flags|=16):w.push(v)}}function n(m,v){if(!t)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function i(m,v){return m=Vi(m,v),m.index=0,m.sibling=null,m}function s(m,v,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<v?(m.flags|=2,v):w):(m.flags|=2,v)):(m.flags|=1048576,v)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,v,w,C){return v===null||v.tag!==6?(v=Gm(w,m.mode,C),v.return=m,v):(v=i(v,w),v.return=m,v)}function l(m,v,w,C){var O=w.type;return O===jo?d(m,v,w.props.children,C,w.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===mi&&vT(O)===v.type)?(C=i(v,w.props),C.ref=Cl(m,v,w),C.return=m,C):(C=Qd(w.type,w.key,w.props,null,m.mode,C),C.ref=Cl(m,v,w),C.return=m,C)}function u(m,v,w,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=Wm(w,m.mode,C),v.return=m,v):(v=i(v,w.children||[]),v.return=m,v)}function d(m,v,w,C,O){return v===null||v.tag!==7?(v=Ms(w,m.mode,C,O),v.return=m,v):(v=i(v,w),v.return=m,v)}function h(m,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Gm(""+v,m.mode,w),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ld:return w=Qd(v.type,v.key,v.props,null,m.mode,w),w.ref=Cl(m,null,v),w.return=m,w;case Bo:return v=Wm(v,m.mode,w),v.return=m,v;case mi:var C=v._init;return h(m,C(v._payload),w)}if(ql(v)||Sl(v))return v=Ms(v,m.mode,w,null),v.return=m,v;_d(m,v)}return null}function f(m,v,w,C){var O=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:a(m,v,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ld:return w.key===O?l(m,v,w,C):null;case Bo:return w.key===O?u(m,v,w,C):null;case mi:return O=w._init,f(m,v,O(w._payload),C)}if(ql(w)||Sl(w))return O!==null?null:d(m,v,w,C,null);_d(m,w)}return null}function g(m,v,w,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return m=m.get(w)||null,a(v,m,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ld:return m=m.get(C.key===null?w:C.key)||null,l(v,m,C,O);case Bo:return m=m.get(C.key===null?w:C.key)||null,u(v,m,C,O);case mi:var D=C._init;return g(m,v,w,D(C._payload),O)}if(ql(C)||Sl(C))return m=m.get(w)||null,d(v,m,C,O,null);_d(v,C)}return null}function _(m,v,w,C){for(var O=null,D=null,A=v,I=v=0,P=null;A!==null&&I<w.length;I++){A.index>I?(P=A,A=null):P=A.sibling;var S=f(m,A,w[I],C);if(S===null){A===null&&(A=P);break}t&&A&&S.alternate===null&&e(m,A),v=s(S,v,I),D===null?O=S:D.sibling=S,D=S,A=P}if(I===w.length)return n(m,A),Ve&&vs(m,I),O;if(A===null){for(;I<w.length;I++)A=h(m,w[I],C),A!==null&&(v=s(A,v,I),D===null?O=A:D.sibling=A,D=A);return Ve&&vs(m,I),O}for(A=r(m,A);I<w.length;I++)P=g(A,m,I,w[I],C),P!==null&&(t&&P.alternate!==null&&A.delete(P.key===null?I:P.key),v=s(P,v,I),D===null?O=P:D.sibling=P,D=P);return t&&A.forEach(function(k){return e(m,k)}),Ve&&vs(m,I),O}function E(m,v,w,C){var O=Sl(w);if(typeof O!="function")throw Error(z(150));if(w=O.call(w),w==null)throw Error(z(151));for(var D=O=null,A=v,I=v=0,P=null,S=w.next();A!==null&&!S.done;I++,S=w.next()){A.index>I?(P=A,A=null):P=A.sibling;var k=f(m,A,S.value,C);if(k===null){A===null&&(A=P);break}t&&A&&k.alternate===null&&e(m,A),v=s(k,v,I),D===null?O=k:D.sibling=k,D=k,A=P}if(S.done)return n(m,A),Ve&&vs(m,I),O;if(A===null){for(;!S.done;I++,S=w.next())S=h(m,S.value,C),S!==null&&(v=s(S,v,I),D===null?O=S:D.sibling=S,D=S);return Ve&&vs(m,I),O}for(A=r(m,A);!S.done;I++,S=w.next())S=g(A,m,I,S.value,C),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?I:S.key),v=s(S,v,I),D===null?O=S:D.sibling=S,D=S);return t&&A.forEach(function(N){return e(m,N)}),Ve&&vs(m,I),O}function T(m,v,w,C){if(typeof w=="object"&&w!==null&&w.type===jo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ld:e:{for(var O=w.key,D=v;D!==null;){if(D.key===O){if(O=w.type,O===jo){if(D.tag===7){n(m,D.sibling),v=i(D,w.props.children),v.return=m,m=v;break e}}else if(D.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===mi&&vT(O)===D.type){n(m,D.sibling),v=i(D,w.props),v.ref=Cl(m,D,w),v.return=m,m=v;break e}n(m,D);break}else e(m,D);D=D.sibling}w.type===jo?(v=Ms(w.props.children,m.mode,C,w.key),v.return=m,m=v):(C=Qd(w.type,w.key,w.props,null,m.mode,C),C.ref=Cl(m,v,w),C.return=m,m=C)}return o(m);case Bo:e:{for(D=w.key;v!==null;){if(v.key===D)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(m,v.sibling),v=i(v,w.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else e(m,v);v=v.sibling}v=Wm(w,m.mode,C),v.return=m,m=v}return o(m);case mi:return D=w._init,T(m,v,D(w._payload),C)}if(ql(w))return _(m,v,w,C);if(Sl(w))return E(m,v,w,C);_d(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(m,v.sibling),v=i(v,w),v.return=m,m=v):(n(m,v),v=Gm(w,m.mode,C),v.return=m,m=v),o(m)):n(m,v)}return T}var wa=Jb(!0),Zb=Jb(!1),Ah=ns(null),Rh=null,Yo=null,n_=null;function r_(){n_=Yo=Rh=null}function i_(t){var e=Ah.current;Oe(Ah),t._currentValue=e}function cv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function sa(t,e){Rh=t,n_=Yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(n_!==t)if(t={context:t,memoizedValue:e,next:null},Yo===null){if(Rh===null)throw Error(z(308));Yo=t,Rh.dependencies={lanes:0,firstContext:t}}else Yo=Yo.next=t;return e}var Cs=null;function s_(t){Cs===null?Cs=[t]:Cs.push(t)}function eA(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,s_(e)):(n.next=i.next,i.next=n),e.interleaved=n,Gr(t,r)}function Gr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var gi=!1;function o_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Di(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gr(t,n)}return i=r.interleaved,i===null?(e.next=e,s_(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gr(t,n)}function zd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gy(t,n)}}function yT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ch(t,e,n,r){var i=t.updateQueue;gi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,E=a;switch(f=e,g=n,E.tag){case 1:if(_=E.payload,typeof _=="function"){h=_.call(g,h,f);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=E.payload,f=typeof _=="function"?_.call(g,h,f):_,f==null)break e;h=Ge({},h,f);break e;case 2:gi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=h):d=d.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Gs|=o,t.lanes=o,t.memoizedState=h}}function _T(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var Ic={},vr=ns(Ic),Mu=ns(Ic),Vu=ns(Ic);function xs(t){if(t===Ic)throw Error(z(174));return t}function a_(t,e){switch(Ae(Vu,e),Ae(Mu,t),Ae(vr,Ic),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qg(e,t)}Oe(vr),Ae(vr,e)}function Ea(){Oe(vr),Oe(Mu),Oe(Vu)}function nA(t){xs(Vu.current);var e=xs(vr.current),n=qg(e,t.type);e!==n&&(Ae(Mu,t),Ae(vr,n))}function l_(t){Mu.current===t&&(Oe(vr),Oe(Mu))}var je=ns(0);function xh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Um=[];function u_(){for(var t=0;t<Um.length;t++)Um[t]._workInProgressVersionPrimary=null;Um.length=0}var qd=Yr.ReactCurrentDispatcher,$m=Yr.ReactCurrentBatchConfig,qs=0,ze=null,ot=null,ft=null,kh=!1,lu=!1,Fu=0,CL=0;function Ot(){throw Error(z(321))}function c_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zn(t[n],e[n]))return!1;return!0}function d_(t,e,n,r,i,s){if(qs=s,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qd.current=t===null||t.memoizedState===null?OL:DL,t=n(r,i),lu){s=0;do{if(lu=!1,Fu=0,25<=s)throw Error(z(301));s+=1,ft=ot=null,e.updateQueue=null,qd.current=LL,t=n(r,i)}while(lu)}if(qd.current=Nh,e=ot!==null&&ot.next!==null,qs=0,ft=ot=ze=null,kh=!1,e)throw Error(z(300));return t}function h_(){var t=Fu!==0;return Fu=0,t}function ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?ze.memoizedState=ft=t:ft=ft.next=t,ft}function Un(){if(ot===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=ft===null?ze.memoizedState:ft.next;if(e!==null)ft=e,ot=t;else{if(t===null)throw Error(z(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ft===null?ze.memoizedState=ft=t:ft=ft.next=t}return ft}function Uu(t,e){return typeof e=="function"?e(t):e}function Bm(t){var e=Un(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=ot,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((qs&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ze.lanes|=d,Gs|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Zn(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ze.lanes|=s,Gs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jm(t){var e=Un(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Zn(s,e.memoizedState)||(on=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function rA(){}function iA(t,e){var n=ze,r=Un(),i=e(),s=!Zn(r.memoizedState,i);if(s&&(r.memoizedState=i,on=!0),r=r.queue,f_(aA.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,$u(9,oA.bind(null,n,r,i,e),void 0,null),mt===null)throw Error(z(349));qs&30||sA(n,e,i)}return i}function sA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function oA(t,e,n,r){e.value=n,e.getSnapshot=r,lA(e)&&uA(t)}function aA(t,e,n){return n(function(){lA(e)&&uA(t)})}function lA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zn(t,n)}catch{return!0}}function uA(t){var e=Gr(t,1);e!==null&&Jn(e,t,1,-1)}function wT(t){var e=ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:t},e.queue=t,t=t.dispatch=NL.bind(null,ze,t),[e.memoizedState,t]}function $u(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function cA(){return Un().memoizedState}function Gd(t,e,n,r){var i=ir();ze.flags|=t,i.memoizedState=$u(1|e,n,void 0,r===void 0?null:r)}function Of(t,e,n,r){var i=Un();r=r===void 0?null:r;var s=void 0;if(ot!==null){var o=ot.memoizedState;if(s=o.destroy,r!==null&&c_(r,o.deps)){i.memoizedState=$u(e,n,s,r);return}}ze.flags|=t,i.memoizedState=$u(1|e,n,s,r)}function ET(t,e){return Gd(8390656,8,t,e)}function f_(t,e){return Of(2048,8,t,e)}function dA(t,e){return Of(4,2,t,e)}function hA(t,e){return Of(4,4,t,e)}function fA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pA(t,e,n){return n=n!=null?n.concat([t]):null,Of(4,4,fA.bind(null,e,t),n)}function p_(){}function mA(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&c_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function gA(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&c_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vA(t,e,n){return qs&21?(Zn(n,e)||(n=Ib(),ze.lanes|=n,Gs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function xL(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=$m.transition;$m.transition={};try{t(!1),e()}finally{_e=n,$m.transition=r}}function yA(){return Un().memoizedState}function kL(t,e,n){var r=Mi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_A(t))wA(e,n);else if(n=eA(t,e,n,r),n!==null){var i=Qt();Jn(n,t,r,i),EA(n,e,r)}}function NL(t,e,n){var r=Mi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_A(t))wA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Zn(a,o)){var l=e.interleaved;l===null?(i.next=i,s_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=eA(t,e,i,r),n!==null&&(i=Qt(),Jn(n,t,r,i),EA(n,e,r))}}function _A(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function wA(t,e){lu=kh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function EA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gy(t,n)}}var Nh={readContext:Fn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},OL={readContext:Fn,useCallback:function(t,e){return ir().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:ET,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gd(4194308,4,fA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gd(4,2,t,e)},useMemo:function(t,e){var n=ir();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ir();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kL.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=ir();return t={current:t},e.memoizedState=t},useState:wT,useDebugValue:p_,useDeferredValue:function(t){return ir().memoizedState=t},useTransition:function(){var t=wT(!1),e=t[0];return t=xL.bind(null,t[1]),ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,i=ir();if(Ve){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),mt===null)throw Error(z(349));qs&30||sA(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ET(aA.bind(null,r,s,t),[t]),r.flags|=2048,$u(9,oA.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ir(),e=mt.identifierPrefix;if(Ve){var n=Lr,r=Dr;n=(r&~(1<<32-Xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},DL={readContext:Fn,useCallback:mA,useContext:Fn,useEffect:f_,useImperativeHandle:pA,useInsertionEffect:dA,useLayoutEffect:hA,useMemo:gA,useReducer:Bm,useRef:cA,useState:function(){return Bm(Uu)},useDebugValue:p_,useDeferredValue:function(t){var e=Un();return vA(e,ot.memoizedState,t)},useTransition:function(){var t=Bm(Uu)[0],e=Un().memoizedState;return[t,e]},useMutableSource:rA,useSyncExternalStore:iA,useId:yA,unstable_isNewReconciler:!1},LL={readContext:Fn,useCallback:mA,useContext:Fn,useEffect:f_,useImperativeHandle:pA,useInsertionEffect:dA,useLayoutEffect:hA,useMemo:gA,useReducer:jm,useRef:cA,useState:function(){return jm(Uu)},useDebugValue:p_,useDeferredValue:function(t){var e=Un();return ot===null?e.memoizedState=t:vA(e,ot.memoizedState,t)},useTransition:function(){var t=jm(Uu)[0],e=Un().memoizedState;return[t,e]},useMutableSource:rA,useSyncExternalStore:iA,useId:yA,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Df={isMounted:function(t){return(t=t._reactInternals)?co(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qt(),i=Mi(t),s=Fr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Di(t,s,i),e!==null&&(Jn(e,t,i,r),zd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qt(),i=Mi(t),s=Fr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Di(t,s,i),e!==null&&(Jn(e,t,i,r),zd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),r=Mi(t),i=Fr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Di(t,i,r),e!==null&&(Jn(e,t,r,n),zd(e,t,r))}};function IT(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Nu(n,r)||!Nu(i,s):!0}function IA(t,e,n){var r=!1,i=Bi,s=e.contextType;return typeof s=="object"&&s!==null?s=Fn(s):(i=dn(e)?js:Ut.current,r=e.contextTypes,s=(r=r!=null)?ya(t,i):Bi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Df,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function TT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Df.enqueueReplaceState(e,e.state,null)}function hv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},o_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Fn(s):(s=dn(e)?js:Ut.current,i.context=ya(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(dv(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Df.enqueueReplaceState(i,i.state,null),Ch(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ia(t,e){try{var n="",r=e;do n+=uD(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function zm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ML=typeof WeakMap=="function"?WeakMap:Map;function TA(t,e,n){n=Fr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Dh||(Dh=!0,Tv=r),fv(t,e)},n}function SA(t,e,n){n=Fr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){fv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){fv(t,e),typeof r!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ST(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ML;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=YL.bind(null,t,e,n),e.then(t,t))}function PT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fr(-1,1),e.tag=2,Di(n,e,1))),n.lanes|=1),t)}var VL=Yr.ReactCurrentOwner,on=!1;function Gt(t,e,n,r){e.child=t===null?Zb(e,null,n,r):wa(e,t.child,n,r)}function AT(t,e,n,r,i){n=n.render;var s=e.ref;return sa(e,i),r=d_(t,e,n,r,s,i),n=h_(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wr(t,e,i)):(Ve&&n&&Zy(e),e.flags|=1,Gt(t,e,r,i),e.child)}function RT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!I_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,PA(t,e,s,r,i)):(t=Qd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Nu,n(o,r)&&t.ref===e.ref)return Wr(t,e,i)}return e.flags|=1,t=Vi(s,r),t.ref=e.ref,t.return=e,e.child=t}function PA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Nu(s,r)&&t.ref===e.ref)if(on=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,Wr(t,e,i)}return pv(t,e,n,r,i)}function bA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Jo,vn),vn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Jo,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ae(Jo,vn),vn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ae(Jo,vn),vn|=r;return Gt(t,e,i,n),e.child}function AA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pv(t,e,n,r,i){var s=dn(n)?js:Ut.current;return s=ya(e,s),sa(e,i),n=d_(t,e,n,r,s,i),r=h_(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wr(t,e,i)):(Ve&&r&&Zy(e),e.flags|=1,Gt(t,e,n,i),e.child)}function CT(t,e,n,r,i){if(dn(n)){var s=!0;Sh(e)}else s=!1;if(sa(e,i),e.stateNode===null)Wd(t,e),IA(e,n,r),hv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Fn(u):(u=dn(n)?js:Ut.current,u=ya(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&TT(e,o,r,u),gi=!1;var f=e.memoizedState;o.state=f,Ch(e,r,o,i),l=e.memoizedState,a!==r||f!==l||cn.current||gi?(typeof d=="function"&&(dv(e,n,d,r),l=e.memoizedState),(a=gi||IT(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,tA(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Wn(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fn(l):(l=dn(n)?js:Ut.current,l=ya(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&TT(e,o,r,l),gi=!1,f=e.memoizedState,o.state=f,Ch(e,r,o,i);var _=e.memoizedState;a!==h||f!==_||cn.current||gi?(typeof g=="function"&&(dv(e,n,g,r),_=e.memoizedState),(u=gi||IT(e,n,u,r,f,_,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return mv(t,e,n,r,s,i)}function mv(t,e,n,r,i,s){AA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&pT(e,n,!1),Wr(t,e,s);r=e.stateNode,VL.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wa(e,t.child,null,s),e.child=wa(e,null,a,s)):Gt(t,e,a,s),e.memoizedState=r.state,i&&pT(e,n,!0),e.child}function RA(t){var e=t.stateNode;e.pendingContext?fT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fT(t,e.context,!1),a_(t,e.containerInfo)}function xT(t,e,n,r,i){return _a(),t_(i),e.flags|=256,Gt(t,e,n,r),e.child}var gv={dehydrated:null,treeContext:null,retryLane:0};function vv(t){return{baseLanes:t,cachePool:null,transitions:null}}function CA(t,e,n){var r=e.pendingProps,i=je.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ae(je,i&1),t===null)return uv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Vf(o,r,0,null),t=Ms(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=vv(n),e.memoizedState=gv,t):m_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return FL(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Vi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Vi(a,s):(s=Ms(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?vv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=gv,r}return s=t.child,t=s.sibling,r=Vi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function m_(t,e){return e=Vf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wd(t,e,n,r){return r!==null&&t_(r),wa(e,t.child,null,n),t=m_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FL(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=zm(Error(z(422))),wd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Vf({mode:"visible",children:r.children},i,0,null),s=Ms(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&wa(e,t.child,null,o),e.child.memoizedState=vv(o),e.memoizedState=gv,s);if(!(e.mode&1))return wd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(z(419)),r=zm(s,r,void 0),wd(t,e,o,r)}if(a=(o&t.childLanes)!==0,on||a){if(r=mt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gr(t,i),Jn(r,t,i,-1))}return E_(),r=zm(Error(z(421))),wd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=XL.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,wn=Oi(i.nextSibling),In=e,Ve=!0,Kn=null,t!==null&&(xn[kn++]=Dr,xn[kn++]=Lr,xn[kn++]=zs,Dr=t.id,Lr=t.overflow,zs=e),e=m_(e,r.children),e.flags|=4096,e)}function kT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),cv(t.return,e,n)}function qm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function xA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Gt(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&kT(t,n,e);else if(t.tag===19)kT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(je,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&xh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),qm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&xh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}qm(e,!0,n,null,s);break;case"together":qm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Vi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function UL(t,e,n){switch(e.tag){case 3:RA(e),_a();break;case 5:nA(e);break;case 1:dn(e.type)&&Sh(e);break;case 4:a_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ae(Ah,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?CA(t,e,n):(Ae(je,je.current&1),t=Wr(t,e,n),t!==null?t.sibling:null);Ae(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ae(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,bA(t,e,n)}return Wr(t,e,n)}var kA,yv,NA,OA;kA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yv=function(){};NA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,xs(vr.current);var s=null;switch(n){case"input":i=$g(t,i),r=$g(t,r),s=[];break;case"select":i=Ge({},i,{value:void 0}),r=Ge({},r,{value:void 0}),s=[];break;case"textarea":i=zg(t,i),r=zg(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ih)}Gg(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ke("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};OA=function(t,e,n,r){n!==r&&(e.flags|=4)};function xl(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $L(t,e,n){var r=e.pendingProps;switch(e_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return dn(e.type)&&Th(),Dt(e),null;case 3:return r=e.stateNode,Ea(),Oe(cn),Oe(Ut),u_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(bv(Kn),Kn=null))),yv(t,e),Dt(e),null;case 5:l_(e);var i=xs(Vu.current);if(n=e.type,t!==null&&e.stateNode!=null)NA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Dt(e),null}if(t=xs(vr.current),yd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[sr]=e,r[Lu]=s,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(i=0;i<Wl.length;i++)ke(Wl[i],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":$I(r,s),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ke("invalid",r);break;case"textarea":jI(r,s),ke("invalid",r)}Gg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&vd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&vd(r.textContent,a,t),i=["children",""+a]):Pu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":ud(r),BI(r,s,!0);break;case"textarea":ud(r),zI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ih)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ab(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[sr]=e,t[Lu]=r,kA(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wg(n,r),n){case"dialog":ke("cancel",t),ke("close",t),i=r;break;case"iframe":case"object":case"embed":ke("load",t),i=r;break;case"video":case"audio":for(i=0;i<Wl.length;i++)ke(Wl[i],t);i=r;break;case"source":ke("error",t),i=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),i=r;break;case"details":ke("toggle",t),i=r;break;case"input":$I(t,r),i=$g(t,r),ke("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ge({},r,{value:void 0}),ke("invalid",t);break;case"textarea":jI(t,r),i=zg(t,r),ke("invalid",t);break;default:i=r}Gg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?cb(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&lb(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&bu(t,l):typeof l=="number"&&bu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ke("scroll",t):l!=null&&Uy(t,s,l,o))}switch(n){case"input":ud(t),BI(t,r,!1);break;case"textarea":ud(t),zI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$i(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ta(t,!!r.multiple,s,!1):r.defaultValue!=null&&ta(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ih)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)OA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=xs(Vu.current),xs(vr.current),yd(e)){if(r=e.stateNode,n=e.memoizedProps,r[sr]=e,(s=r.nodeValue!==n)&&(t=In,t!==null))switch(t.tag){case 3:vd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[sr]=e,e.stateNode=r}return Dt(e),null;case 13:if(Oe(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&wn!==null&&e.mode&1&&!(e.flags&128))Xb(),_a(),e.flags|=98560,s=!1;else if(s=yd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[sr]=e}else _a(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),s=!1}else Kn!==null&&(bv(Kn),Kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?at===0&&(at=3):E_())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return Ea(),yv(t,e),t===null&&Ou(e.stateNode.containerInfo),Dt(e),null;case 10:return i_(e.type._context),Dt(e),null;case 17:return dn(e.type)&&Th(),Dt(e),null;case 19:if(Oe(je),s=e.memoizedState,s===null)return Dt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)xl(s,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xh(t),o!==null){for(e.flags|=128,xl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(je,je.current&1|2),e.child}t=t.sibling}s.tail!==null&&et()>Ta&&(e.flags|=128,r=!0,xl(s,!1),e.lanes=4194304)}else{if(!r)if(t=xh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ve)return Dt(e),null}else 2*et()-s.renderingStartTime>Ta&&n!==1073741824&&(e.flags|=128,r=!0,xl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=et(),e.sibling=null,n=je.current,Ae(je,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return w_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function BL(t,e){switch(e_(e),e.tag){case 1:return dn(e.type)&&Th(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ea(),Oe(cn),Oe(Ut),u_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return l_(e),null;case 13:if(Oe(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));_a()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(je),null;case 4:return Ea(),null;case 10:return i_(e.type._context),null;case 22:case 23:return w_(),null;case 24:return null;default:return null}}var Ed=!1,Vt=!1,jL=typeof WeakSet=="function"?WeakSet:Set,X=null;function Xo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(t,e,r)}else n.current=null}function _v(t,e,n){try{n()}catch(r){Ke(t,e,r)}}var NT=!1;function zL(t,e){if(nv=_h,t=Fb(),Jy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(rv={focusedElem:t,selectionRange:n},_h=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var E=_.memoizedProps,T=_.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?E:Wn(e.type,E),T);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(C){Ke(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return _=NT,NT=!1,_}function uu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&_v(e,n,s)}i=i.next}while(i!==r)}}function Lf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function DA(t){var e=t.alternate;e!==null&&(t.alternate=null,DA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[sr],delete e[Lu],delete e[ov],delete e[PL],delete e[bL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function LA(t){return t.tag===5||t.tag===3||t.tag===4}function OT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||LA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ev(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ih));else if(r!==4&&(t=t.child,t!==null))for(Ev(t,e,n),t=t.sibling;t!==null;)Ev(t,e,n),t=t.sibling}function Iv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Iv(t,e,n),t=t.sibling;t!==null;)Iv(t,e,n),t=t.sibling}var St=null,Hn=!1;function ui(t,e,n){for(n=n.child;n!==null;)MA(t,e,n),n=n.sibling}function MA(t,e,n){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(Af,n)}catch{}switch(n.tag){case 5:Vt||Xo(n,e);case 6:var r=St,i=Hn;St=null,ui(t,e,n),St=r,Hn=i,St!==null&&(Hn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Hn?(t=St,n=n.stateNode,t.nodeType===8?Vm(t.parentNode,n):t.nodeType===1&&Vm(t,n),xu(t)):Vm(St,n.stateNode));break;case 4:r=St,i=Hn,St=n.stateNode.containerInfo,Hn=!0,ui(t,e,n),St=r,Hn=i;break;case 0:case 11:case 14:case 15:if(!Vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&_v(n,e,o),i=i.next}while(i!==r)}ui(t,e,n);break;case 1:if(!Vt&&(Xo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ke(n,e,a)}ui(t,e,n);break;case 21:ui(t,e,n);break;case 22:n.mode&1?(Vt=(r=Vt)||n.memoizedState!==null,ui(t,e,n),Vt=r):ui(t,e,n);break;default:ui(t,e,n)}}function DT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jL),e.forEach(function(r){var i=JL.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:St=a.stateNode,Hn=!1;break e;case 3:St=a.stateNode.containerInfo,Hn=!0;break e;case 4:St=a.stateNode.containerInfo,Hn=!0;break e}a=a.return}if(St===null)throw Error(z(160));MA(s,o,i),St=null,Hn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ke(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VA(e,t),e=e.sibling}function VA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gn(e,t),rr(t),r&4){try{uu(3,t,t.return),Lf(3,t)}catch(E){Ke(t,t.return,E)}try{uu(5,t,t.return)}catch(E){Ke(t,t.return,E)}}break;case 1:Gn(e,t),rr(t),r&512&&n!==null&&Xo(n,n.return);break;case 5:if(Gn(e,t),rr(t),r&512&&n!==null&&Xo(n,n.return),t.flags&32){var i=t.stateNode;try{bu(i,"")}catch(E){Ke(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&sb(i,s),Wg(a,o);var u=Wg(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?cb(i,h):d==="dangerouslySetInnerHTML"?lb(i,h):d==="children"?bu(i,h):Uy(i,d,h,u)}switch(a){case"input":Bg(i,s);break;case"textarea":ob(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ta(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?ta(i,!!s.multiple,s.defaultValue,!0):ta(i,!!s.multiple,s.multiple?[]:"",!1))}i[Lu]=s}catch(E){Ke(t,t.return,E)}}break;case 6:if(Gn(e,t),rr(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){Ke(t,t.return,E)}}break;case 3:if(Gn(e,t),rr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xu(e.containerInfo)}catch(E){Ke(t,t.return,E)}break;case 4:Gn(e,t),rr(t);break;case 13:Gn(e,t),rr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(y_=et())),r&4&&DT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Vt=(u=Vt)||d,Gn(e,t),Vt=u):Gn(e,t),rr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(X=t,d=t.child;d!==null;){for(h=X=d;X!==null;){switch(f=X,g=f.child,f.tag){case 0:case 11:case 14:case 15:uu(4,f,f.return);break;case 1:Xo(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(E){Ke(r,n,E)}}break;case 5:Xo(f,f.return);break;case 22:if(f.memoizedState!==null){MT(h);continue}}g!==null?(g.return=f,X=g):MT(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ub("display",o))}catch(E){Ke(t,t.return,E)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(E){Ke(t,t.return,E)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Gn(e,t),rr(t),r&4&&DT(t);break;case 21:break;default:Gn(e,t),rr(t)}}function rr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(LA(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(bu(i,""),r.flags&=-33);var s=OT(t);Iv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=OT(t);Ev(t,a,o);break;default:throw Error(z(161))}}catch(l){Ke(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qL(t,e,n){X=t,FA(t)}function FA(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ed;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Vt;a=Ed;var u=Vt;if(Ed=o,(Vt=l)&&!u)for(X=i;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?VT(i):l!==null?(l.return=o,X=l):VT(i);for(;s!==null;)X=s,FA(s),s=s.sibling;X=i,Ed=a,Vt=u}LT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):LT(t)}}function LT(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vt||Lf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Wn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&_T(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_T(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&xu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Vt||e.flags&512&&wv(e)}catch(f){Ke(e,e.return,f)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function MT(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function VT(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Lf(4,e)}catch(l){Ke(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ke(e,i,l)}}var s=e.return;try{wv(e)}catch(l){Ke(e,s,l)}break;case 5:var o=e.return;try{wv(e)}catch(l){Ke(e,o,l)}}}catch(l){Ke(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var GL=Math.ceil,Oh=Yr.ReactCurrentDispatcher,g_=Yr.ReactCurrentOwner,Mn=Yr.ReactCurrentBatchConfig,he=0,mt=null,st=null,At=0,vn=0,Jo=ns(0),at=0,Bu=null,Gs=0,Mf=0,v_=0,cu=null,sn=null,y_=0,Ta=1/0,xr=null,Dh=!1,Tv=null,Li=null,Id=!1,Si=null,Lh=0,du=0,Sv=null,Hd=-1,Kd=0;function Qt(){return he&6?et():Hd!==-1?Hd:Hd=et()}function Mi(t){return t.mode&1?he&2&&At!==0?At&-At:RL.transition!==null?(Kd===0&&(Kd=Ib()),Kd):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Cb(t.type)),t):1}function Jn(t,e,n,r){if(50<du)throw du=0,Sv=null,Error(z(185));_c(t,n,r),(!(he&2)||t!==mt)&&(t===mt&&(!(he&2)&&(Mf|=n),at===4&&_i(t,At)),hn(t,r),n===1&&he===0&&!(e.mode&1)&&(Ta=et()+500,Nf&&rs()))}function hn(t,e){var n=t.callbackNode;RD(t,e);var r=yh(t,t===mt?At:0);if(r===0)n!==null&&WI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&WI(n),e===1)t.tag===0?AL(FT.bind(null,t)):Kb(FT.bind(null,t)),TL(function(){!(he&6)&&rs()}),n=null;else{switch(Tb(r)){case 1:n=qy;break;case 4:n=wb;break;case 16:n=vh;break;case 536870912:n=Eb;break;default:n=vh}n=WA(n,UA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function UA(t,e){if(Hd=-1,Kd=0,he&6)throw Error(z(327));var n=t.callbackNode;if(oa()&&t.callbackNode!==n)return null;var r=yh(t,t===mt?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mh(t,r);else{e=r;var i=he;he|=2;var s=BA();(mt!==t||At!==e)&&(xr=null,Ta=et()+500,Ls(t,e));do try{KL();break}catch(a){$A(t,a)}while(!0);r_(),Oh.current=s,he=i,st!==null?e=0:(mt=null,At=0,e=at)}if(e!==0){if(e===2&&(i=Xg(t),i!==0&&(r=i,e=Pv(t,i))),e===1)throw n=Bu,Ls(t,0),_i(t,r),hn(t,et()),n;if(e===6)_i(t,r);else{if(i=t.current.alternate,!(r&30)&&!WL(i)&&(e=Mh(t,r),e===2&&(s=Xg(t),s!==0&&(r=s,e=Pv(t,s))),e===1))throw n=Bu,Ls(t,0),_i(t,r),hn(t,et()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ys(t,sn,xr);break;case 3:if(_i(t,r),(r&130023424)===r&&(e=y_+500-et(),10<e)){if(yh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Qt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=sv(ys.bind(null,t,sn,xr),e);break}ys(t,sn,xr);break;case 4:if(_i(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Xn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*GL(r/1960))-r,10<r){t.timeoutHandle=sv(ys.bind(null,t,sn,xr),r);break}ys(t,sn,xr);break;case 5:ys(t,sn,xr);break;default:throw Error(z(329))}}}return hn(t,et()),t.callbackNode===n?UA.bind(null,t):null}function Pv(t,e){var n=cu;return t.current.memoizedState.isDehydrated&&(Ls(t,e).flags|=256),t=Mh(t,e),t!==2&&(e=sn,sn=n,e!==null&&bv(e)),t}function bv(t){sn===null?sn=t:sn.push.apply(sn,t)}function WL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _i(t,e){for(e&=~v_,e&=~Mf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Xn(e),r=1<<n;t[n]=-1,e&=~r}}function FT(t){if(he&6)throw Error(z(327));oa();var e=yh(t,0);if(!(e&1))return hn(t,et()),null;var n=Mh(t,e);if(t.tag!==0&&n===2){var r=Xg(t);r!==0&&(e=r,n=Pv(t,r))}if(n===1)throw n=Bu,Ls(t,0),_i(t,e),hn(t,et()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ys(t,sn,xr),hn(t,et()),null}function __(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(Ta=et()+500,Nf&&rs())}}function Ws(t){Si!==null&&Si.tag===0&&!(he&6)&&oa();var e=he;he|=1;var n=Mn.transition,r=_e;try{if(Mn.transition=null,_e=1,t)return t()}finally{_e=r,Mn.transition=n,he=e,!(he&6)&&rs()}}function w_(){vn=Jo.current,Oe(Jo)}function Ls(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,IL(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(e_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Th();break;case 3:Ea(),Oe(cn),Oe(Ut),u_();break;case 5:l_(r);break;case 4:Ea();break;case 13:Oe(je);break;case 19:Oe(je);break;case 10:i_(r.type._context);break;case 22:case 23:w_()}n=n.return}if(mt=t,st=t=Vi(t.current,null),At=vn=e,at=0,Bu=null,v_=Mf=Gs=0,sn=cu=null,Cs!==null){for(e=0;e<Cs.length;e++)if(n=Cs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Cs=null}return t}function $A(t,e){do{var n=st;try{if(r_(),qd.current=Nh,kh){for(var r=ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kh=!1}if(qs=0,ft=ot=ze=null,lu=!1,Fu=0,g_.current=null,n===null||n.return===null){at=1,Bu=e,st=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=At,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=PT(o);if(g!==null){g.flags&=-257,bT(g,o,a,s,e),g.mode&1&&ST(s,u,e),e=g,l=u;var _=e.updateQueue;if(_===null){var E=new Set;E.add(l),e.updateQueue=E}else _.add(l);break e}else{if(!(e&1)){ST(s,u,e),E_();break e}l=Error(z(426))}}else if(Ve&&a.mode&1){var T=PT(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),bT(T,o,a,s,e),t_(Ia(l,a));break e}}s=l=Ia(l,a),at!==4&&(at=2),cu===null?cu=[s]:cu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=TA(s,l,e);yT(s,m);break e;case 1:a=l;var v=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Li===null||!Li.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=SA(s,a,e);yT(s,C);break e}}s=s.return}while(s!==null)}zA(n)}catch(O){e=O,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function BA(){var t=Oh.current;return Oh.current=Nh,t===null?Nh:t}function E_(){(at===0||at===3||at===2)&&(at=4),mt===null||!(Gs&268435455)&&!(Mf&268435455)||_i(mt,At)}function Mh(t,e){var n=he;he|=2;var r=BA();(mt!==t||At!==e)&&(xr=null,Ls(t,e));do try{HL();break}catch(i){$A(t,i)}while(!0);if(r_(),he=n,Oh.current=r,st!==null)throw Error(z(261));return mt=null,At=0,at}function HL(){for(;st!==null;)jA(st)}function KL(){for(;st!==null&&!_D();)jA(st)}function jA(t){var e=GA(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?zA(t):st=e,g_.current=null}function zA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BL(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,st=null;return}}else if(n=$L(n,e,vn),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);at===0&&(at=5)}function ys(t,e,n){var r=_e,i=Mn.transition;try{Mn.transition=null,_e=1,QL(t,e,n,r)}finally{Mn.transition=i,_e=r}return null}function QL(t,e,n,r){do oa();while(Si!==null);if(he&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(CD(t,s),t===mt&&(st=mt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Id||(Id=!0,WA(vh,function(){return oa(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Mn.transition,Mn.transition=null;var o=_e;_e=1;var a=he;he|=4,g_.current=null,zL(t,n),VA(n,t),mL(rv),_h=!!nv,rv=nv=null,t.current=n,qL(n),wD(),he=a,_e=o,Mn.transition=s}else t.current=n;if(Id&&(Id=!1,Si=t,Lh=i),s=t.pendingLanes,s===0&&(Li=null),TD(n.stateNode),hn(t,et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Dh)throw Dh=!1,t=Tv,Tv=null,t;return Lh&1&&t.tag!==0&&oa(),s=t.pendingLanes,s&1?t===Sv?du++:(du=0,Sv=t):du=0,rs(),null}function oa(){if(Si!==null){var t=Tb(Lh),e=Mn.transition,n=_e;try{if(Mn.transition=null,_e=16>t?16:t,Si===null)var r=!1;else{if(t=Si,Si=null,Lh=0,he&6)throw Error(z(331));var i=he;for(he|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(X=u;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:uu(8,d,s)}var h=d.child;if(h!==null)h.return=d,X=h;else for(;X!==null;){d=X;var f=d.sibling,g=d.return;if(DA(d),d===u){X=null;break}if(f!==null){f.return=g,X=f;break}X=g}}}var _=s.alternate;if(_!==null){var E=_.child;if(E!==null){_.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:uu(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,X=m;break e}X=s.return}}var v=t.current;for(X=v;X!==null;){o=X;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,X=w;else e:for(o=v;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Lf(9,a)}}catch(O){Ke(a,a.return,O)}if(a===o){X=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,X=C;break e}X=a.return}}if(he=i,rs(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(Af,t)}catch{}r=!0}return r}finally{_e=n,Mn.transition=e}}return!1}function UT(t,e,n){e=Ia(n,e),e=TA(t,e,1),t=Di(t,e,1),e=Qt(),t!==null&&(_c(t,1,e),hn(t,e))}function Ke(t,e,n){if(t.tag===3)UT(t,t,n);else for(;e!==null;){if(e.tag===3){UT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Li===null||!Li.has(r))){t=Ia(n,t),t=SA(e,t,1),e=Di(e,t,1),t=Qt(),e!==null&&(_c(e,1,t),hn(e,t));break}}e=e.return}}function YL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(At&n)===n&&(at===4||at===3&&(At&130023424)===At&&500>et()-y_?Ls(t,0):v_|=n),hn(t,e)}function qA(t,e){e===0&&(t.mode&1?(e=hd,hd<<=1,!(hd&130023424)&&(hd=4194304)):e=1);var n=Qt();t=Gr(t,e),t!==null&&(_c(t,e,n),hn(t,n))}function XL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qA(t,n)}function JL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),qA(t,n)}var GA;GA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,UL(t,e,n);on=!!(t.flags&131072)}else on=!1,Ve&&e.flags&1048576&&Qb(e,bh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wd(t,e),t=e.pendingProps;var i=ya(e,Ut.current);sa(e,n),i=d_(null,e,r,t,i,n);var s=h_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(r)?(s=!0,Sh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,o_(e),i.updater=Df,e.stateNode=i,i._reactInternals=e,hv(e,r,t,n),e=mv(null,e,r,!0,s,n)):(e.tag=0,Ve&&s&&Zy(e),Gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=eM(r),t=Wn(r,t),i){case 0:e=pv(null,e,r,t,n);break e;case 1:e=CT(null,e,r,t,n);break e;case 11:e=AT(null,e,r,t,n);break e;case 14:e=RT(null,e,r,Wn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),pv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),CT(t,e,r,i,n);case 3:e:{if(RA(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,tA(t,e),Ch(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ia(Error(z(423)),e),e=xT(t,e,r,n,i);break e}else if(r!==i){i=Ia(Error(z(424)),e),e=xT(t,e,r,n,i);break e}else for(wn=Oi(e.stateNode.containerInfo.firstChild),In=e,Ve=!0,Kn=null,n=Zb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_a(),r===i){e=Wr(t,e,n);break e}Gt(t,e,r,n)}e=e.child}return e;case 5:return nA(e),t===null&&uv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,iv(r,i)?o=null:s!==null&&iv(r,s)&&(e.flags|=32),AA(t,e),Gt(t,e,o,n),e.child;case 6:return t===null&&uv(e),null;case 13:return CA(t,e,n);case 4:return a_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wa(e,null,r,n):Gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),AT(t,e,r,i,n);case 7:return Gt(t,e,e.pendingProps,n),e.child;case 8:return Gt(t,e,e.pendingProps.children,n),e.child;case 12:return Gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ae(Ah,r._currentValue),r._currentValue=o,s!==null)if(Zn(s.value,o)){if(s.children===i.children&&!cn.current){e=Wr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Fr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),cv(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),cv(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,sa(e,n),i=Fn(i),r=r(i),e.flags|=1,Gt(t,e,r,n),e.child;case 14:return r=e.type,i=Wn(r,e.pendingProps),i=Wn(r.type,i),RT(t,e,r,i,n);case 15:return PA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wn(r,i),Wd(t,e),e.tag=1,dn(r)?(t=!0,Sh(e)):t=!1,sa(e,n),IA(e,r,i),hv(e,r,i,n),mv(null,e,r,!0,t,n);case 19:return xA(t,e,n);case 22:return bA(t,e,n)}throw Error(z(156,e.tag))};function WA(t,e){return _b(t,e)}function ZL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,e,n,r){return new ZL(t,e,n,r)}function I_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eM(t){if(typeof t=="function")return I_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===By)return 11;if(t===jy)return 14}return 2}function Vi(t,e){var n=t.alternate;return n===null?(n=On(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")I_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jo:return Ms(n.children,i,s,e);case $y:o=8,i|=8;break;case Mg:return t=On(12,n,e,i|2),t.elementType=Mg,t.lanes=s,t;case Vg:return t=On(13,n,e,i),t.elementType=Vg,t.lanes=s,t;case Fg:return t=On(19,n,e,i),t.elementType=Fg,t.lanes=s,t;case nb:return Vf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case eb:o=10;break e;case tb:o=9;break e;case By:o=11;break e;case jy:o=14;break e;case mi:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=On(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ms(t,e,n,r){return t=On(7,t,r,e),t.lanes=n,t}function Vf(t,e,n,r){return t=On(22,t,r,e),t.elementType=nb,t.lanes=n,t.stateNode={isHidden:!1},t}function Gm(t,e,n){return t=On(6,t,null,e),t.lanes=n,t}function Wm(t,e,n){return e=On(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tM(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bm(0),this.expirationTimes=bm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function T_(t,e,n,r,i,s,o,a,l){return t=new tM(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=On(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},o_(s),t}function nM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function HA(t){if(!t)return Bi;t=t._reactInternals;e:{if(co(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(dn(n))return Hb(t,n,e)}return e}function KA(t,e,n,r,i,s,o,a,l){return t=T_(n,r,!0,t,i,s,o,a,l),t.context=HA(null),n=t.current,r=Qt(),i=Mi(n),s=Fr(r,i),s.callback=e??null,Di(n,s,i),t.current.lanes=i,_c(t,i,r),hn(t,r),t}function Ff(t,e,n,r){var i=e.current,s=Qt(),o=Mi(i);return n=HA(n),e.context===null?e.context=n:e.pendingContext=n,e=Fr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Di(i,e,o),t!==null&&(Jn(t,i,o,s),zd(t,i,o)),o}function Vh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $T(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function S_(t,e){$T(t,e),(t=t.alternate)&&$T(t,e)}function rM(){return null}var QA=typeof reportError=="function"?reportError:function(t){console.error(t)};function P_(t){this._internalRoot=t}Uf.prototype.render=P_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Ff(t,e,null,null)};Uf.prototype.unmount=P_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ws(function(){Ff(null,t,null,null)}),e[qr]=null}};function Uf(t){this._internalRoot=t}Uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=bb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yi.length&&e!==0&&e<yi[n].priority;n++);yi.splice(n,0,t),n===0&&Rb(t)}};function b_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function BT(){}function iM(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Vh(o);s.call(u)}}var o=KA(e,r,t,0,null,!1,!1,"",BT);return t._reactRootContainer=o,t[qr]=o.current,Ou(t.nodeType===8?t.parentNode:t),Ws(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Vh(l);a.call(u)}}var l=T_(t,0,!1,null,null,!1,!1,"",BT);return t._reactRootContainer=l,t[qr]=l.current,Ou(t.nodeType===8?t.parentNode:t),Ws(function(){Ff(e,l,n,r)}),l}function Bf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Vh(o);a.call(l)}}Ff(e,o,t,i)}else o=iM(n,e,t,i,r);return Vh(o)}Sb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Gl(e.pendingLanes);n!==0&&(Gy(e,n|1),hn(e,et()),!(he&6)&&(Ta=et()+500,rs()))}break;case 13:Ws(function(){var r=Gr(t,1);if(r!==null){var i=Qt();Jn(r,t,1,i)}}),S_(t,1)}};Wy=function(t){if(t.tag===13){var e=Gr(t,134217728);if(e!==null){var n=Qt();Jn(e,t,134217728,n)}S_(t,134217728)}};Pb=function(t){if(t.tag===13){var e=Mi(t),n=Gr(t,e);if(n!==null){var r=Qt();Jn(n,t,e,r)}S_(t,e)}};bb=function(){return _e};Ab=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};Kg=function(t,e,n){switch(e){case"input":if(Bg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=kf(r);if(!i)throw Error(z(90));ib(r),Bg(r,i)}}}break;case"textarea":ob(t,n);break;case"select":e=n.value,e!=null&&ta(t,!!n.multiple,e,!1)}};fb=__;pb=Ws;var sM={usingClientEntryPoint:!1,Events:[Ec,Wo,kf,db,hb,__]},kl={findFiberByHostInstance:Rs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oM={bundleType:kl.bundleType,version:kl.version,rendererPackageName:kl.rendererPackageName,rendererConfig:kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vb(t),t===null?null:t.stateNode},findFiberByHostInstance:kl.findFiberByHostInstance||rM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Td.isDisabled&&Td.supportsFiber)try{Af=Td.inject(oM),gr=Td}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sM;bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b_(e))throw Error(z(200));return nM(t,e,null,n)};bn.createRoot=function(t,e){if(!b_(t))throw Error(z(299));var n=!1,r="",i=QA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=T_(t,1,!1,null,null,n,!1,r,i),t[qr]=e.current,Ou(t.nodeType===8?t.parentNode:t),new P_(e)};bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=vb(e),t=t===null?null:t.stateNode,t};bn.flushSync=function(t){return Ws(t)};bn.hydrate=function(t,e,n){if(!$f(e))throw Error(z(200));return Bf(null,t,e,!0,n)};bn.hydrateRoot=function(t,e,n){if(!b_(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=QA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=KA(e,null,t,1,n??null,i,!1,s,o),t[qr]=e.current,Ou(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Uf(e)};bn.render=function(t,e,n){if(!$f(e))throw Error(z(200));return Bf(null,t,e,!1,n)};bn.unmountComponentAtNode=function(t){if(!$f(t))throw Error(z(40));return t._reactRootContainer?(Ws(function(){Bf(null,null,t,!1,function(){t._reactRootContainer=null,t[qr]=null})}),!0):!1};bn.unstable_batchedUpdates=__;bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$f(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Bf(t,e,n,!1,r)};bn.version="18.3.1-next-f1338f8080-20240426";function YA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YA)}catch(t){console.error(t)}}YA(),YP.exports=bn;var A_=YP.exports;const Zo=Pf(A_);var jT=A_;Dg.createRoot=jT.createRoot,Dg.hydrateRoot=jT.hydrateRoot;var XA={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(XA);var aM=XA.exports;const _t=Pf(aM),lM=["xxl","xl","lg","md","sm","xs"],uM="xs",cM=x.createContext({prefixes:{},breakpoints:lM,minBreakpoint:uM});function mn(t,e){const{prefixes:n}=x.useContext(cM);return t||n[e]||e}const JA=x.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:r,...i},s)=>{const o=mn(t,"container"),a=typeof e=="string"?`-${e}`:"-fluid";return M.jsx(n,{ref:s,...i,className:_t(r,e?`${o}${a}`:o)})});JA.displayName="Container";var zT={exports:{}},Av={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){function i(o,a,l,u,d,h){var f=u||"<<anonymous>>",g=h||l;if(a[l]==null)return o?new Error("Required "+d+" `"+g+"` was not specified "+("in `"+f+"`.")):null;for(var _=arguments.length,E=Array(_>6?_-6:0),T=6;T<_;T++)E[T-6]=arguments[T];return r.apply(void 0,[a,l,f,d,g].concat(E))}var s=i.bind(null,!1);return s.isRequired=i.bind(null,!0),s}t.exports=e.default})(Av,Av.exports);var dM=Av.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=dM,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}function s(){for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];function u(){for(var d=arguments.length,h=Array(d),f=0;f<d;f++)h[f]=arguments[f];var g=null;return a.forEach(function(_){if(g==null){var E=_.apply(void 0,h);E!=null&&(g=E)}}),g}return(0,r.default)(u)}t.exports=e.default})(zT,zT.exports);function Rv(){return Rv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rv.apply(this,arguments)}function ZA(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function qT(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function hM(t){var e=fM(t,"string");return typeof e=="symbol"?e:String(e)}function fM(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function pM(t,e,n){var r=x.useRef(t!==void 0),i=x.useState(e),s=i[0],o=i[1],a=t!==void 0,l=r.current;return r.current=a,!a&&l&&s!==e&&o(e),[a?t:s,x.useCallback(function(u){for(var d=arguments.length,h=new Array(d>1?d-1:0),f=1;f<d;f++)h[f-1]=arguments[f];n&&n.apply(void 0,[u].concat(h)),o(u)},[n])]}function eR(t,e){return Object.keys(e).reduce(function(n,r){var i,s=n,o=s[qT(r)],a=s[r],l=ZA(s,[qT(r),r].map(hM)),u=e[r],d=pM(a,o,t[u]),h=d[0],f=d[1];return Rv({},l,(i={},i[r]=h,i[u]=f,i))},t)}function Cv(t,e){return Cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Cv(t,e)}function mM(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Cv(t,e)}var gM=Function.prototype.bind.call(Function.prototype.call,[].slice);function _s(t,e){return gM(t.querySelectorAll(e))}function vM(){const[,t]=x.useReducer(e=>!e,!1);return t}const GT=t=>!t||typeof t=="function"?t:e=>{t.current=e};function yM(t,e){const n=GT(t),r=GT(e);return i=>{n&&n(i),r&&r(i)}}function Tc(t,e){return x.useMemo(()=>yM(t,e),[t,e])}const R_=x.createContext(null);R_.displayName="NavContext";const _M=x.createContext(null),C_=(t,e=null)=>t!=null?String(t):e||null,Fh=_M,tR=x.createContext(null),wM="data-rr-ui-",EM="rrUi";function jf(t){return`${wM}${t}`}function IM(t){return`${EM}${t}`}function TM(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t},[t]),e}function Nn(t){const e=TM(t);return x.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const SM=["as","disabled"];function PM(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function bM(t){return!t||t.trim()==="#"}function nR({tagName:t,disabled:e,href:n,target:r,rel:i,role:s,onClick:o,tabIndex:a=0,type:l}){t||(n!=null||r!=null||i!=null?t="a":t="button");const u={tagName:t};if(t==="button")return[{type:l||"button",disabled:e},u];const d=f=>{if((e||t==="a"&&bM(n))&&f.preventDefault(),e){f.stopPropagation();return}o==null||o(f)},h=f=>{f.key===" "&&(f.preventDefault(),d(f))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:a,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?i:void 0,onClick:d,onKeyDown:h},u]}const rR=x.forwardRef((t,e)=>{let{as:n,disabled:r}=t,i=PM(t,SM);const[s,{tagName:o}]=nR(Object.assign({tagName:n,disabled:r},i));return M.jsx(o,Object.assign({},i,s,{ref:e}))});rR.displayName="Button";const AM=["as","active","eventKey"];function RM(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function iR({key:t,onClick:e,active:n,id:r,role:i,disabled:s}){const o=x.useContext(Fh),a=x.useContext(R_),l=x.useContext(tR);let u=n;const d={role:i};if(a){!i&&a.role==="tablist"&&(d.role="tab");const h=a.getControllerId(t??null),f=a.getControlledId(t??null);d[jf("event-key")]=t,d.id=h||r,u=n==null&&t!=null?a.activeKey===t:n,(u||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(d["aria-controls"]=f)}return d.role==="tab"&&(d["aria-selected"]=u,u||(d.tabIndex=-1),s&&(d.tabIndex=-1,d["aria-disabled"]=!0)),d.onClick=Nn(h=>{s||(e==null||e(h),t!=null&&o&&!h.isPropagationStopped()&&o(t,h))}),[d,{isActive:u}]}const sR=x.forwardRef((t,e)=>{let{as:n=rR,active:r,eventKey:i}=t,s=RM(t,AM);const[o,a]=iR(Object.assign({key:C_(i,s.href),active:r},s));return o[jf("active")]=a.isActive,M.jsx(n,Object.assign({},s,o,{ref:e}))});sR.displayName="NavItem";const CM=sR,xM=["as","onSelect","activeKey","role","onKeyDown"];function kM(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const WT=()=>{},HT=jf("event-key"),oR=x.forwardRef((t,e)=>{let{as:n="div",onSelect:r,activeKey:i,role:s,onKeyDown:o}=t,a=kM(t,xM);const l=vM(),u=x.useRef(!1),d=x.useContext(Fh),h=x.useContext(tR);let f,g;h&&(s=s||"tablist",i=h.activeKey,f=h.getControlledId,g=h.getControllerId);const _=x.useRef(null),E=w=>{const C=_.current;if(!C)return null;const O=_s(C,`[${HT}]:not([aria-disabled=true])`),D=C.querySelector("[aria-selected=true]");if(!D||D!==document.activeElement)return null;const A=O.indexOf(D);if(A===-1)return null;let I=A+w;return I>=O.length&&(I=0),I<0&&(I=O.length-1),O[I]},T=(w,C)=>{w!=null&&(r==null||r(w,C),d==null||d(w,C))},m=w=>{if(o==null||o(w),!h)return;let C;switch(w.key){case"ArrowLeft":case"ArrowUp":C=E(-1);break;case"ArrowRight":case"ArrowDown":C=E(1);break;default:return}C&&(w.preventDefault(),T(C.dataset[IM("EventKey")]||null,w),u.current=!0,l())};x.useEffect(()=>{if(_.current&&u.current){const w=_.current.querySelector(`[${HT}][aria-selected=true]`);w==null||w.focus()}u.current=!1});const v=Tc(e,_);return M.jsx(Fh.Provider,{value:T,children:M.jsx(R_.Provider,{value:{role:s,activeKey:C_(i),getControlledId:f||WT,getControllerId:g||WT},children:M.jsx(n,Object.assign({},a,{onKeyDown:m,ref:v,role:s}))})})});oR.displayName="Nav";const NM=Object.assign(oR,{Item:CM}),ho=x.createContext(null);ho.displayName="NavbarContext";const aR=x.createContext(null);aR.displayName="CardHeaderContext";const lR=x.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=mn(e,"nav-item"),M.jsx(n,{ref:i,className:_t(t,e),...r})));lR.displayName="NavItem";function OM(){const t=x.useRef(!0),e=x.useRef(()=>t.current);return x.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function DM(t){const e=x.useRef(null);return x.useEffect(()=>{e.current=t}),e.current}const LM=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",MM=typeof document<"u",xv=MM||LM?x.useLayoutEffect:x.useEffect,VM=["onKeyDown"];function FM(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function UM(t){return!t||t.trim()==="#"}const uR=x.forwardRef((t,e)=>{let{onKeyDown:n}=t,r=FM(t,VM);const[i]=nR(Object.assign({tagName:"a"},r)),s=Nn(o=>{i.onKeyDown(o),n==null||n(o)});return UM(r.href)||r.role==="button"?M.jsx("a",Object.assign({ref:e},r,i,{onKeyDown:s})):M.jsx("a",Object.assign({ref:e},r,{onKeyDown:n}))});uR.displayName="Anchor";const cR=x.forwardRef(({bsPrefix:t,className:e,as:n=uR,active:r,eventKey:i,disabled:s=!1,...o},a)=>{t=mn(t,"nav-link");const[l,u]=iR({key:C_(i,o.href),active:r,disabled:s,...o});return M.jsx(n,{...o,...l,ref:a,disabled:s,className:_t(e,t,s&&"disabled",u.isActive&&"active")})});cR.displayName="NavLink";const dR=x.forwardRef((t,e)=>{const{as:n="div",bsPrefix:r,variant:i,fill:s=!1,justify:o=!1,navbar:a,navbarScroll:l,className:u,activeKey:d,...h}=eR(t,{activeKey:"onSelect"}),f=mn(r,"nav");let g,_,E=!1;const T=x.useContext(ho),m=x.useContext(aR);return T?(g=T.bsPrefix,E=a??!0):m&&({cardHeaderBsPrefix:_}=m),M.jsx(NM,{as:n,ref:e,activeKey:d,className:_t(u,{[f]:!E,[`${g}-nav`]:E,[`${g}-nav-scroll`]:E&&l,[`${_}-${i}`]:!!_,[`${f}-${i}`]:!!i,[`${f}-fill`]:s,[`${f}-justified`]:o}),...h})});dR.displayName="Nav";const Rr=Object.assign(dR,{Item:lR,Link:cR}),hR=x.forwardRef(({bsPrefix:t,className:e,as:n,...r},i)=>{t=mn(t,"navbar-brand");const s=n||(r.href?"a":"span");return M.jsx(s,{...r,ref:i,className:_t(e,t)})});hR.displayName="NavbarBrand";function x_(t){return t&&t.ownerDocument||document}function $M(t){var e=x_(t);return e&&e.defaultView||window}function BM(t,e){return $M(t).getComputedStyle(t,e)}var jM=/([A-Z])/g;function zM(t){return t.replace(jM,"-$1").toLowerCase()}var qM=/^ms-/;function Sd(t){return zM(t).replace(qM,"-ms-")}var GM=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function WM(t){return!!(t&&GM.test(t))}function Ur(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(Sd(e))||BM(t).getPropertyValue(Sd(e));Object.keys(e).forEach(function(i){var s=e[i];!s&&s!==0?t.style.removeProperty(Sd(i)):WM(i)?r+=i+"("+s+") ":n+=Sd(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}var fR={exports:{}},HM="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",KM=HM,QM=KM;function pR(){}function mR(){}mR.resetWarningCache=pR;var YM=function(){function t(r,i,s,o,a,l){if(l!==QM){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:mR,resetWarningCache:pR};return n.PropTypes=n,n};fR.exports=YM();var XM=fR.exports;const Hm=Pf(XM),KT={disabled:!1},gR=ve.createContext(null);var JM=function(e){return e.scrollTop},Hl="unmounted",vi="exited",Qn="entering",Nr="entered",ju="exiting",Xr=function(t){mM(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=vi,s.appearStatus=Qn):l=Nr:r.unmountOnExit||r.mountOnEnter?l=Hl:l=vi,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Hl?{status:vi}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Qn&&o!==Nr&&(s=Qn):(o===Qn||o===Nr)&&(s=ju)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Qn){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Zo.findDOMNode(this);o&&JM(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===vi&&this.setState({status:Hl})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Zo.findDOMNode(this),a],u=l[0],d=l[1],h=this.getTimeouts(),f=a?h.appear:h.enter;if(!i&&!o||KT.disabled){this.safeSetState({status:Nr},function(){s.props.onEntered(u)});return}this.props.onEnter(u,d),this.safeSetState({status:Qn},function(){s.props.onEntering(u,d),s.onTransitionEnd(f,function(){s.safeSetState({status:Nr},function(){s.props.onEntered(u,d)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Zo.findDOMNode(this);if(!s||KT.disabled){this.safeSetState({status:vi},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:ju},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:vi},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Zo.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],d=l[1];this.props.addEndListener(u,d)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Hl)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=ZA(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ve.createElement(gR.Provider,{value:null},typeof o=="function"?o(i,a):ve.cloneElement(ve.Children.only(o),a))},e}(ve.Component);Xr.contextType=gR;Xr.propTypes={};function Ao(){}Xr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ao,onEntering:Ao,onEntered:Ao,onExit:Ao,onExiting:Ao,onExited:Ao};Xr.UNMOUNTED=Hl;Xr.EXITED=vi;Xr.ENTERING=Qn;Xr.ENTERED=Nr;Xr.EXITING=ju;const zf=!!(typeof window<"u"&&window.document&&window.document.createElement);var kv=!1,Nv=!1;try{var Km={get passive(){return kv=!0},get once(){return Nv=kv=!0}};zf&&(window.addEventListener("test",Km,Km),window.removeEventListener("test",Km,!0))}catch{}function ZM(t,e,n,r){if(r&&typeof r!="boolean"&&!Nv){var i=r.once,s=r.capture,o=n;!Nv&&i&&(o=n.__once||function a(l){this.removeEventListener(e,a,s),n.call(this,l)},n.__once=o),t.addEventListener(e,o,kv?r:s)}t.addEventListener(e,n,r)}function eV(t,e,n,r){var i=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)}function Uh(t,e,n,r){return ZM(t,e,n,r),function(){eV(t,e,n,r)}}function tV(t,e,n,r){if(r===void 0&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}function nV(t){var e=Ur(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function rV(t,e,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||tV(t,"transitionend",!0)},e+n),s=Uh(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function iV(t,e,n,r){n==null&&(n=nV(t)||0);var i=rV(t,n,r),s=Uh(t,"transitionend",e);return function(){i(),s()}}function QT(t,e){const n=Ur(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function k_(t,e){const n=QT(t,"transitionDuration"),r=QT(t,"transitionDelay"),i=iV(t,s=>{s.target===t&&(i(),e(s))},n+r)}function Nl(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...i){e.apply(this,i),n.apply(this,i)}},null)}function vR(t){t.offsetHeight}function sV(t){return t&&"setState"in t?Zo.findDOMNode(t):t??null}const N_=ve.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:o,children:a,childRef:l,...u},d)=>{const h=x.useRef(null),f=Tc(h,l),g=D=>{f(sV(D))},_=D=>A=>{D&&h.current&&D(h.current,A)},E=x.useCallback(_(t),[t]),T=x.useCallback(_(e),[e]),m=x.useCallback(_(n),[n]),v=x.useCallback(_(r),[r]),w=x.useCallback(_(i),[i]),C=x.useCallback(_(s),[s]),O=x.useCallback(_(o),[o]);return M.jsx(Xr,{ref:d,...u,onEnter:E,onEntered:m,onEntering:T,onExit:v,onExited:C,onExiting:w,addEndListener:O,nodeRef:h,children:typeof a=="function"?(D,A)=>a(D,{...A,ref:g}):ve.cloneElement(a,{ref:g})})}),oV={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function aV(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,r=e[n],i=oV[t];return r+parseInt(Ur(e,i[0]),10)+parseInt(Ur(e,i[1]),10)}const lV={[vi]:"collapse",[ju]:"collapsing",[Qn]:"collapsing",[Nr]:"collapse show"},uV=ve.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,className:s,children:o,dimension:a="height",in:l=!1,timeout:u=300,mountOnEnter:d=!1,unmountOnExit:h=!1,appear:f=!1,getDimensionValue:g=aV,..._},E)=>{const T=typeof a=="function"?a():a,m=x.useMemo(()=>Nl(D=>{D.style[T]="0"},t),[T,t]),v=x.useMemo(()=>Nl(D=>{const A=`scroll${T[0].toUpperCase()}${T.slice(1)}`;D.style[T]=`${D[A]}px`},e),[T,e]),w=x.useMemo(()=>Nl(D=>{D.style[T]=null},n),[T,n]),C=x.useMemo(()=>Nl(D=>{D.style[T]=`${g(T,D)}px`,vR(D)},r),[r,g,T]),O=x.useMemo(()=>Nl(D=>{D.style[T]=null},i),[T,i]);return M.jsx(N_,{ref:E,addEndListener:k_,..._,"aria-expanded":_.role?l:null,onEnter:m,onEntering:v,onEntered:w,onExit:C,onExiting:O,childRef:o.ref,in:l,timeout:u,mountOnEnter:d,unmountOnExit:h,appear:f,children:(D,A)=>ve.cloneElement(o,{...A,className:_t(s,o.props.className,lV[D],T==="width"&&"collapse-horizontal")})})}),yR=x.forwardRef(({children:t,bsPrefix:e,...n},r)=>{e=mn(e,"navbar-collapse");const i=x.useContext(ho);return M.jsx(uV,{in:!!(i&&i.expanded),...n,children:M.jsx("div",{ref:r,className:e,children:t})})});yR.displayName="NavbarCollapse";const _R=x.forwardRef(({bsPrefix:t,className:e,children:n,label:r="Toggle navigation",as:i="button",onClick:s,...o},a)=>{t=mn(t,"navbar-toggler");const{onToggle:l,expanded:u}=x.useContext(ho)||{},d=Nn(h=>{s&&s(h),l&&l()});return i==="button"&&(o.type="button"),M.jsx(i,{...o,ref:a,onClick:d,"aria-label":r,className:_t(e,t,!u&&"collapsed"),children:n||M.jsx("span",{className:`${t}-icon`})})});_R.displayName="NavbarToggle";const Ov=new WeakMap,YT=(t,e)=>{if(!t||!e)return;const n=Ov.get(e)||new Map;Ov.set(e,n);let r=n.get(t);return r||(r=e.matchMedia(t),r.refCount=0,n.set(r.media,r)),r};function cV(t,e=typeof window>"u"?void 0:window){const n=YT(t,e),[r,i]=x.useState(()=>n?n.matches:!1);return xv(()=>{let s=YT(t,e);if(!s)return i(!1);let o=Ov.get(e);const a=()=>{i(s.matches)};return s.refCount++,s.addListener(a),a(),()=>{s.removeListener(a),s.refCount--,s.refCount<=0&&(o==null||o.delete(s.media)),s=void 0}},[t]),r}function dV(t){const e=Object.keys(t);function n(a,l){return a===l?l:a?`${a} and ${l}`:l}function r(a){return e[Math.min(e.indexOf(a)+1,e.length-1)]}function i(a){const l=r(a);let u=t[l];return typeof u=="number"?u=`${u-.2}px`:u=`calc(${u} - 0.2px)`,`(max-width: ${u})`}function s(a){let l=t[a];return typeof l=="number"&&(l=`${l}px`),`(min-width: ${l})`}function o(a,l,u){let d;typeof a=="object"?(d=a,u=l,l=!0):(l=l||!0,d={[a]:l});let h=x.useMemo(()=>Object.entries(d).reduce((f,[g,_])=>((_==="up"||_===!0)&&(f=n(f,s(g))),(_==="down"||_===!0)&&(f=n(f,i(g))),f),""),[JSON.stringify(d)]);return cV(h,u)}return o}const hV=dV({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function Qm(t){t===void 0&&(t=x_());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function XT(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}function fV(t){const e=x.useRef(t);return e.current=t,e}function pV(t){const e=fV(t);x.useEffect(()=>()=>e.current(),[])}function mV(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const JT=jf("modal-open");class O_{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return mV(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style={overflow:i.style.overflow,[r]:i.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(Ur(i,r)||"0",10)+e.scrollBarWidth}px`),i.setAttribute(JT,""),Ur(i,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(JT),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const wR=x.createContext(zf?window:void 0);wR.Provider;function D_(){return x.useContext(wR)}const Ym=(t,e)=>zf?t==null?(e||x_()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function gV(t,e){const n=D_(),[r,i]=x.useState(()=>Ym(t,n==null?void 0:n.document));if(!r){const s=Ym(t);s&&i(s)}return x.useEffect(()=>{},[e,r]),x.useEffect(()=>{const s=Ym(t);s!==r&&i(s)},[t,r]),r}function vV({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:i}){const s=x.useRef(null),o=x.useRef(e),a=Nn(n);x.useEffect(()=>{e?o.current=!0:a(s.current)},[e,a]);const l=Tc(s,t.ref),u=x.cloneElement(t,{ref:l});return e?u:i||!o.current&&r?null:u}function yV(t){return t.code==="Escape"||t.keyCode===27}function _V(){const t=x.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}const wV=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function EV(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function IV(t){let{onEnter:e,onEntering:n,onEntered:r,onExit:i,onExiting:s,onExited:o,addEndListener:a,children:l}=t,u=EV(t,wV);const{major:d}=_V(),h=d>=19?l.props.ref:l.ref,f=x.useRef(null),g=Tc(f,typeof l=="function"?null:h),_=D=>A=>{D&&f.current&&D(f.current,A)},E=x.useCallback(_(e),[e]),T=x.useCallback(_(n),[n]),m=x.useCallback(_(r),[r]),v=x.useCallback(_(i),[i]),w=x.useCallback(_(s),[s]),C=x.useCallback(_(o),[o]),O=x.useCallback(_(a),[a]);return Object.assign({},u,{nodeRef:f},e&&{onEnter:E},n&&{onEntering:T},r&&{onEntered:m},i&&{onExit:v},s&&{onExiting:w},o&&{onExited:C},a&&{addEndListener:O},{children:typeof l=="function"?(D,A)=>l(D,Object.assign({},A,{ref:g})):x.cloneElement(l,{ref:g})})}const TV=["component"];function SV(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const PV=x.forwardRef((t,e)=>{let{component:n}=t,r=SV(t,TV);const i=IV(r);return M.jsx(n,Object.assign({ref:e},i))});function bV({in:t,onTransition:e}){const n=x.useRef(null),r=x.useRef(!0),i=Nn(e);return xv(()=>{if(!n.current)return;let s=!1;return i({in:t,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[t,i]),xv(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function AV({children:t,in:e,onExited:n,onEntered:r,transition:i}){const[s,o]=x.useState(!e);e&&s&&o(!1);const a=bV({in:!!e,onTransition:u=>{const d=()=>{u.isStale()||(u.in?r==null||r(u.element,u.initial):(o(!0),n==null||n(u.element)))};Promise.resolve(i(u)).then(d,h=>{throw u.in||o(!0),h})}}),l=Tc(a,t.ref);return s&&!e?null:x.cloneElement(t,{ref:l})}function ZT(t,e,n){return t?M.jsx(PV,Object.assign({},n,{component:t})):e?M.jsx(AV,Object.assign({},n,{transition:e})):M.jsx(vV,Object.assign({},n))}const RV=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function CV(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let Xm;function xV(t){return Xm||(Xm=new O_({ownerDocument:t==null?void 0:t.document})),Xm}function kV(t){const e=D_(),n=t||xV(e),r=x.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:x.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:x.useCallback(i=>{r.current.backdrop=i},[])})}const ER=x.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:i,style:s,children:o,backdrop:a=!0,keyboard:l=!0,onBackdropClick:u,onEscapeKeyDown:d,transition:h,runTransition:f,backdropTransition:g,runBackdropTransition:_,autoFocus:E=!0,enforceFocus:T=!0,restoreFocus:m=!0,restoreFocusOptions:v,renderDialog:w,renderBackdrop:C=Ce=>M.jsx("div",Object.assign({},Ce)),manager:O,container:D,onShow:A,onHide:I=()=>{},onExit:P,onExited:S,onExiting:k,onEnter:N,onEntering:R,onEntered:Z}=t,ie=CV(t,RV);const Se=D_(),Be=gV(D),$=kV(O),H=OM(),Q=DM(n),[oe,ae]=x.useState(!n),Ee=x.useRef(null);x.useImperativeHandle(e,()=>$,[$]),zf&&!Q&&n&&(Ee.current=Qm(Se==null?void 0:Se.document)),n&&oe&&ae(!1);const $t=Nn(()=>{if($.add(),ii.current=Uh(document,"keydown",tm),al.current=Uh(document,"focus",()=>setTimeout(Bt),!0),A&&A(),E){var Ce,ll;const ul=Qm((Ce=(ll=$.dialog)==null?void 0:ll.ownerDocument)!=null?Ce:Se==null?void 0:Se.document);$.dialog&&ul&&!XT($.dialog,ul)&&(Ee.current=ul,$.dialog.focus())}}),Le=Nn(()=>{if($.remove(),ii.current==null||ii.current(),al.current==null||al.current(),m){var Ce;(Ce=Ee.current)==null||Ce.focus==null||Ce.focus(v),Ee.current=null}});x.useEffect(()=>{!n||!Be||$t()},[n,Be,$t]),x.useEffect(()=>{oe&&Le()},[oe,Le]),pV(()=>{Le()});const Bt=Nn(()=>{if(!T||!H()||!$.isTopModal())return;const Ce=Qm(Se==null?void 0:Se.document);$.dialog&&Ce&&!XT($.dialog,Ce)&&$.dialog.focus()}),zn=Nn(Ce=>{Ce.target===Ce.currentTarget&&(u==null||u(Ce),a===!0&&I())}),tm=Nn(Ce=>{l&&yV(Ce)&&$.isTopModal()&&(d==null||d(Ce),Ce.defaultPrevented||I())}),al=x.useRef(),ii=x.useRef(),wo=(...Ce)=>{ae(!0),S==null||S(...Ce)};if(!Be)return null;const Eo=Object.assign({role:r,ref:$.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},ie,{style:s,className:i,tabIndex:-1});let ds=w?w(Eo):M.jsx("div",Object.assign({},Eo,{children:x.cloneElement(o,{role:"document"})}));ds=ZT(h,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:P,onExiting:k,onExited:wo,onEnter:N,onEntering:R,onEntered:Z,children:ds});let si=null;return a&&(si=C({ref:$.setBackdropRef,onClick:zn}),si=ZT(g,_,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:si})),M.jsx(M.Fragment,{children:Zo.createPortal(M.jsxs(M.Fragment,{children:[si,ds]}),Be)})});ER.displayName="Modal";const NV=Object.assign(ER,{Manager:O_}),OV={[Qn]:"show",[Nr]:"show"},IR=x.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...i},s)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},a=x.useCallback((l,u)=>{vR(l),r==null||r(l,u)},[r]);return M.jsx(N_,{ref:s,addEndListener:k_,...o,onEnter:a,childRef:e.ref,children:(l,u)=>x.cloneElement(e,{...u,className:_t("fade",t,e.props.className,OV[l],n[l])})})});IR.displayName="Fade";const TR=x.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=mn(e,"offcanvas-body"),M.jsx(n,{ref:i,className:_t(t,e),...r})));TR.displayName="OffcanvasBody";const DV={[Qn]:"show",[Nr]:"show"},SR=x.forwardRef(({bsPrefix:t,className:e,children:n,in:r=!1,mountOnEnter:i=!1,unmountOnExit:s=!1,appear:o=!1,...a},l)=>(t=mn(t,"offcanvas"),M.jsx(N_,{ref:l,addEndListener:k_,in:r,mountOnEnter:i,unmountOnExit:s,appear:o,...a,childRef:n.ref,children:(u,d)=>x.cloneElement(n,{...d,className:_t(e,n.props.className,(u===Qn||u===ju)&&`${t}-toggling`,DV[u])})})));SR.displayName="OffcanvasToggling";const PR=x.createContext({onHide(){}}),LV={"aria-label":Hm.string,onClick:Hm.func,variant:Hm.oneOf(["white"])},L_=x.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},i)=>M.jsx("button",{ref:i,type:"button",className:_t("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));L_.displayName="CloseButton";L_.propTypes=LV;const MV=x.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:i,...s},o)=>{const a=x.useContext(PR),l=Nn(()=>{a==null||a.onHide(),r==null||r()});return M.jsxs("div",{ref:o,...s,children:[i,n&&M.jsx(L_,{"aria-label":t,variant:e,onClick:l})]})}),bR=x.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=mn(t,"offcanvas-header"),M.jsx(MV,{ref:s,...i,className:_t(e,t),closeLabel:n,closeButton:r})));bR.displayName="OffcanvasHeader";const VV=t=>x.forwardRef((e,n)=>M.jsx("div",{...e,ref:n,className:_t(e.className,t)})),FV=VV("h5"),AR=x.forwardRef(({className:t,bsPrefix:e,as:n=FV,...r},i)=>(e=mn(e,"offcanvas-title"),M.jsx(n,{ref:i,className:_t(t,e),...r})));AR.displayName="OffcanvasTitle";function UV(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function $V(t,e){t.classList?t.classList.add(e):UV(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function e0(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function BV(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=e0(t.className,e):t.setAttribute("class",e0(t.className&&t.className.baseVal||"",e))}const Ro={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class RR extends O_{adjustAndStore(e,n,r){const i=n.style[e];n.dataset[e]=i,Ur(n,{[e]:`${parseFloat(Ur(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],Ur(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if($V(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";_s(n,Ro.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth)),_s(n,Ro.STICKY_CONTENT).forEach(s=>this.adjustAndStore(i,s,-e.scrollBarWidth)),_s(n,Ro.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();BV(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";_s(n,Ro.FIXED_CONTENT).forEach(s=>this.restore(r,s)),_s(n,Ro.STICKY_CONTENT).forEach(s=>this.restore(i,s)),_s(n,Ro.NAVBAR_TOGGLER).forEach(s=>this.restore(i,s))}}let Jm;function jV(t){return Jm||(Jm=new RR(t)),Jm}function zV(t){return M.jsx(SR,{...t})}function qV(t){return M.jsx(IR,{...t})}const CR=x.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":r,placement:i="start",responsive:s,show:o=!1,backdrop:a=!0,keyboard:l=!0,scroll:u=!1,onEscapeKeyDown:d,onShow:h,onHide:f,container:g,autoFocus:_=!0,enforceFocus:E=!0,restoreFocus:T=!0,restoreFocusOptions:m,onEntered:v,onExit:w,onExiting:C,onEnter:O,onEntering:D,onExited:A,backdropClassName:I,manager:P,renderStaticNode:S=!1,...k},N)=>{const R=x.useRef();t=mn(t,"offcanvas");const{onToggle:Z}=x.useContext(ho)||{},[ie,Se]=x.useState(!1),Be=hV(s||"xs","up");x.useEffect(()=>{Se(s?o&&!Be:o)},[o,s,Be]);const $=Nn(()=>{Z==null||Z(),f==null||f()}),H=x.useMemo(()=>({onHide:$}),[$]);function Q(){return P||(u?(R.current||(R.current=new RR({handleContainerOverflow:!1})),R.current):jV())}const oe=(Le,...Bt)=>{Le&&(Le.style.visibility="visible"),O==null||O(Le,...Bt)},ae=(Le,...Bt)=>{Le&&(Le.style.visibility=""),A==null||A(...Bt)},Ee=x.useCallback(Le=>M.jsx("div",{...Le,className:_t(`${t}-backdrop`,I)}),[I,t]),$t=Le=>M.jsx("div",{...Le,...k,className:_t(e,s?`${t}-${s}`:t,`${t}-${i}`),"aria-labelledby":r,children:n});return M.jsxs(M.Fragment,{children:[!ie&&(s||S)&&$t({}),M.jsx(PR.Provider,{value:H,children:M.jsx(NV,{show:ie,ref:N,backdrop:a,container:g,keyboard:l,autoFocus:_,enforceFocus:E&&!u,restoreFocus:T,restoreFocusOptions:m,onEscapeKeyDown:d,onShow:h,onHide:$,onEnter:oe,onEntering:D,onEntered:v,onExit:w,onExiting:C,onExited:ae,manager:Q(),transition:zV,backdropTransition:qV,renderBackdrop:Ee,renderDialog:$t})})]})});CR.displayName="Offcanvas";const GV=Object.assign(CR,{Body:TR,Header:bR,Title:AR}),xR=x.forwardRef((t,e)=>{const n=x.useContext(ho);return M.jsx(GV,{ref:e,show:!!(n!=null&&n.expanded),...t,renderStaticNode:!0})});xR.displayName="NavbarOffcanvas";const kR=x.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},i)=>(e=mn(e,"navbar-text"),M.jsx(n,{ref:i,className:_t(t,e),...r})));kR.displayName="NavbarText";const NR=x.forwardRef((t,e)=>{const{bsPrefix:n,expand:r=!0,variant:i="light",bg:s,fixed:o,sticky:a,className:l,as:u="nav",expanded:d,onToggle:h,onSelect:f,collapseOnSelect:g=!1,..._}=eR(t,{expanded:"onToggle"}),E=mn(n,"navbar"),T=x.useCallback((...w)=>{f==null||f(...w),g&&d&&(h==null||h(!1))},[f,g,d,h]);_.role===void 0&&u!=="nav"&&(_.role="navigation");let m=`${E}-expand`;typeof r=="string"&&(m=`${m}-${r}`);const v=x.useMemo(()=>({onToggle:()=>h==null?void 0:h(!d),bsPrefix:E,expanded:!!d,expand:r}),[E,d,r,h]);return M.jsx(ho.Provider,{value:v,children:M.jsx(Fh.Provider,{value:T,children:M.jsx(u,{ref:e,..._,className:_t(l,E,r&&m,i&&`${E}-${i}`,s&&`bg-${s}`,a&&`sticky-${a}`,o&&`fixed-${o}`)})})})});NR.displayName="Navbar";const t0=Object.assign(NR,{Brand:hR,Collapse:yR,Offcanvas:xR,Text:kR,Toggle:_R});/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zu(){return zu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zu.apply(this,arguments)}var Pi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Pi||(Pi={}));const n0="popstate";function WV(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Dv("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:DR(i)}return KV(e,n,null,t)}function lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function OR(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HV(){return Math.random().toString(36).substr(2,8)}function r0(t,e){return{usr:t.state,key:t.key,idx:e}}function Dv(t,e,n,r){return n===void 0&&(n=null),zu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ga(e):e,{state:n,key:e&&e.key||r||HV()})}function DR(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ga(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function KV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Pi.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(zu({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Pi.Pop;let T=d(),m=T==null?null:T-u;u=T,l&&l({action:a,location:E.location,delta:m})}function f(T,m){a=Pi.Push;let v=Dv(E.location,T,m);u=d()+1;let w=r0(v,u),C=E.createHref(v);try{o.pushState(w,"",C)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(C)}s&&l&&l({action:a,location:E.location,delta:1})}function g(T,m){a=Pi.Replace;let v=Dv(E.location,T,m);u=d();let w=r0(v,u),C=E.createHref(v);o.replaceState(w,"",C),s&&l&&l({action:a,location:E.location,delta:0})}function _(T){let m=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof T=="string"?T:DR(T);return v=v.replace(/ $/,"%20"),lt(m,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,m)}let E={get action(){return a},get location(){return t(i,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(n0,h),l=T,()=>{i.removeEventListener(n0,h),l=null}},createHref(T){return e(i,T)},createURL:_,encodeLocation(T){let m=_(T);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:g,go(T){return o.go(T)}};return E}var i0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(i0||(i0={}));function QV(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Ga(e):e,i=VR(r.pathname||"/",n);if(i==null)return null;let s=LR(t);YV(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=lF(i);o=sF(s[a],l)}return o}function LR(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(lt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Vs([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(lt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),LR(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:rF(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of MR(s.path))i(s,o,l)}),e}function MR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=MR(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function YV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iF(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const XV=/^:[\w-]+$/,JV=3,ZV=2,eF=1,tF=10,nF=-2,s0=t=>t==="*";function rF(t,e){let n=t.split("/"),r=n.length;return n.some(s0)&&(r+=nF),e&&(r+=ZV),n.filter(i=>!s0(i)).reduce((i,s)=>i+(XV.test(s)?JV:s===""?eF:tF),r)}function iF(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function sF(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=oF({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!d)return null;Object.assign(r,d.params);let h=a.route;s.push({params:r,pathname:Vs([i,d.pathname]),pathnameBase:pF(Vs([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Vs([i,d.pathnameBase]))}return s}function oF(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aF(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:g}=d;if(f==="*"){let E=a[h]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const _=a[h];return g&&!_?u[f]=void 0:u[f]=(_||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function aF(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),OR(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return OR(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function VR(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function uF(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ga(t):t;return{pathname:n?n.startsWith("/")?n:cF(n,e):e,search:mF(r),hash:gF(i)}}function cF(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Zm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hF(t,e){let n=dF(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function fF(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ga(t):(i=zu({},t),lt(!i.pathname||!i.pathname.includes("?"),Zm("?","pathname","search",i)),lt(!i.pathname||!i.pathname.includes("#"),Zm("#","pathname","hash",i)),lt(!i.search||!i.search.includes("#"),Zm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=uF(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Vs=t=>t.join("/").replace(/\/\/+/g,"/"),pF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const FR=["post","put","patch","delete"];new Set(FR);const yF=["get",...FR];new Set(yF);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qu.apply(this,arguments)}const M_=x.createContext(null),_F=x.createContext(null),qf=x.createContext(null),Gf=x.createContext(null),fo=x.createContext({outlet:null,matches:[],isDataRoute:!1}),UR=x.createContext(null);function Wf(){return x.useContext(Gf)!=null}function $R(){return Wf()||lt(!1),x.useContext(Gf).location}function BR(t){x.useContext(qf).static||x.useLayoutEffect(t)}function Wa(){let{isDataRoute:t}=x.useContext(fo);return t?OF():wF()}function wF(){Wf()||lt(!1);let t=x.useContext(M_),{basename:e,future:n,navigator:r}=x.useContext(qf),{matches:i}=x.useContext(fo),{pathname:s}=$R(),o=JSON.stringify(hF(i,n.v7_relativeSplatPath)),a=x.useRef(!1);return BR(()=>{a.current=!0}),x.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=fF(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Vs([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function EF(){let{matches:t}=x.useContext(fo),e=t[t.length-1];return e?e.params:{}}function IF(t,e){return TF(t,e)}function TF(t,e,n,r){Wf()||lt(!1);let{navigator:i}=x.useContext(qf),{matches:s}=x.useContext(fo),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=$R(),d;if(e){var h;let T=typeof e=="string"?Ga(e):e;l==="/"||(h=T.pathname)!=null&&h.startsWith(l)||lt(!1),d=T}else d=u;let f=d.pathname||"/",g=f;if(l!=="/"){let T=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=QV(t,{pathname:g}),E=RF(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:Vs([l,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:Vs([l,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),s,n,r);return e&&E?x.createElement(Gf.Provider,{value:{location:qu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Pi.Pop}},E):E}function SF(){let t=NF(),e=vF(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,null)}const PF=x.createElement(SF,null);class bF extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(fo.Provider,{value:this.props.routeContext},x.createElement(UR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AF(t){let{routeContext:e,match:n,children:r}=t,i=x.useContext(M_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(fo.Provider,{value:e},r)}function RF(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||lt(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:g}=n,_=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||_){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let g,_=!1,E=null,T=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,E=h.route.errorElement||PF,l&&(u<0&&f===0?(_=!0,T=null):u===f&&(_=!0,T=h.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),v=()=>{let w;return g?w=E:_?w=T:h.route.Component?w=x.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,x.createElement(AF,{match:h,routeContext:{outlet:d,matches:m,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?x.createElement(bF,{location:n.location,revalidation:n.revalidation,component:E,error:g,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}var jR=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jR||{}),$h=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($h||{});function CF(t){let e=x.useContext(M_);return e||lt(!1),e}function xF(t){let e=x.useContext(_F);return e||lt(!1),e}function kF(t){let e=x.useContext(fo);return e||lt(!1),e}function zR(t){let e=kF(),n=e.matches[e.matches.length-1];return n.route.id||lt(!1),n.route.id}function NF(){var t;let e=x.useContext(UR),n=xF($h.UseRouteError),r=zR($h.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function OF(){let{router:t}=CF(jR.UseNavigateStable),e=zR($h.UseNavigateStable),n=x.useRef(!1);return BR(()=>{n.current=!0}),x.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,qu({fromRouteId:e},s)))},[t,e])}function Lo(t){lt(!1)}function DF(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Pi.Pop,navigator:s,static:o=!1,future:a}=t;Wf()&&lt(!1);let l=e.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:l,navigator:s,static:o,future:qu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Ga(r));let{pathname:d="/",search:h="",hash:f="",state:g=null,key:_="default"}=r,E=x.useMemo(()=>{let T=VR(d,l);return T==null?null:{location:{pathname:T,search:h,hash:f,state:g,key:_},navigationType:i}},[l,d,h,f,g,_,i]);return E==null?null:x.createElement(qf.Provider,{value:u},x.createElement(Gf.Provider,{children:n,value:E}))}function LF(t){let{children:e,location:n}=t;return IF(Lv(e),n)}new Promise(()=>{});function Lv(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,i)=>{if(!x.isValidElement(r))return;let s=[...e,i];if(r.type===x.Fragment){n.push.apply(n,Lv(r.props.children,s));return}r.type!==Lo&&lt(!1),!r.props.index||!r.props.children||lt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Lv(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const MF="6";try{window.__reactRouterVersion=MF}catch{}const VF="startTransition",o0=YO[VF];function FF(t){let{basename:e,children:n,future:r,window:i}=t,s=x.useRef();s.current==null&&(s.current=WV({window:i,v5Compat:!0}));let o=s.current,[a,l]=x.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=x.useCallback(h=>{u&&o0?o0(()=>l(h)):l(h)},[l,u]);return x.useLayoutEffect(()=>o.listen(d),[o,d]),x.createElement(DF,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var a0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(a0||(a0={}));var l0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(l0||(l0={}));var qR={exports:{}},GR={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sa=x;function UF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $F=typeof Object.is=="function"?Object.is:UF,BF=Sa.useState,jF=Sa.useEffect,zF=Sa.useLayoutEffect,qF=Sa.useDebugValue;function GF(t,e){var n=e(),r=BF({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return zF(function(){i.value=n,i.getSnapshot=e,eg(i)&&s({inst:i})},[t,n,e]),jF(function(){return eg(i)&&s({inst:i}),t(function(){eg(i)&&s({inst:i})})},[t]),qF(n),n}function eg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$F(t,n)}catch{return!0}}function WF(t,e){return e()}var HF=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?WF:GF;GR.useSyncExternalStore=Sa.useSyncExternalStore!==void 0?Sa.useSyncExternalStore:HF;qR.exports=GR;var KF=qR.exports,WR={exports:{}},HR={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hf=x,QF=KF;function YF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var XF=typeof Object.is=="function"?Object.is:YF,JF=QF.useSyncExternalStore,ZF=Hf.useRef,eU=Hf.useEffect,tU=Hf.useMemo,nU=Hf.useDebugValue;HR.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=ZF(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=tU(function(){function l(g){if(!u){if(u=!0,d=g,g=r(g),i!==void 0&&o.hasValue){var _=o.value;if(i(_,g))return h=_}return h=g}if(_=h,XF(d,g))return _;var E=r(g);return i!==void 0&&i(_,E)?_:(d=g,h=E)}var u=!1,d,h,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=JF(t,s[0],s[1]);return eU(function(){o.hasValue=!0,o.value=a},[a]),nU(a),a};WR.exports=HR;var rU=WR.exports;function iU(t){t()}let KR=iU;const sU=t=>KR=t,oU=()=>KR,u0=Symbol.for("react-redux-context"),c0=typeof globalThis<"u"?globalThis:{};function aU(){var t;if(!x.createContext)return{};const e=(t=c0[u0])!=null?t:c0[u0]=new Map;let n=e.get(x.createContext);return n||(n=x.createContext(null),e.set(x.createContext,n)),n}const ji=aU();function V_(t=ji){return function(){return x.useContext(t)}}const QR=V_(),lU=()=>{throw new Error("uSES not initialized!")};let YR=lU;const uU=t=>{YR=t},cU=(t,e)=>t===e;function dU(t=ji){const e=t===ji?QR:V_(t);return function(r,i={}){const{equalityFn:s=cU,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:l,subscription:u,getServerState:d,stabilityCheck:h,noopCheck:f}=e();x.useRef(!0);const g=x.useCallback({[r.name](E){return r(E)}}[r.name],[r,h,o]),_=YR(u.addNestedSub,l.getState,d||l.getState,g,s);return x.useDebugValue(_),_}}const Kf=dU();var XR={exports:{}},we={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wt=typeof Symbol=="function"&&Symbol.for,F_=wt?Symbol.for("react.element"):60103,U_=wt?Symbol.for("react.portal"):60106,Qf=wt?Symbol.for("react.fragment"):60107,Yf=wt?Symbol.for("react.strict_mode"):60108,Xf=wt?Symbol.for("react.profiler"):60114,Jf=wt?Symbol.for("react.provider"):60109,Zf=wt?Symbol.for("react.context"):60110,$_=wt?Symbol.for("react.async_mode"):60111,ep=wt?Symbol.for("react.concurrent_mode"):60111,tp=wt?Symbol.for("react.forward_ref"):60112,np=wt?Symbol.for("react.suspense"):60113,hU=wt?Symbol.for("react.suspense_list"):60120,rp=wt?Symbol.for("react.memo"):60115,ip=wt?Symbol.for("react.lazy"):60116,fU=wt?Symbol.for("react.block"):60121,pU=wt?Symbol.for("react.fundamental"):60117,mU=wt?Symbol.for("react.responder"):60118,gU=wt?Symbol.for("react.scope"):60119;function Rn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case F_:switch(t=t.type,t){case $_:case ep:case Qf:case Xf:case Yf:case np:return t;default:switch(t=t&&t.$$typeof,t){case Zf:case tp:case ip:case rp:case Jf:return t;default:return e}}case U_:return e}}}function JR(t){return Rn(t)===ep}we.AsyncMode=$_;we.ConcurrentMode=ep;we.ContextConsumer=Zf;we.ContextProvider=Jf;we.Element=F_;we.ForwardRef=tp;we.Fragment=Qf;we.Lazy=ip;we.Memo=rp;we.Portal=U_;we.Profiler=Xf;we.StrictMode=Yf;we.Suspense=np;we.isAsyncMode=function(t){return JR(t)||Rn(t)===$_};we.isConcurrentMode=JR;we.isContextConsumer=function(t){return Rn(t)===Zf};we.isContextProvider=function(t){return Rn(t)===Jf};we.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===F_};we.isForwardRef=function(t){return Rn(t)===tp};we.isFragment=function(t){return Rn(t)===Qf};we.isLazy=function(t){return Rn(t)===ip};we.isMemo=function(t){return Rn(t)===rp};we.isPortal=function(t){return Rn(t)===U_};we.isProfiler=function(t){return Rn(t)===Xf};we.isStrictMode=function(t){return Rn(t)===Yf};we.isSuspense=function(t){return Rn(t)===np};we.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Qf||t===ep||t===Xf||t===Yf||t===np||t===hU||typeof t=="object"&&t!==null&&(t.$$typeof===ip||t.$$typeof===rp||t.$$typeof===Jf||t.$$typeof===Zf||t.$$typeof===tp||t.$$typeof===pU||t.$$typeof===mU||t.$$typeof===gU||t.$$typeof===fU)};we.typeOf=Rn;XR.exports=we;var vU=XR.exports,ZR=vU,yU={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},_U={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},eC={};eC[ZR.ForwardRef]=yU;eC[ZR.Memo]=_U;var Te={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_=Symbol.for("react.element"),j_=Symbol.for("react.portal"),sp=Symbol.for("react.fragment"),op=Symbol.for("react.strict_mode"),ap=Symbol.for("react.profiler"),lp=Symbol.for("react.provider"),up=Symbol.for("react.context"),wU=Symbol.for("react.server_context"),cp=Symbol.for("react.forward_ref"),dp=Symbol.for("react.suspense"),hp=Symbol.for("react.suspense_list"),fp=Symbol.for("react.memo"),pp=Symbol.for("react.lazy"),EU=Symbol.for("react.offscreen"),tC;tC=Symbol.for("react.module.reference");function Bn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case B_:switch(t=t.type,t){case sp:case ap:case op:case dp:case hp:return t;default:switch(t=t&&t.$$typeof,t){case wU:case up:case cp:case pp:case fp:case lp:return t;default:return e}}case j_:return e}}}Te.ContextConsumer=up;Te.ContextProvider=lp;Te.Element=B_;Te.ForwardRef=cp;Te.Fragment=sp;Te.Lazy=pp;Te.Memo=fp;Te.Portal=j_;Te.Profiler=ap;Te.StrictMode=op;Te.Suspense=dp;Te.SuspenseList=hp;Te.isAsyncMode=function(){return!1};Te.isConcurrentMode=function(){return!1};Te.isContextConsumer=function(t){return Bn(t)===up};Te.isContextProvider=function(t){return Bn(t)===lp};Te.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===B_};Te.isForwardRef=function(t){return Bn(t)===cp};Te.isFragment=function(t){return Bn(t)===sp};Te.isLazy=function(t){return Bn(t)===pp};Te.isMemo=function(t){return Bn(t)===fp};Te.isPortal=function(t){return Bn(t)===j_};Te.isProfiler=function(t){return Bn(t)===ap};Te.isStrictMode=function(t){return Bn(t)===op};Te.isSuspense=function(t){return Bn(t)===dp};Te.isSuspenseList=function(t){return Bn(t)===hp};Te.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===sp||t===ap||t===op||t===dp||t===hp||t===EU||typeof t=="object"&&t!==null&&(t.$$typeof===pp||t.$$typeof===fp||t.$$typeof===lp||t.$$typeof===up||t.$$typeof===cp||t.$$typeof===tC||t.getModuleId!==void 0)};Te.typeOf=Bn;function IU(){const t=oU();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const d0={notify(){},get:()=>[]};function TU(t,e){let n,r=d0,i=0,s=!1;function o(E){d();const T=r.subscribe(E);let m=!1;return()=>{m||(m=!0,T(),h())}}function a(){r.notify()}function l(){_.onStateChange&&_.onStateChange()}function u(){return s}function d(){i++,n||(n=t.subscribe(l),r=IU())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=d0)}function f(){s||(s=!0,d())}function g(){s&&(s=!1,h())}const _={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:f,tryUnsubscribe:g,getListeners:()=>r};return _}const SU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PU=SU?x.useLayoutEffect:x.useEffect;function bU({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=x.useMemo(()=>{const u=TU(t);return{store:t,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[t,r,i,s]),a=x.useMemo(()=>t.getState(),[t]);PU(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==t.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,a]);const l=e||ji;return x.createElement(l.Provider,{value:o},n)}function nC(t=ji){const e=t===ji?QR:V_(t);return function(){const{store:r}=e();return r}}const AU=nC();function RU(t=ji){const e=t===ji?AU:nC(t);return function(){return e().dispatch}}const mp=RU();uU(rU.useSyncExternalStoreWithSelector);sU(A_.unstable_batchedUpdates);function Yn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function zi(t){return!!t&&!!t[Me]}function qi(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===VU}(t)||Array.isArray(t)||!!t[y0]||!!(!((e=t.constructor)===null||e===void 0)&&e[y0])||z_(t)||q_(t))}function Hs(t,e,n){n===void 0&&(n=!1),Ha(t)===0?(n?Object.keys:la)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,i){return e(i,r,t)})}function Ha(t){var e=t[Me];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:z_(t)?2:q_(t)?3:0}function aa(t,e){return Ha(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function CU(t,e){return Ha(t)===2?t.get(e):t[e]}function rC(t,e,n){var r=Ha(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function iC(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function z_(t){return LU&&t instanceof Map}function q_(t){return MU&&t instanceof Set}function ws(t){return t.o||t.t}function G_(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=oC(t);delete e[Me];for(var n=la(e),r=0;r<n.length;r++){var i=n[r],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function W_(t,e){return e===void 0&&(e=!1),H_(t)||zi(t)||!qi(t)||(Ha(t)>1&&(t.set=t.add=t.clear=t.delete=xU),Object.freeze(t),e&&Hs(t,function(n,r){return W_(r,!0)},!0)),t}function xU(){Yn(2)}function H_(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function yr(t){var e=Uv[t];return e||Yn(18,t),e}function kU(t,e){Uv[t]||(Uv[t]=e)}function Mv(){return Gu}function tg(t,e){e&&(yr("Patches"),t.u=[],t.s=[],t.v=e)}function Bh(t){Vv(t),t.p.forEach(NU),t.p=null}function Vv(t){t===Gu&&(Gu=t.l)}function h0(t){return Gu={p:[],l:Gu,h:t,m:!0,_:0}}function NU(t){var e=t[Me];e.i===0||e.i===1?e.j():e.g=!0}function ng(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||yr("ES5").S(e,t,r),r?(n[Me].P&&(Bh(e),Yn(4)),qi(t)&&(t=jh(e,t),e.l||zh(e,t)),e.u&&yr("Patches").M(n[Me].t,t,e.u,e.s)):t=jh(e,n,[]),Bh(e),e.u&&e.v(e.u,e.s),t!==sC?t:void 0}function jh(t,e,n){if(H_(e))return e;var r=e[Me];if(!r)return Hs(e,function(a,l){return f0(t,r,e,a,l,n)},!0),e;if(r.A!==t)return e;if(!r.P)return zh(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=G_(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Hs(s,function(a,l){return f0(t,r,i,a,l,n,o)}),zh(t,i,!1),n&&t.u&&yr("Patches").N(r,n,t.u,t.s)}return r.o}function f0(t,e,n,r,i,s,o){if(zi(i)){var a=jh(t,i,s&&e&&e.i!==3&&!aa(e.R,r)?s.concat(r):void 0);if(rC(n,r,a),!zi(a))return;t.m=!1}else o&&n.add(i);if(qi(i)&&!H_(i)){if(!t.h.D&&t._<1)return;jh(t,i),e&&e.A.l||zh(t,i)}}function zh(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&W_(e,n)}function rg(t,e){var n=t[Me];return(n?ws(n):t)[e]}function p0(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function wi(t){t.P||(t.P=!0,t.l&&wi(t.l))}function ig(t){t.o||(t.o=G_(t.t))}function Fv(t,e,n){var r=z_(e)?yr("MapSet").F(e,n):q_(e)?yr("MapSet").T(e,n):t.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Mv(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=Wu;o&&(l=[a],u=Kl);var d=Proxy.revocable(l,u),h=d.revoke,f=d.proxy;return a.k=f,a.j=h,f}(e,n):yr("ES5").J(e,n);return(n?n.A:Mv()).p.push(r),r}function OU(t){return zi(t)||Yn(22,t),function e(n){if(!qi(n))return n;var r,i=n[Me],s=Ha(n);if(i){if(!i.P&&(i.i<4||!yr("ES5").K(i)))return i.t;i.I=!0,r=m0(n,s),i.I=!1}else r=m0(n,s);return Hs(r,function(o,a){i&&CU(i.t,o)===a||rC(r,o,e(a))}),s===3?new Set(r):r}(t)}function m0(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return G_(t)}function DU(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[Me];return Wu.get(l,s)},set:function(l){var u=this[Me];Wu.set(u,s,l)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Me];if(!a.P)switch(a.i){case 5:r(a)&&wi(a);break;case 4:n(a)&&wi(a)}}}function n(s){for(var o=s.t,a=s.k,l=la(a),u=l.length-1;u>=0;u--){var d=l[u];if(d!==Me){var h=o[d];if(h===void 0&&!aa(o,d))return!0;var f=a[d],g=f&&f[Me];if(g?g.t!==h:!iC(f,h))return!0}}var _=!!o[Me];return l.length!==la(o).length+(_?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};kU("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(d,h){if(d){for(var f=Array(h.length),g=0;g<h.length;g++)Object.defineProperty(f,""+g,t(g,!0));return f}var _=oC(h);delete _[Me];for(var E=la(_),T=0;T<E.length;T++){var m=E[T];_[m]=t(m,d||!!_[m].enumerable)}return Object.create(Object.getPrototypeOf(h),_)}(a,s),u={i:a?5:4,A:o?o.A:Mv(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Me,{value:u,writable:!0}),l},S:function(s,o,a){a?zi(o)&&o[Me].A===s&&e(s.p):(s.u&&function l(u){if(u&&typeof u=="object"){var d=u[Me];if(d){var h=d.t,f=d.k,g=d.R,_=d.i;if(_===4)Hs(f,function(w){w!==Me&&(h[w]!==void 0||aa(h,w)?g[w]||l(f[w]):(g[w]=!0,wi(d)))}),Hs(h,function(w){f[w]!==void 0||aa(f,w)||(g[w]=!1,wi(d))});else if(_===5){if(r(d)&&(wi(d),g.length=!0),f.length<h.length)for(var E=f.length;E<h.length;E++)g[E]=!1;else for(var T=h.length;T<f.length;T++)g[T]=!0;for(var m=Math.min(f.length,h.length),v=0;v<m;v++)f.hasOwnProperty(v)||(g[v]=!0),g[v]===void 0&&l(f[v])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var g0,Gu,K_=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",LU=typeof Map<"u",MU=typeof Set<"u",v0=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",sC=K_?Symbol.for("immer-nothing"):((g0={})["immer-nothing"]=!0,g0),y0=K_?Symbol.for("immer-draftable"):"__$immer_draftable",Me=K_?Symbol.for("immer-state"):"__$immer_state",VU=""+Object.prototype.constructor,la=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,oC=Object.getOwnPropertyDescriptors||function(t){var e={};return la(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},Uv={},Wu={get:function(t,e){if(e===Me)return t;var n=ws(t);if(!aa(n,e))return function(i,s,o){var a,l=p0(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,n,e);var r=n[e];return t.I||!qi(r)?r:r===rg(t.t,e)?(ig(t),t.o[e]=Fv(t.A.h,r,t)):r},has:function(t,e){return e in ws(t)},ownKeys:function(t){return Reflect.ownKeys(ws(t))},set:function(t,e,n){var r=p0(ws(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var i=rg(ws(t),e),s=i==null?void 0:i[Me];if(s&&s.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(iC(n,i)&&(n!==void 0||aa(t.t,e)))return!0;ig(t),wi(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return rg(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,ig(t),wi(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=ws(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){Yn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Yn(12)}},Kl={};Hs(Wu,function(t,e){Kl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Kl.deleteProperty=function(t,e){return Kl.set.call(this,t,e,void 0)},Kl.set=function(t,e,n){return Wu.set.call(this,t[0],e,n,t[0])};var FU=function(){function t(n){var r=this;this.O=v0,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(E){var T=this;E===void 0&&(E=a);for(var m=arguments.length,v=Array(m>1?m-1:0),w=1;w<m;w++)v[w-1]=arguments[w];return l.produce(E,function(C){var O;return(O=s).call.apply(O,[T,C].concat(v))})}}var u;if(typeof s!="function"&&Yn(6),o!==void 0&&typeof o!="function"&&Yn(7),qi(i)){var d=h0(r),h=Fv(r,i,void 0),f=!0;try{u=s(h),f=!1}finally{f?Bh(d):Vv(d)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(E){return tg(d,o),ng(E,d)},function(E){throw Bh(d),E}):(tg(d,o),ng(u,d))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===sC&&(u=void 0),r.D&&W_(u,!0),o){var g=[],_=[];yr("Patches").M(i,u,g,_),o(g,_)}return u}Yn(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var d=arguments.length,h=Array(d>1?d-1:0),f=1;f<d;f++)h[f-1]=arguments[f];return r.produceWithPatches(u,function(g){return i.apply(void 0,[g].concat(h))})};var o,a,l=r.produce(i,s,function(u,d){o=u,a=d});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){qi(n)||Yn(8),zi(n)&&(n=OU(n));var r=h0(this),i=Fv(this,n,void 0);return i[Me].C=!0,Vv(r),i},e.finishDraft=function(n,r){var i=n&&n[Me],s=i.A;return tg(s,r),ng(void 0,s)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!v0&&Yn(20),this.O=n},e.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=yr("Patches").$;return zi(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},t}(),Sn=new FU,Yd=Sn.produce;Sn.produceWithPatches.bind(Sn);Sn.setAutoFreeze.bind(Sn);Sn.setUseProxies.bind(Sn);Sn.applyPatches.bind(Sn);Sn.createDraft.bind(Sn);Sn.finishDraft.bind(Sn);function Hu(t){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hu(t)}function UU(t,e){if(Hu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $U(t){var e=UU(t,"string");return Hu(e)=="symbol"?e:e+""}function BU(t,e,n){return e=$U(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function w0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_0(Object(n),!0).forEach(function(r){BU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var E0=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),sg=function(){return Math.random().toString(36).substring(7).split("").join(".")},qh={INIT:"@@redux/INIT"+sg(),REPLACE:"@@redux/REPLACE"+sg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+sg()}};function jU(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function aC(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Mt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Mt(1));return n(aC)(t,e)}if(typeof t!="function")throw new Error(Mt(2));var i=t,s=e,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Mt(3));return s}function h(E){if(typeof E!="function")throw new Error(Mt(4));if(l)throw new Error(Mt(5));var T=!0;return u(),a.push(E),function(){if(T){if(l)throw new Error(Mt(6));T=!1,u();var v=a.indexOf(E);a.splice(v,1),o=null}}}function f(E){if(!jU(E))throw new Error(Mt(7));if(typeof E.type>"u")throw new Error(Mt(8));if(l)throw new Error(Mt(9));try{l=!0,s=i(s,E)}finally{l=!1}for(var T=o=a,m=0;m<T.length;m++){var v=T[m];v()}return E}function g(E){if(typeof E!="function")throw new Error(Mt(10));i=E,f({type:qh.REPLACE})}function _(){var E,T=h;return E={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Mt(11));function w(){v.next&&v.next(d())}w();var C=T(w);return{unsubscribe:C}}},E[E0]=function(){return this},E}return f({type:qh.INIT}),r={dispatch:f,subscribe:h,getState:d,replaceReducer:g},r[E0]=_,r}function zU(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:qh.INIT});if(typeof r>"u")throw new Error(Mt(12));if(typeof n(void 0,{type:qh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mt(13))})}function qU(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];typeof t[i]=="function"&&(n[i]=t[i])}var s=Object.keys(n),o;try{zU(n)}catch(a){o=a}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var d=!1,h={},f=0;f<s.length;f++){var g=s[f],_=n[g],E=l[g],T=_(E,u);if(typeof T>"u")throw u&&u.type,new Error(Mt(14));h[g]=T,d=d||T!==E}return d=d||s.length!==Object.keys(l).length,d?h:l}}function Gh(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function GU(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Mt(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=Gh.apply(void 0,a)(i.dispatch),w0(w0({},i),{},{dispatch:s})}}}function lC(t){var e=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var $v=lC();$v.withExtraArgument=lC;var WU=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wh=function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},HU=Object.defineProperty,I0=Object.getOwnPropertySymbols,KU=Object.prototype.hasOwnProperty,QU=Object.prototype.propertyIsEnumerable,T0=function(t,e,n){return e in t?HU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Ku=function(t,e){for(var n in e||(e={}))KU.call(e,n)&&T0(t,n,e[n]);if(I0)for(var r=0,i=I0(e);r<i.length;r++){var n=i[r];QU.call(e,n)&&T0(t,n,e[n])}return t},YU=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Gh:Gh.apply(null,arguments)};function XU(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}var JU=function(t){WU(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Wh([void 0],n[0].concat(this)))):new(e.bind.apply(e,Wh([void 0],n.concat(this))))},e}(Array);function ZU(t){return typeof t=="boolean"}function e$(){return function(e){return t$(e)}}function t$(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck;var r=new JU;return n&&(ZU(n)?r.push($v):r.push($v.withExtraArgument(n.extraArgument))),r}var n$=!0;function r$(t){var e=e$(),n=t||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?e():s,a=n.devTools,l=a===void 0?!0:a,u=n.preloadedState,d=u===void 0?void 0:u,h=n.enhancers,f=h===void 0?void 0:h,g;if(typeof i=="function")g=i;else if(XU(i))g=qU(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var _=o;typeof _=="function"&&(_=_(e));var E=GU.apply(void 0,_),T=Gh;l&&(T=YU(Ku({trace:!n$},typeof l=="object"&&l)));var m=[E];Array.isArray(f)?m=Wh([E],f):typeof f=="function"&&(m=f(m));var v=T.apply(void 0,m);return aC(g,d,v)}function Qu(t,e){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(e){var s=e.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Ku(Ku({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}function uC(t){var e={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in e)throw new Error("addCase cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return t(i),[e,n,r]}function i$(t){return typeof t=="function"}function s$(t,e,n,r){n===void 0&&(n=[]);var i=typeof e=="function"?uC(e):[e,n,r],s=i[0],o=i[1],a=i[2],l;if(i$(t))l=function(){return Yd(t(),function(){})};else{var u=Yd(t,function(){});l=function(){return u}}function d(h,f){h===void 0&&(h=l());var g=Wh([s[f.type]],o.filter(function(_){var E=_.matcher;return E(f)}).map(function(_){var E=_.reducer;return E}));return g.filter(function(_){return!!_}).length===0&&(g=[a]),g.reduce(function(_,E){if(E)if(zi(_)){var T=_,m=E(T,f);return typeof m>"u"?_:m}else{if(qi(_))return Yd(_,function(v){return E(v,f)});var m=E(_,f);if(typeof m>"u"){if(_===null)return _;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}return _},h)}return d.getInitialState=l,d}function o$(t,e){return t+"/"+e}function cC(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var n=typeof t.initialState=="function"?t.initialState:Yd(t.initialState,function(){}),r=t.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(d){var h=r[d],f=o$(e,d),g,_;"reducer"in h?(g=h.reducer,_=h.prepare):g=h,s[d]=g,o[f]=g,a[d]=_?Qu(f,_):Qu(f)});function l(){var d=typeof t.extraReducers=="function"?uC(t.extraReducers):[t.extraReducers],h=d[0],f=h===void 0?{}:h,g=d[1],_=g===void 0?[]:g,E=d[2],T=E===void 0?void 0:E,m=Ku(Ku({},f),o);return s$(n,m,_,T)}var u;return{name:e,reducer:function(d,h){return u||(u=l()),u(d,h)},actions:a,caseReducers:s,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var Q_="listenerMiddleware";Qu(Q_+"/add");Qu(Q_+"/removeAll");Qu(Q_+"/remove");DU();const a$=[],l$=null,dC=cC({name:"User",initialState:l$,reducers:{setUser(t,e){return e.payload},userLogout(){return null}}}),u$=cC({name:"Cart",initialState:a$,reducers:{addItem(t,e){const n=t.find(i=>i.name===e.payload.name),r=t.findIndex(i=>i.id==e.payload.id);n?t[r].count+=1:t.push(e.payload)},minusItem(t,e){const n=t.findIndex(r=>r.id==e.payload);t[n].count-=1,t[n].count==0?t.splice(n,1):t[n].preis=(Number(t[n].preis)/(t[n].count+1)).toString()},plusItem(t,e){const n=t.findIndex(r=>r.id==e.payload.id);t[n].count+=1,t[n].preis=(Number(t[n].preis)*t[n].count).toString()},removeItem(t,e){const n=t.findIndex(r=>r.id==e.payload);t.splice(n,1)}}}),{setUser:hC,userLogout:fC}=dC.actions,c$=r$({reducer:{Cart:u$.reducer,userSlice:dC.reducer}});var S0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},d$=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},mC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),r.push(n[d],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d$(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new h$;const f=s<<2|a>>4;if(r.push(f),u!==64){const g=a<<4&240|u>>2;if(r.push(g),h!==64){const _=u<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class h$ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f$=function(t){const e=pC(t);return mC.encodeByteArray(e,!0)},Hh=function(t){return f$(t).replace(/\./g,"")},Y_=function(t){try{return mC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Kh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!p$(n)||(t[n]=Kh(t[n],e[n]));return t}function p$(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=()=>m$().__FIREBASE_DEFAULTS__,v$=()=>{if(typeof process>"u"||typeof S0>"u")return;const t=S0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y$=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Y_(t[1]);return e&&JSON.parse(e)},X_=()=>{try{return g$()||v$()||y$()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gC=()=>{var t;return(t=X_())===null||t===void 0?void 0:t.config},vC=t=>{var e;return(e=X_())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _${constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hh(JSON.stringify(n)),Hh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _C(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pe())}function J_(){var t;const e=(t=X_())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wC(){return typeof self=="object"&&self.self===self}function Z_(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EC(){const t=pe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IC(){return!J_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yu(){try{return typeof indexedDB=="object"}catch{return!1}}function w$(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$="FirebaseError";class gt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=E$,Object.setPrototypeOf(this,gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pr.prototype.create)}}class Pr{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?I$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new gt(i,a,r)}}function I$(t,e){return t.replace(T$,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const T$=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function S$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(b0(s)&&b0(o)){if(!Xu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function b0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ea(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ql(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ew(t,e){const n=new P$(t,e);return n.subscribe.bind(n)}class P${constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");b$(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=og),i.error===void 0&&(i.error=og),i.complete===void 0&&(i.complete=og);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b$(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function og(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t){return t&&t._delegate?t._delegate:t}class fn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _$;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(C$(e))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Es){return this.instances.has(e)}getOptions(e=Es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:R$(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Es){return this.component?this.component.multipleInstances?e:Es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function R$(t){return t===Es?void 0:t}function C$(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new A$(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=[];var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const SC={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},x$=se.INFO,k$={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},N$=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=k$[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sc{constructor(e){this.name=e,this._logLevel=x$,this._logHandler=N$,this._userLogHandler=null,tw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}function O$(t){tw.forEach(e=>{e.setLogLevel(t)})}function D$(t,e){for(const n of tw){let r=null;e&&e.level&&(r=SC[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:se[s].toLowerCase(),message:a,args:o,type:i.name})}}}const L$=(t,e)=>e.some(n=>t instanceof n);let A0,R0;function M$(){return A0||(A0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V$(){return R0||(R0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PC=new WeakMap,Bv=new WeakMap,bC=new WeakMap,ag=new WeakMap,nw=new WeakMap;function F$(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Fi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&PC.set(n,t)}).catch(()=>{}),nw.set(e,t),e}function U$(t){if(Bv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Bv.set(t,e)}let jv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $$(t){jv=t(jv)}function B$(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lg(this),e,...n);return bC.set(r,e.sort?e.sort():[e]),Fi(r)}:V$().includes(t)?function(...e){return t.apply(lg(this),e),Fi(PC.get(this))}:function(...e){return Fi(t.apply(lg(this),e))}}function j$(t){return typeof t=="function"?B$(t):(t instanceof IDBTransaction&&U$(t),L$(t,M$())?new Proxy(t,jv):t)}function Fi(t){if(t instanceof IDBRequest)return F$(t);if(ag.has(t))return ag.get(t);const e=j$(t);return e!==t&&(ag.set(t,e),nw.set(e,t)),e}const lg=t=>nw.get(t);function z$(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Fi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Fi(o.result),l.oldVersion,l.newVersion,Fi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const q$=["get","getKey","getAll","getAllKeys","count"],G$=["put","add","delete","clear"],ug=new Map;function C0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=G$.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||q$.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return ug.set(e,s),s}$$(t=>({...t,get:(e,n,r)=>C0(e,n)||t.get(e,n,r),has:(e,n)=>!!C0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(H$(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function H$(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qh="@firebase/app",zv="0.10.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new Sc("@firebase/app"),K$="@firebase/app-compat",Q$="@firebase/analytics-compat",Y$="@firebase/analytics",X$="@firebase/app-check-compat",J$="@firebase/app-check",Z$="@firebase/auth",e2="@firebase/auth-compat",t2="@firebase/database",n2="@firebase/database-compat",r2="@firebase/functions",i2="@firebase/functions-compat",s2="@firebase/installations",o2="@firebase/installations-compat",a2="@firebase/messaging",l2="@firebase/messaging-compat",u2="@firebase/performance",c2="@firebase/performance-compat",d2="@firebase/remote-config",h2="@firebase/remote-config-compat",f2="@firebase/storage",p2="@firebase/storage-compat",m2="@firebase/firestore",g2="@firebase/vertexai-preview",v2="@firebase/firestore-compat",y2="firebase",_2="10.12.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="[DEFAULT]",w2={[Qh]:"fire-core",[K$]:"fire-core-compat",[Y$]:"fire-analytics",[Q$]:"fire-analytics-compat",[J$]:"fire-app-check",[X$]:"fire-app-check-compat",[Z$]:"fire-auth",[e2]:"fire-auth-compat",[t2]:"fire-rtdb",[n2]:"fire-rtdb-compat",[r2]:"fire-fn",[i2]:"fire-fn-compat",[s2]:"fire-iid",[o2]:"fire-iid-compat",[a2]:"fire-fcm",[l2]:"fire-fcm-compat",[u2]:"fire-perf",[c2]:"fire-perf-compat",[d2]:"fire-rc",[h2]:"fire-rc-compat",[f2]:"fire-gcs",[p2]:"fire-gcs-compat",[m2]:"fire-fst",[v2]:"fire-fst-compat",[g2]:"fire-vertex","fire-js":"fire-js",[y2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new Map,Pa=new Map,ba=new Map;function Ju(t,e){try{t.container.addComponent(e)}catch(n){Ks.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function AC(t,e){t.container.addOrOverwriteComponent(e)}function er(t){const e=t.name;if(ba.has(e))return Ks.debug(`There were multiple attempts to register component ${e}.`),!1;ba.set(e,t);for(const n of Wi.values())Ju(n,t);for(const n of Pa.values())Ju(n,t);return!0}function RC(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function E2(t,e,n=Gi){RC(t,e).clearInstance(n)}function CC(t){return t.options!==void 0}function be(t){return t.settings!==void 0}function I2(){ba.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vn=new Pr("app","Firebase",T2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xC=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2 extends xC{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Yt(Qh,zv,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){iw(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Vn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=_2;function rw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gi,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Vn.create("bad-app-name",{appName:String(i)});if(n||(n=gC()),!n)throw Vn.create("no-options");const s=Wi.get(i);if(s){if(Xu(n,s.options)&&Xu(r,s.config))return s;throw Vn.create("duplicate-app",{appName:i})}const o=new TC(i);for(const l of ba.values())o.addComponent(l);const a=new xC(n,r,o);return Wi.set(i,a),a}function P2(t,e){if(wC())throw Vn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;CC(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=u=>[...u].reduce((d,h)=>Math.imul(31,d)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Vn.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Pa.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new TC(s);for(const u of ba.values())a.addComponent(u);const l=new S2(n,e,s,a);return Pa.set(s,l),l}function b2(t=Gi){const e=Wi.get(t);if(!e&&t===Gi&&gC())return rw();if(!e)throw Vn.create("no-app",{appName:t});return e}function A2(){return Array.from(Wi.values())}async function iw(t){let e=!1;const n=t.name;Wi.has(n)?(e=!0,Wi.delete(n)):Pa.has(n)&&t.decRefCount()<=0&&(Pa.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function Yt(t,e,n){var r;let i=(r=w2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ks.warn(a.join(" "));return}er(new fn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function kC(t,e){if(t!==null&&typeof t!="function")throw Vn.create("invalid-log-argument");D$(t,e)}function NC(t){O$(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2="firebase-heartbeat-database",C2=1,Zu="firebase-heartbeat-store";let cg=null;function OC(){return cg||(cg=z$(R2,C2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vn.create("idb-open",{originalErrorMessage:t.message})})),cg}async function x2(t){try{const n=(await OC()).transaction(Zu),r=await n.objectStore(Zu).get(DC(t));return await n.done,r}catch(e){if(e instanceof gt)Ks.warn(e.message);else{const n=Vn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ks.warn(n.message)}}}async function x0(t,e){try{const r=(await OC()).transaction(Zu,"readwrite");await r.objectStore(Zu).put(e,DC(t)),await r.done}catch(n){if(n instanceof gt)Ks.warn(n.message);else{const r=Vn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ks.warn(r.message)}}}function DC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=1024,N2=30*24*60*60*1e3;class O2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new L2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=k0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=N2}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=k0(),{heartbeatsToSend:r,unsentEntries:i}=D2(this._heartbeatsCache.heartbeats),s=Hh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function k0(){return new Date().toISOString().substring(0,10)}function D2(t,e=k2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),N0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),N0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class L2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yu()?w$().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await x2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return x0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return x0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function N0(t){return Hh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t){er(new fn("platform-logger",e=>new W$(e),"PRIVATE")),er(new fn("heartbeat",e=>new O2(e),"PRIVATE")),Yt(Qh,zv,t),Yt(Qh,zv,"esm2017"),Yt("fire-js","")}M2("");const V2=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:gt,SDK_VERSION:jn,_DEFAULT_ENTRY_NAME:Gi,_addComponent:Ju,_addOrOverwriteComponent:AC,_apps:Wi,_clearComponents:I2,_components:ba,_getProvider:RC,_isFirebaseApp:CC,_isFirebaseServerApp:be,_registerComponent:er,_removeServiceInstance:E2,_serverApps:Pa,deleteApp:iw,getApp:b2,getApps:A2,initializeApp:rw,initializeServerApp:P2,onLog:kC,registerVersion:Yt,setLogLevel:NC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n){this._delegate=e,this.firebase=n,Ju(e,new fn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),iw(this._delegate)))}_getService(e,n=Gi){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Gi){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Ju(this._delegate,e)}_addOrOverwriteComponent(e){AC(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},O0=new Pr("app-compat","Firebase",U2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Yt,setLogLevel:NC,onLog:kC,apps:null,SDK_VERSION:jn,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:V2}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||Gi,!P0(e,u))throw O0.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,d={}){const h=rw(u,d);if(P0(e,h.name))return e[h.name];const f=new t(h,n);return e[h.name]=f,f}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const d=u.name,h=d.replace("-compat","");if(er(u)&&u.type==="PUBLIC"){const f=(g=i())=>{if(typeof g[h]!="function")throw O0.create("invalid-app-argument",{appName:d});return g[h]()};u.serviceProps!==void 0&&Kh(f,u.serviceProps),n[h]=f,t.prototype[h]=function(...g){return this._getService.bind(this,d).apply(this,u.multipleInstances?g:[])}}return u.type==="PUBLIC"?n[h]:null}function l(u,d){return d==="serverAuth"?null:d}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(){const t=$2(F2);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:LC,extendNamespace:e,createSubscribe:ew,ErrorFactory:Pr,deepExtend:Kh});function e(n){Kh(t,n)}return t}const B2=LC();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0=new Sc("@firebase/app-compat"),j2="@firebase/app-compat",z2="0.2.34";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t){Yt(j2,z2,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(wC()&&self.firebase!==void 0){D0.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&D0.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const pn=B2;q2();var G2="firebase",W2="10.12.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.registerVersion(G2,W2,"app-compat");function Pc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Ol={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Co={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function MC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const K2=H2,Q2=MC,VC=new Pr("auth","Firebase",MC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new Sc("@firebase/auth");function Y2(t,...e){Yh.logLevel<=se.WARN&&Yh.warn(`Auth (${jn}): ${t}`,...e)}function Xd(t,...e){Yh.logLevel<=se.ERROR&&Yh.error(`Auth (${jn}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t,...e){throw ow(t,...e)}function ut(t,...e){return ow(t,...e)}function sw(t,e,n){const r=Object.assign(Object.assign({},Q2()),{[e]:n});return new Pr("auth","Firebase",r).create(e,{appName:t.name})}function vt(t){return sw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ka(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ct(t,"argument-error"),sw(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ow(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return VC.create(t,...e)}function q(t,e,...n){if(!t)throw ow(e,...n)}function hr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Xd(e),new Error(e)}function tr(t,e){t||hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function aw(){return L0()==="http:"||L0()==="https:"}function L0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aw()||Z_()||"connection"in navigator)?navigator.onLine:!0}function J2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,tr(n>e,"Short delay should be less than long delay!"),this.isMobile=_C()||gp()}get(){return X2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t,e){tr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FC=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=new bc(3e4,6e4);function Je(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ze(t,e,n,r,i={}){return UC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=is(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),FC.fetch()($C(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function UC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Z2),e);try{const i=new nB(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Yl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Yl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Yl(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw sw(t,d,u);Ct(t,d)}}catch(i){if(i instanceof gt)throw i;Ct(t,"network-request-failed",{message:String(i)})}}async function Jr(t,e,n,r,i={}){const s=await Ze(t,e,n,r,i);return"mfaPendingCredential"in s&&Ct(t,"multi-factor-auth-required",{_serverResponse:s}),s}function $C(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?lw(t.config,i):`${t.config.apiScheme}://${i}`}function tB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}let nB=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ut(this.auth,"network-request-failed")),eB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Yl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ut(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(t){return t!==void 0&&t.getResponse!==void 0}function V0(t){return t!==void 0&&t.enterprise!==void 0}class rB{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iB(t){return(await Ze(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function sB(t,e){return Ze(t,"GET","/v2/recaptchaConfig",Je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oB(t,e){return Ze(t,"POST","/v1/accounts:delete",e)}async function aB(t,e){return Ze(t,"POST","/v1/accounts:update",e)}async function BC(t,e){return Ze(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lB(t,e=!1){const n=J(t),r=await n.getIdToken(e),i=vp(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:hu(dg(i.auth_time)),issuedAtTime:hu(dg(i.iat)),expirationTime:hu(dg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function dg(t){return Number(t)*1e3}function vp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Xd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Y_(n);return i?JSON.parse(i):(Xd("Failed to decode base64 JWT payload"),null)}catch(i){return Xd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function F0(t){const e=vp(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof gt&&uB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function uB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cB=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qv=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hu(this.lastLoginAt),this.creationTime=hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Hr(t,BC(n,{idToken:r}));q(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?jC(s.providerUserInfo):[],a=hB(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new qv(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function dB(t){const e=J(t);await tc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jC(t){return t.map(e=>{var{providerId:n}=e,r=Pc(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fB(t,e){const n=await UC(t,{},async()=>{const r=is({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=$C(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",FC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pB(t,e){return Ze(t,"POST","/v2/accounts:revokeToken",Je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hg=class Gv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):F0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");const n=F0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await fB(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Gv;return r&&(q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gv,this.toJSON())}_performRefresh(){return hr("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}let Xh=class Xl{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Pc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Hr(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lB(this,e)}reload(){return dB(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(be(this.auth.app))return Promise.reject(vt(this.auth));const e=await this.getIdToken();return await Hr(this,oB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:C,isAnonymous:O,providerData:D,stsTokenManager:A}=n;q(w&&A,e,"internal-error");const I=hg.fromJSON(this.name,A);q(typeof w=="string",e,"internal-error"),ci(h,e.name),ci(f,e.name),q(typeof C=="boolean",e,"internal-error"),q(typeof O=="boolean",e,"internal-error"),ci(g,e.name),ci(_,e.name),ci(E,e.name),ci(T,e.name),ci(m,e.name),ci(v,e.name);const P=new Xl({uid:w,auth:e,email:f,emailVerified:C,displayName:h,isAnonymous:O,photoURL:_,phoneNumber:g,tenantId:E,stsTokenManager:I,createdAt:m,lastLoginAt:v});return D&&Array.isArray(D)&&(P.providerData=D.map(S=>Object.assign({},S))),T&&(P._redirectEventId=T),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new hg;i.updateFromServerResponse(n);const s=new Xl({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await tc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];q(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?jC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new hg;a.updateFromIdToken(r);const l=new Xl({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new qv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=new Map;function En(t){tr(t instanceof Function,"Expected a class definition");let e=U0.get(t);return e?(tr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,U0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zC=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}};zC.type="NONE";const Aa=zC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t,e,n){return`firebase:${t}:${e}:${n}`}let $0=class Jd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Fs(this.userKey,i.apiKey,s),this.fullPersistenceKey=Fs("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xh._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Jd(En(Aa),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||En(Aa);const o=Fs(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const h=Xh._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Jd(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Jd(s,e,r))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HC(e))return"Blackberry";if(KC(e))return"Webos";if(uw(e))return"Safari";if((e.includes("chrome/")||GC(e))&&!e.includes("edge/"))return"Chrome";if(Ac(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qC(t=pe()){return/firefox\//i.test(t)}function uw(t=pe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GC(t=pe()){return/crios\//i.test(t)}function WC(t=pe()){return/iemobile/i.test(t)}function Ac(t=pe()){return/android/i.test(t)}function HC(t=pe()){return/blackberry/i.test(t)}function KC(t=pe()){return/webos/i.test(t)}function Qa(t=pe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mB(t=pe()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function gB(t=pe()){var e;return Qa(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vB(){return EC()&&document.documentMode===10}function QC(t=pe()){return Qa(t)||Ac(t)||KC(t)||HC(t)||/windows phone/i.test(t)||WC(t)}function yB(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t,e=[]){let n;switch(t){case"Browser":n=B0(pe());break;case"Worker":n=`${B0(pe())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jn}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _B=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wB(t,e={}){return Ze(t,"GET","/v2/passwordPolicy",Je(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=6;let IB=class{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:EB,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TB=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j0(this),this.idTokenSubscription=new j0(this),this.beforeStateQueue=new _B(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=En(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await $0.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await BC(this,{idToken:e}),r=await Xh._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(be(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=J2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(be(this.app))return Promise.reject(vt(this));const n=e?J(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return be(this.app)?Promise.reject(vt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return be(this.app)?Promise.reject(vt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(En(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wB(this),n=new IB(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&En(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=await $0.create(this,[En(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Y2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}};function Ye(t){return J(t)}let j0=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ew(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SB(t){Rc=t}function cw(t){return Rc.loadJS(t)}function PB(){return Rc.recaptchaV2Script}function bB(){return Rc.recaptchaEnterpriseScript}function AB(){return Rc.gapiScript}function XC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const RB="recaptcha-enterprise",CB="NO_RECAPTCHA";class xB{constructor(e){this.type=RB,this.auth=Ye(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{sB(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new rB(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;V0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(CB)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&V0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=bB();l.length!==0&&(l+=a),cw(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function z0(t,e,n,r=!1){const i=new xB(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function nc(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await z0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await z0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}function kB(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(En);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function NB(t,e,n){const r=Ye(t);q(r._canInitEmulator,r,"emulator-config-failed"),q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=JC(e),{host:o,port:a}=OB(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||DB()}function JC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OB(t){const e=JC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:q0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:q0(o)}}}function q0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function DB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(t,e){return Ze(t,"POST","/v1/accounts:resetPassword",Je(t,e))}async function LB(t,e){return Ze(t,"POST","/v1/accounts:update",e)}async function MB(t,e){return Ze(t,"POST","/v1/accounts:signUp",e)}async function VB(t,e){return Ze(t,"POST","/v1/accounts:update",Je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FB(t,e){return Jr(t,"POST","/v1/accounts:signInWithPassword",Je(t,e))}async function yp(t,e){return Ze(t,"POST","/v1/accounts:sendOobCode",Je(t,e))}async function UB(t,e){return yp(t,e)}async function $B(t,e){return yp(t,e)}async function BB(t,e){return yp(t,e)}async function jB(t,e){return yp(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zB(t,e){return Jr(t,"POST","/v1/accounts:signInWithEmailLink",Je(t,e))}async function qB(t,e){return Jr(t,"POST","/v1/accounts:signInWithEmailLink",Je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends Ya{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new rc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new rc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nc(e,n,"signInWithPassword",FB);case"emailLink":return zB(e,{email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nc(e,r,"signUpPassword",MB);case"emailLink":return qB(e,{idToken:n,email:this._email,oobCode:this._password});default:Ct(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $r(t,e){return Jr(t,"POST","/v1/accounts:signInWithIdp",Je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB="http://localhost";class Ir extends Ya{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ir(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ct("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Pc(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ir(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return $r(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$r(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$r(e,n)}buildRequest(){const e={requestUri:GB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=is(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WB(t,e){return Ze(t,"POST","/v1/accounts:sendVerificationCode",Je(t,e))}async function HB(t,e){return Jr(t,"POST","/v1/accounts:signInWithPhoneNumber",Je(t,e))}async function KB(t,e){const n=await Jr(t,"POST","/v1/accounts:signInWithPhoneNumber",Je(t,e));if(n.temporaryProof)throw Yl(t,"account-exists-with-different-credential",n);return n}const QB={USER_NOT_FOUND:"user-not-found"};async function YB(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Jr(t,"POST","/v1/accounts:signInWithPhoneNumber",Je(t,n),QB)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Ya{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Us({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Us({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return HB(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return KB(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return YB(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new Us({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JB(t){const e=ea(Ql(t)).link,n=e?ea(Ql(e)).deep_link_id:null,r=ea(Ql(t)).deep_link_id;return(r?ea(Ql(r)).link:null)||r||n||e||t}class _p{constructor(e){var n,r,i,s,o,a;const l=ea(Ql(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,h=XB((i=l.mode)!==null&&i!==void 0?i:null);q(u&&d&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=JB(e);try{return new _p(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){this.providerId=ss.PROVIDER_ID}static credential(e,n){return rc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=_p.parseLink(n);return q(r,"argument-error"),rc._fromEmailAndCode(e,r.code,r.tenantId)}}ss.PROVIDER_ID="password";ss.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ss.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends Zr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ua extends Xa{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return q("providerId"in n&&"signInMethod"in n,"argument-error"),Ir._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return q(e.idToken||e.accessToken,"argument-error"),Ir._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ua.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ua.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new ua(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends Xa{constructor(){super("facebook.com")}static credential(e){return Ir._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com";or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Xa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ir._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ar.credential(n,r)}catch{return null}}}ar.GOOGLE_SIGN_IN_METHOD="google.com";ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Xa{constructor(){super("github.com")}static credential(e){return Ir._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.GITHUB_SIGN_IN_METHOD="github.com";lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB="http://localhost";class Ra extends Ya{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return $r(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$r(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$r(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Ra(r,s)}static _create(e,n){return new Ra(e,n)}buildRequest(){return{requestUri:ZB,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej="saml.";class Jh extends Zr{constructor(e){q(e.startsWith(ej),"argument-error"),super(e)}static credentialFromResult(e){return Jh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Jh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Ra.fromJSON(e);return q(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Ra._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Xa{constructor(){super("twitter.com")}static credential(e,n){return Ir._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.TWITTER_SIGN_IN_METHOD="twitter.com";ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e1(t,e){return Jr(t,"POST","/v1/accounts:signUp",Je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Xh._fromIdTokenResponse(e,r,i),o=G0(r);return new $n({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=G0(r);return new $n({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function G0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tj(t){var e;if(be(t.app))return Promise.reject(vt(t));const n=Ye(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new $n({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await e1(n,{returnSecureToken:!0}),i=await $n._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh extends gt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Zh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Zh(e,n,r,i)}}function t1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Zh._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nj(t,e){const n=J(t);await wp(!0,n,e);const{providerUserInfo:r}=await aB(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=n1(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function dw(t,e,n=!1){const r=await Hr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return $n._forOperation(t,"link",r)}async function wp(t,e,n){await tc(e);const r=n1(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";q(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(t,e,n=!1){const{auth:r}=t;if(be(r.app))return Promise.reject(vt(r));const i="reauthenticate";try{const s=await Hr(t,t1(r,i,e,t),n);q(s.idToken,r,"internal-error");const o=vp(s.idToken);q(o,r,"internal-error");const{sub:a}=o;return q(t.uid===a,r,"user-mismatch"),$n._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ct(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i1(t,e,n=!1){if(be(t.app))return Promise.reject(vt(t));const r="signIn",i=await t1(t,r,e),s=await $n._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Ep(t,e){return i1(Ye(t),e)}async function s1(t,e){const n=J(t);return await wp(!1,n,e.providerId),dw(n,e)}async function o1(t,e){return r1(J(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rj(t,e){return Jr(t,"POST","/v1/accounts:signInWithCustomToken",Je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(t,e){if(be(t.app))return Promise.reject(vt(t));const n=Ye(t),r=await rj(n,{token:e,returnSecureToken:!0}),i=await $n._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?hw._fromServerResponse(e,n):"totpInfo"in n?fw._fromServerResponse(e,n):Ct(e,"internal-error")}}class hw extends Cc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new hw(n)}}class fw extends Cc{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new fw(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(t,e,n){var r;q(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pw(t){const e=Ye(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sj(t,e,n){const r=Ye(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Ip(r,i,n),await nc(r,i,"getOobCode",$B)}async function oj(t,e,n){await ZC(J(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&pw(t),r})}async function aj(t,e){await VB(J(t),{oobCode:e})}async function a1(t,e){const n=J(t),r=await ZC(n,{oobCode:e}),i=r.requestType;switch(q(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(r.mfaInfo,n,"internal-error");default:q(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Cc._fromServerResponse(Ye(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function lj(t,e){const{data:n}=await a1(J(t),e);return n.email}async function uj(t,e,n){if(be(t.app))return Promise.reject(vt(t));const r=Ye(t),o=await nc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",e1).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&pw(t),l}),a=await $n._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function cj(t,e,n){return be(t.app)?Promise.reject(vt(t)):Ep(J(t),ss.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&pw(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t,e,n){const r=Ye(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){q(a.handleCodeInApp,r,"argument-error"),a&&Ip(r,o,a)}s(i,n),await nc(r,i,"getOobCode",BB)}function hj(t,e){const n=_p.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function fj(t,e,n){if(be(t.app))return Promise.reject(vt(t));const r=J(t),i=ss.credentialWithLink(e,n||ec());return q(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Ep(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pj(t,e){return Ze(t,"POST","/v1/accounts:createAuthUri",Je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e){const n=aw()?ec():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await pj(J(t),r);return i||[]}async function gj(t,e){const n=J(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Ip(n.auth,i,e);const{email:s}=await UB(n.auth,i);s!==t.email&&await t.reload()}async function vj(t,e,n){const r=J(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Ip(r.auth,s,n);const{email:o}=await jB(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yj(t,e){return Ze(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _j(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=J(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Hr(r,yj(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function wj(t,e){const n=J(t);return be(n.auth.app)?Promise.reject(vt(n.auth)):l1(n,e,null)}function Ej(t,e){return l1(J(t),null,e)}async function l1(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Hr(t,LB(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=vp(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new ca(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new Tj(s,i);case"github.com":return new Sj(s,i);case"google.com":return new Pj(s,i);case"twitter.com":return new bj(s,i,t.screenName||null);case"custom":case"anonymous":return new ca(s,null);default:return new ca(s,r,i)}}class ca{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class u1 extends ca{constructor(e,n,r,i){super(e,n,r),this.username=i}}class Tj extends ca{constructor(e,n){super(e,"facebook.com",n)}}class Sj extends u1{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Pj extends ca{constructor(e,n){super(e,"google.com",n)}}class bj extends u1{constructor(e,n,r){super(e,"twitter.com",n,r)}}function Aj(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Ij(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new ks("enroll",e,n)}static _fromMfaPendingCredential(e){return new ks("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return ks._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return ks._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Ye(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Cc._fromServerResponse(r,a));q(i.mfaPendingCredential,r,"internal-error");const o=ks._fromMfaPendingCredential(i.mfaPendingCredential);return new mw(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const d=await $n._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(d.user),d;case"reauthenticate":return q(n.user,r,"internal-error"),$n._forOperation(n.user,n.operationType,u);default:Ct(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function Rj(t,e){var n;const r=J(t),i=e;return q(e.customData.operationType,r,"argument-error"),q((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),mw._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t,e){return Ze(t,"POST","/v2/accounts/mfaEnrollment:start",Je(t,e))}function xj(t,e){return Ze(t,"POST","/v2/accounts/mfaEnrollment:finalize",Je(t,e))}function kj(t,e){return Ze(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Je(t,e))}class gw{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Cc._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new gw(e)}async getSession(){return ks._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Hr(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Hr(this.user,kj(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const fg=new WeakMap;function Nj(t){const e=J(t);return fg.has(e)||fg.set(e,gw._fromUser(e)),fg.get(e)}const ef="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ef,"1"),this.storage.removeItem(ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(){const t=pe();return uw(t)||Qa(t)}const Dj=1e3,Lj=10;class d1 extends c1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Oj()&&yB(),this.fallbackToPolling=QC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);vB()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Lj):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Dj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}d1.type="LOCAL";const vw=d1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1 extends c1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}h1.type="SESSION";const Qs=h1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Tp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await Mj(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=xc("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(){return window}function Fj(t){it().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(){return typeof it().WorkerGlobalScope<"u"&&typeof it().importScripts=="function"}async function Uj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $j(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Bj(){return yw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="firebaseLocalStorageDb",jj=1,tf="firebaseLocalStorage",p1="fbase_key";class kc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sp(t,e){return t.transaction([tf],e?"readwrite":"readonly").objectStore(tf)}function zj(){const t=indexedDB.deleteDatabase(f1);return new kc(t).toPromise()}function Wv(){const t=indexedDB.open(f1,jj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(tf,{keyPath:p1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(tf)?e(r):(r.close(),await zj(),e(await Wv()))})})}async function W0(t,e,n){const r=Sp(t,!0).put({[p1]:e,value:n});return new kc(r).toPromise()}async function qj(t,e){const n=Sp(t,!1).get(e),r=await new kc(n).toPromise();return r===void 0?null:r.value}function H0(t,e){const n=Sp(t,!0).delete(e);return new kc(n).toPromise()}const Gj=800,Wj=3;class m1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Wj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tp._getInstance(Bj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Uj(),!this.activeServiceWorker)return;this.sender=new Vj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$j()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wv();return await W0(e,ef,"1"),await H0(e,ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>W0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>qj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>H0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Sp(i,!1).getAll();return new kc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Gj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}m1.type="LOCAL";const ic=m1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t,e){return Ze(t,"POST","/v2/accounts/mfaSignIn:start",Je(t,e))}function Kj(t,e){return Ze(t,"POST","/v2/accounts/mfaSignIn:finalize",Je(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=500,Yj=6e4,Pd=1e12;class Xj{constructor(e){this.auth=e,this.counter=Pd,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new Jj(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Pd;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Pd;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Pd;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class Jj{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;q(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Zj(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},Yj)},Qj))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Zj(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg=XC("rcb"),ez=new bc(3e4,6e4);class tz{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=it().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return q(nz(n),e,"argument-error"),this.shouldResolveImmediately(n)&&M0(it().grecaptcha)?Promise.resolve(it().grecaptcha):new Promise((r,i)=>{const s=it().setTimeout(()=>{i(ut(e,"network-request-failed"))},ez.get());it()[pg]=()=>{it().clearTimeout(s),delete it()[pg];const a=it().grecaptcha;if(!a||!M0(a)){i(ut(e,"internal-error"));return}const l=a.render;a.render=(u,d)=>{const h=l(u,d);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${PB()}?${is({onload:pg,render:"explicit",hl:n})}`;cw(o).catch(()=>{clearTimeout(s),i(ut(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=it().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function nz(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class rz{async load(e){return new Xj(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="recaptcha",iz={theme:"light",type:"image"};let sz=class{constructor(e,n,r=Object.assign({},iz)){this.parameters=r,this.type=g1,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ye(e),this.isInvisible=this.parameters.size==="invisible",q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;q(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rz:new tz,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=it()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){q(aw()&&!yw(),this.auth,"internal-error"),await oz(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await iB(this.auth);q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function oz(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Us._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function az(t,e,n){if(be(t.app))return Promise.reject(vt(t));const r=Ye(t),i=await Pp(r,e,J(n));return new _w(i,s=>Ep(r,s))}async function lz(t,e,n){const r=J(t);await wp(!1,r,"phone");const i=await Pp(r.auth,e,J(n));return new _w(i,s=>s1(r,s))}async function uz(t,e,n){const r=J(t);if(be(r.auth.app))return Promise.reject(vt(r.auth));const i=await Pp(r.auth,e,J(n));return new _w(i,s=>o1(r,s))}async function Pp(t,e,n){var r;const i=await n.verify();try{q(typeof i=="string",t,"argument-error"),q(n.type===g1,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return q(o.type==="enroll",t,"internal-error"),(await Cj(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{q(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return q(a,t,"missing-multi-factor-info"),(await Hj(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await WB(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function cz(t,e){const n=J(t);if(be(n.auth.app))return Promise.reject(vt(n.auth));await dw(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ys=class Zd{constructor(e){this.providerId=Zd.PROVIDER_ID,this.auth=Ye(e)}verifyPhoneNumber(e,n){return Pp(this.auth,e,J(n))}static credential(e,n){return Us._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Zd.credentialFromTaggedObject(n)}static credentialFromError(e){return Zd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Us._fromTokenResponse(n,r):null}};Ys.PROVIDER_ID="phone";Ys.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(t,e){return e?En(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww extends Ya{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $r(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $r(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $r(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dz(t){return i1(t.auth,new ww(t),t.bypassAuthState)}function hz(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),r1(n,new ww(t),t.bypassAuthState)}async function fz(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),dw(n,new ww(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dz;case"linkViaPopup":case"linkViaRedirect":return fz;case"reauthViaPopup":case"reauthViaRedirect":return hz;default:Ct(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz=new bc(2e3,1e4);async function mz(t,e,n){if(be(t.app))return Promise.reject(ut(t,"operation-not-supported-in-this-environment"));const r=Ye(t);Ka(t,e,Zr);const i=po(r,n);return new Mr(r,"signInViaPopup",e,i).executeNotNull()}async function gz(t,e,n){const r=J(t);if(be(r.auth.app))return Promise.reject(ut(r.auth,"operation-not-supported-in-this-environment"));Ka(r.auth,e,Zr);const i=po(r.auth,n);return new Mr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function vz(t,e,n){const r=J(t);Ka(r.auth,e,Zr);const i=po(r.auth,n);return new Mr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Mr extends v1{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Mr.currentPopupAction&&Mr.currentPopupAction.cancel(),Mr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return q(e,this.auth,"internal-error"),e}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const e=xc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ut(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ut(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ut(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pz.get())};e()}}Mr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz="pendingRedirect",fu=new Map;class _z extends v1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fu.get(this.auth._key());if(!e){try{const r=await wz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fu.set(this.auth._key(),e)}return this.bypassAuthState||fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wz(t,e){const n=_1(e),r=y1(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function Ew(t,e){return y1(t)._set(_1(e),"true")}function Ez(){fu.clear()}function Iw(t,e){fu.set(t._key(),e)}function y1(t){return En(t._redirectPersistence)}function _1(t){return Fs(yz,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(t,e,n){return Tz(t,e,n)}async function Tz(t,e,n){if(be(t.app))return Promise.reject(vt(t));const r=Ye(t);Ka(t,e,Zr),await r._initializationPromise;const i=po(r,n);return await Ew(i,r),i._openRedirect(r,e,"signInViaRedirect")}function Sz(t,e,n){return Pz(t,e,n)}async function Pz(t,e,n){const r=J(t);if(Ka(r.auth,e,Zr),be(r.auth.app))return Promise.reject(vt(r.auth));await r.auth._initializationPromise;const i=po(r.auth,n);await Ew(i,r.auth);const s=await w1(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function bz(t,e,n){return Az(t,e,n)}async function Az(t,e,n){const r=J(t);Ka(r.auth,e,Zr),await r.auth._initializationPromise;const i=po(r.auth,n);await wp(!1,r,e.providerId),await Ew(i,r.auth);const s=await w1(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function Rz(t,e){return await Ye(t)._initializationPromise,bp(t,e,!1)}async function bp(t,e,n=!1){if(be(t.app))return Promise.reject(vt(t));const r=Ye(t),i=po(r,e),o=await new _z(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function w1(t){const e=xc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz=10*60*1e3;class E1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!I1(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ut(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Cz&&this.cachedEventUids.clear(),this.cachedEventUids.has(K0(e))}saveEventToCache(e){this.cachedEventUids.add(K0(e)),this.lastProcessedEventTime=Date.now()}}function K0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function I1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return I1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(t,e={}){return Ze(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nz=/^https?/;async function Oz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await T1(t);for(const n of e)try{if(Dz(n))return}catch{}Ct(t,"unauthorized-domain")}function Dz(t){const e=ec(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Nz.test(n))return!1;if(kz.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=new bc(3e4,6e4);function Q0(){const t=it().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Mz(t){return new Promise((e,n)=>{var r,i,s;function o(){Q0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q0(),n(ut(t,"network-request-failed"))},timeout:Lz.get()})}if(!((i=(r=it().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=it().gapi)===null||s===void 0)&&s.load)o();else{const a=XC("iframefcb");return it()[a]=()=>{gapi.load?o():n(ut(t,"network-request-failed"))},cw(`${AB()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw eh=null,e})}let eh=null;function Vz(t){return eh=eh||Mz(t),eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz=new bc(5e3,15e3),Uz="__/auth/iframe",$z="emulator/auth/iframe",Bz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zz(t){const e=t.config;q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lw(e,$z):`https://${t.config.authDomain}/${Uz}`,r={apiKey:e.apiKey,appName:t.name,v:jn},i=jz.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${is(r).slice(1)}`}async function qz(t){const e=await Vz(t),n=it().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:zz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Bz,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ut(t,"network-request-failed"),a=it().setTimeout(()=>{s(o)},Fz.get());function l(){it().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wz=500,Hz=600,Kz="_blank",Qz="http://localhost";class Y0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Yz(t,e,n,r=Wz,i=Hz){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Gz),{width:r.toString(),height:i.toString(),top:s,left:o}),u=pe().toLowerCase();n&&(a=GC(u)?Kz:n),qC(u)&&(e=e||Qz,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[g,_])=>`${f}${g}=${_},`,"");if(gB(u)&&a!=="_self")return Xz(e||"",a),new Y0(null);const h=window.open(e||"",a,d);q(h,t,"popup-blocked");try{h.focus()}catch{}return new Y0(h)}function Xz(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz="__/auth/handler",Zz="emulator/auth/handler",e4=encodeURIComponent("fac");async function Hv(t,e,n,r,i,s){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:jn,eventId:i};if(e instanceof Zr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",S$(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries(s||{}))o[d]=h}if(e instanceof Xa){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${e4}=${encodeURIComponent(l)}`:"";return`${t4(t)}?${is(a).slice(1)}${u}`}function t4({config:t}){return t.emulator?lw(t,Zz):`https://${t.authDomain}/${Jz}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="webStorageSupport";class n4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qs,this._completeRedirectFn=bp,this._overrideRedirectResult=Iw}async _openPopup(e,n,r,i){var s;tr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Hv(e,n,r,ec(),i);return Yz(e,o,xc())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Hv(e,n,r,ec(),i);return Fj(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(tr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await qz(e),r=new E1(e);return n.register("authEvent",i=>(q(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mg,{type:mg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[mg];o!==void 0&&n(!!o),Ct(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Oz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return QC()||uw()||Qa()}}const r4=n4;class i4{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return hr("unexpected MultiFactorSessionType")}}}class Tw extends i4{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Tw(e)}_finalizeEnroll(e,n,r){return xj(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return Kj(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class S1{constructor(){}static assertion(e){return Tw._fromCredential(e)}}S1.FACTOR_ID="phone";var X0="@firebase/auth",J0="1.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s4=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a4(t){er(new fn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YC(t)},u=new TB(r,i,s,l);return kB(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),er(new fn("auth-internal",e=>{const n=Ye(e.getProvider("auth").getImmediate());return(r=>new s4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yt(X0,J0,o4(t)),Yt(X0,J0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=5*60;vC("authIdTokenMaxAge");function u4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}SB({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ut("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",u4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a4("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=2e3;async function d4(t,e,n){var r;const{BuildInfo:i}=Xs();tr(e.sessionId,"AuthEvent did not contain a session ID");const s=await g4(e.sessionId),o={};return Qa()?o.ibi=i.packageName:Ac()?o.apn=i.packageName:Ct(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Hv(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function h4(t){const{BuildInfo:e}=Xs(),n={};Qa()?n.iosBundleId=e.packageName:Ac()?n.androidPackageName=e.packageName:Ct(t,"operation-not-supported-in-this-environment"),await T1(t,n)}function f4(t){const{cordova:e}=Xs();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,mB()?"_blank":"_system","location=yes"),n(i)})})}async function p4(t,e,n){const{cordova:r}=Xs();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var h;s();const f=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(ut(t,"redirect-cancelled-by-user"))},c4))}function d(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),Ac()&&document.addEventListener("visibilitychange",d,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{i()}}function m4(t){var e,n,r,i,s,o,a,l,u,d;const h=Xs();q(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q(typeof((s=(i=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((d=(u=h==null?void 0:h.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||d===void 0?void 0:d.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function g4(t){const e=v4(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function v4(t){if(tr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=20;class _4 extends E1{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function w4(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:T4(),postBody:null,tenantId:t.tenantId,error:ut(t,"no-auth-event")}}function E4(t,e){return Kv()._set(Qv(t),e)}async function Z0(t){const e=await Kv()._get(Qv(t));return e&&await Kv()._remove(Qv(t)),e}function I4(t,e){var n,r;const i=P4(e);if(i.includes("/__/auth/callback")){const s=th(i),o=s.firebaseError?S4(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?ut(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function T4(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<y4;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function Kv(){return En(vw)}function Qv(t){return Fs("authEvent",t.config.apiKey,t.name)}function S4(t){try{return JSON.parse(t)}catch{return null}}function P4(t){const e=th(t),n=e.link?decodeURIComponent(e.link):void 0,r=th(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return th(i).link||i||r||n||t}function th(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return ea(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=500;class A4{constructor(){this._redirectPersistence=Qs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bp,this._overrideRedirectResult=Iw}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new _4(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Ct(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){m4(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),Ez(),await this._originValidation(e);const o=w4(e,r,i);await E4(e,o);const a=await d4(e,o,n),l=await f4(a);return p4(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=h4(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=Xs(),o=setTimeout(async()=>{await Z0(e),n.onEvent(eS())},b4),a=async d=>{clearTimeout(o);const h=await Z0(e);let f=null;h&&(d!=null&&d.url)&&(f=I4(h,d.url)),n.onEvent(f||eS())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${s.packageName.toLowerCase()}://`;Xs().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(u)&&a({url:d}),typeof l=="function")try{l(d)}catch(h){console.error(h)}}}}const R4=A4;function eS(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ut("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(t,e){Ye(t)._logFramework(e)}var x4="@firebase/auth-compat",k4="0.5.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=1e3;function pu(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function O4(){return pu()==="http:"||pu()==="https:"}function P1(t=pe()){return!!((pu()==="file:"||pu()==="ionic:"||pu()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function D4(){return gp()||J_()}function L4(){return EC()&&(document==null?void 0:document.documentMode)===11}function M4(t=pe()){return/Edge\/\d+/.test(t)}function V4(t=pe()){return L4()||M4(t)}function b1(){try{const t=self.localStorage,e=xc();if(t)return t.setItem(e,"1"),t.removeItem(e),V4()?Yu():!0}catch{return Sw()&&Yu()}return!1}function Sw(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function gg(){return(O4()||Z_()||P1())&&!D4()&&b1()&&!Sw()}function A1(){return P1()&&typeof document<"u"}async function F4(){return A1()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},N4);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function U4(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n={LOCAL:"local",NONE:"none",SESSION:"session"},Dl=q,R1="persistence";function $4(t,e){if(Dl(Object.values(_n).includes(e),t,"invalid-persistence-type"),gp()){Dl(e!==_n.SESSION,t,"unsupported-persistence-type");return}if(J_()){Dl(e===_n.NONE,t,"unsupported-persistence-type");return}if(Sw()){Dl(e===_n.NONE||e===_n.LOCAL&&Yu(),t,"unsupported-persistence-type");return}Dl(e===_n.NONE||b1(),t,"unsupported-persistence-type")}async function Yv(t){await t._initializationPromise;const e=C1(),n=Fs(R1,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function B4(t,e){const n=C1();if(!n)return[];const r=Fs(R1,t,e);switch(n.getItem(r)){case _n.NONE:return[Aa];case _n.LOCAL:return[ic,Qs];case _n.SESSION:return[Qs];default:return[]}}function C1(){var t;try{return((t=U4())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=q;class bi{constructor(){this.browserResolver=En(r4),this.cordovaResolver=En(R4),this.underlyingResolver=null,this._redirectPersistence=Qs,this._completeRedirectFn=bp,this._overrideRedirectResult=Iw}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return A1()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return j4(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await F4();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t){return t.unwrap()}function z4(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(t){return k1(t)}function G4(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new W4(t,Rj(t,e))}else if(r){const i=k1(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function k1(t){const{_tokenResponse:e}=t instanceof gt?t.customData:t;if(!e)return null;if(!(t instanceof gt)&&"temporaryProof"in e&&"phoneNumber"in e)return Ys.credentialFromResult(t);const n=e.providerId;if(!n||n===Ol.PASSWORD)return null;let r;switch(n){case Ol.GOOGLE:r=ar;break;case Ol.FACEBOOK:r=or;break;case Ol.GITHUB:r=lr;break;case Ol.TWITTER:r=ur;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Ra._create(n,a):Ir._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new ua(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof gt?r.credentialFromError(t):r.credentialFromResult(t)}function nn(t,e){return e.catch(n=>{throw n instanceof gt&&G4(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:q4(n),additionalUserInfo:Aj(n),user:Ap.getOrCreate(i)}})}async function Xv(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>nn(t,n.confirm(r))}}class W4{constructor(e,n){this.resolver=n,this.auth=z4(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return nn(x1(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ap=class Jl{constructor(e){this._delegate=e,this.multiFactor=Nj(e)}static getOrCreate(e){return Jl.USER_MAP.has(e)||Jl.USER_MAP.set(e,new Jl(e)),Jl.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return nn(this.auth,s1(this._delegate,e))}async linkWithPhoneNumber(e,n){return Xv(this.auth,lz(this._delegate,e,n))}async linkWithPopup(e){return nn(this.auth,vz(this._delegate,e,bi))}async linkWithRedirect(e){return await Yv(Ye(this.auth)),bz(this._delegate,e,bi)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return nn(this.auth,o1(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Xv(this.auth,uz(this._delegate,e,n))}reauthenticateWithPopup(e){return nn(this.auth,gz(this._delegate,e,bi))}async reauthenticateWithRedirect(e){return await Yv(Ye(this.auth)),Sz(this._delegate,e,bi)}sendEmailVerification(e){return gj(this._delegate,e)}async unlink(e){return await nj(this._delegate,e),this}updateEmail(e){return wj(this._delegate,e)}updatePassword(e){return Ej(this._delegate,e)}updatePhoneNumber(e){return cz(this._delegate,e)}updateProfile(e){return _j(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return vj(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Ap.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=q;class Jv{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Ll(r,"invalid-api-key",{appName:e.name}),Ll(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?bi:void 0;this._delegate=n.initialize({options:{persistence:H4(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(K2),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ap.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){NB(this._delegate,e,n)}applyActionCode(e){return aj(this._delegate,e)}checkActionCode(e){return a1(this._delegate,e)}confirmPasswordReset(e,n){return oj(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return nn(this._delegate,uj(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return mj(this._delegate,e)}isSignInWithEmailLink(e){return hj(this._delegate,e)}async getRedirectResult(){Ll(gg(),this._delegate,"operation-not-supported-in-this-environment");const e=await Rz(this._delegate,bi);return e?nn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){C4(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=tS(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=tS(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return dj(this._delegate,e,n)}sendPasswordResetEmail(e,n){return sj(this._delegate,e,n||void 0)}async setPersistence(e){$4(this._delegate,e);let n;switch(e){case _n.SESSION:n=Qs;break;case _n.LOCAL:n=await En(ic)._isAvailable()?ic:vw;break;case _n.NONE:n=Aa;break;default:return Ct("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return nn(this._delegate,tj(this._delegate))}signInWithCredential(e){return nn(this._delegate,Ep(this._delegate,e))}signInWithCustomToken(e){return nn(this._delegate,ij(this._delegate,e))}signInWithEmailAndPassword(e,n){return nn(this._delegate,cj(this._delegate,e,n))}signInWithEmailLink(e,n){return nn(this._delegate,fj(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Xv(this._delegate,az(this._delegate,e,n))}async signInWithPopup(e){return Ll(gg(),this._delegate,"operation-not-supported-in-this-environment"),nn(this._delegate,mz(this._delegate,e,bi))}async signInWithRedirect(e){return Ll(gg(),this._delegate,"operation-not-supported-in-this-environment"),await Yv(this._delegate),Iz(this._delegate,e,bi)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return lj(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Jv.Persistence=_n;function tS(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Ap.getOrCreate(o)),error:e,complete:n}}function H4(t,e){const n=B4(t,e);if(typeof self<"u"&&!n.includes(ic)&&n.push(ic),typeof window<"u")for(const r of[vw,Qs])n.includes(r)||n.push(r);return n.includes(Aa)||n.push(Aa),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.providerId="phone",this._delegate=new Ys(x1(pn.auth()))}static credential(e,n){return Ys.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Pw.PHONE_SIGN_IN_METHOD=Ys.PHONE_SIGN_IN_METHOD;Pw.PROVIDER_ID=Ys.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=q;class Q4{constructor(e,n,r=pn.app()){var i;K4((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new sz(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4="auth-compat";function X4(t){t.INTERNAL.registerComponent(new fn(Y4,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Jv(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Co.EMAIL_SIGNIN,PASSWORD_RESET:Co.PASSWORD_RESET,RECOVER_EMAIL:Co.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Co.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Co.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Co.VERIFY_EMAIL}},EmailAuthProvider:ss,FacebookAuthProvider:or,GithubAuthProvider:lr,GoogleAuthProvider:ar,OAuthProvider:ua,SAMLAuthProvider:Jh,PhoneAuthProvider:Pw,PhoneMultiFactorGenerator:S1,RecaptchaVerifier:Q4,TwitterAuthProvider:ur,Auth:Jv,AuthCredential:Ya,Error:gt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(x4,k4)}X4(pn);var nS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,N1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,I){function P(){}P.prototype=I.prototype,A.D=I.prototype,A.prototype=new P,A.prototype.constructor=A,A.C=function(S,k,N){for(var R=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)R[Z-2]=arguments[Z];return I.prototype[k].apply(S,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,I,P){P||(P=0);var S=Array(16);if(typeof I=="string")for(var k=0;16>k;++k)S[k]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(k=0;16>k;++k)S[k]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=A.g[0],P=A.g[1],k=A.g[2];var N=A.g[3],R=I+(N^P&(k^N))+S[0]+3614090360&4294967295;I=P+(R<<7&4294967295|R>>>25),R=N+(k^I&(P^k))+S[1]+3905402710&4294967295,N=I+(R<<12&4294967295|R>>>20),R=k+(P^N&(I^P))+S[2]+606105819&4294967295,k=N+(R<<17&4294967295|R>>>15),R=P+(I^k&(N^I))+S[3]+3250441966&4294967295,P=k+(R<<22&4294967295|R>>>10),R=I+(N^P&(k^N))+S[4]+4118548399&4294967295,I=P+(R<<7&4294967295|R>>>25),R=N+(k^I&(P^k))+S[5]+1200080426&4294967295,N=I+(R<<12&4294967295|R>>>20),R=k+(P^N&(I^P))+S[6]+2821735955&4294967295,k=N+(R<<17&4294967295|R>>>15),R=P+(I^k&(N^I))+S[7]+4249261313&4294967295,P=k+(R<<22&4294967295|R>>>10),R=I+(N^P&(k^N))+S[8]+1770035416&4294967295,I=P+(R<<7&4294967295|R>>>25),R=N+(k^I&(P^k))+S[9]+2336552879&4294967295,N=I+(R<<12&4294967295|R>>>20),R=k+(P^N&(I^P))+S[10]+4294925233&4294967295,k=N+(R<<17&4294967295|R>>>15),R=P+(I^k&(N^I))+S[11]+2304563134&4294967295,P=k+(R<<22&4294967295|R>>>10),R=I+(N^P&(k^N))+S[12]+1804603682&4294967295,I=P+(R<<7&4294967295|R>>>25),R=N+(k^I&(P^k))+S[13]+4254626195&4294967295,N=I+(R<<12&4294967295|R>>>20),R=k+(P^N&(I^P))+S[14]+2792965006&4294967295,k=N+(R<<17&4294967295|R>>>15),R=P+(I^k&(N^I))+S[15]+1236535329&4294967295,P=k+(R<<22&4294967295|R>>>10),R=I+(k^N&(P^k))+S[1]+4129170786&4294967295,I=P+(R<<5&4294967295|R>>>27),R=N+(P^k&(I^P))+S[6]+3225465664&4294967295,N=I+(R<<9&4294967295|R>>>23),R=k+(I^P&(N^I))+S[11]+643717713&4294967295,k=N+(R<<14&4294967295|R>>>18),R=P+(N^I&(k^N))+S[0]+3921069994&4294967295,P=k+(R<<20&4294967295|R>>>12),R=I+(k^N&(P^k))+S[5]+3593408605&4294967295,I=P+(R<<5&4294967295|R>>>27),R=N+(P^k&(I^P))+S[10]+38016083&4294967295,N=I+(R<<9&4294967295|R>>>23),R=k+(I^P&(N^I))+S[15]+3634488961&4294967295,k=N+(R<<14&4294967295|R>>>18),R=P+(N^I&(k^N))+S[4]+3889429448&4294967295,P=k+(R<<20&4294967295|R>>>12),R=I+(k^N&(P^k))+S[9]+568446438&4294967295,I=P+(R<<5&4294967295|R>>>27),R=N+(P^k&(I^P))+S[14]+3275163606&4294967295,N=I+(R<<9&4294967295|R>>>23),R=k+(I^P&(N^I))+S[3]+4107603335&4294967295,k=N+(R<<14&4294967295|R>>>18),R=P+(N^I&(k^N))+S[8]+1163531501&4294967295,P=k+(R<<20&4294967295|R>>>12),R=I+(k^N&(P^k))+S[13]+2850285829&4294967295,I=P+(R<<5&4294967295|R>>>27),R=N+(P^k&(I^P))+S[2]+4243563512&4294967295,N=I+(R<<9&4294967295|R>>>23),R=k+(I^P&(N^I))+S[7]+1735328473&4294967295,k=N+(R<<14&4294967295|R>>>18),R=P+(N^I&(k^N))+S[12]+2368359562&4294967295,P=k+(R<<20&4294967295|R>>>12),R=I+(P^k^N)+S[5]+4294588738&4294967295,I=P+(R<<4&4294967295|R>>>28),R=N+(I^P^k)+S[8]+2272392833&4294967295,N=I+(R<<11&4294967295|R>>>21),R=k+(N^I^P)+S[11]+1839030562&4294967295,k=N+(R<<16&4294967295|R>>>16),R=P+(k^N^I)+S[14]+4259657740&4294967295,P=k+(R<<23&4294967295|R>>>9),R=I+(P^k^N)+S[1]+2763975236&4294967295,I=P+(R<<4&4294967295|R>>>28),R=N+(I^P^k)+S[4]+1272893353&4294967295,N=I+(R<<11&4294967295|R>>>21),R=k+(N^I^P)+S[7]+4139469664&4294967295,k=N+(R<<16&4294967295|R>>>16),R=P+(k^N^I)+S[10]+3200236656&4294967295,P=k+(R<<23&4294967295|R>>>9),R=I+(P^k^N)+S[13]+681279174&4294967295,I=P+(R<<4&4294967295|R>>>28),R=N+(I^P^k)+S[0]+3936430074&4294967295,N=I+(R<<11&4294967295|R>>>21),R=k+(N^I^P)+S[3]+3572445317&4294967295,k=N+(R<<16&4294967295|R>>>16),R=P+(k^N^I)+S[6]+76029189&4294967295,P=k+(R<<23&4294967295|R>>>9),R=I+(P^k^N)+S[9]+3654602809&4294967295,I=P+(R<<4&4294967295|R>>>28),R=N+(I^P^k)+S[12]+3873151461&4294967295,N=I+(R<<11&4294967295|R>>>21),R=k+(N^I^P)+S[15]+530742520&4294967295,k=N+(R<<16&4294967295|R>>>16),R=P+(k^N^I)+S[2]+3299628645&4294967295,P=k+(R<<23&4294967295|R>>>9),R=I+(k^(P|~N))+S[0]+4096336452&4294967295,I=P+(R<<6&4294967295|R>>>26),R=N+(P^(I|~k))+S[7]+1126891415&4294967295,N=I+(R<<10&4294967295|R>>>22),R=k+(I^(N|~P))+S[14]+2878612391&4294967295,k=N+(R<<15&4294967295|R>>>17),R=P+(N^(k|~I))+S[5]+4237533241&4294967295,P=k+(R<<21&4294967295|R>>>11),R=I+(k^(P|~N))+S[12]+1700485571&4294967295,I=P+(R<<6&4294967295|R>>>26),R=N+(P^(I|~k))+S[3]+2399980690&4294967295,N=I+(R<<10&4294967295|R>>>22),R=k+(I^(N|~P))+S[10]+4293915773&4294967295,k=N+(R<<15&4294967295|R>>>17),R=P+(N^(k|~I))+S[1]+2240044497&4294967295,P=k+(R<<21&4294967295|R>>>11),R=I+(k^(P|~N))+S[8]+1873313359&4294967295,I=P+(R<<6&4294967295|R>>>26),R=N+(P^(I|~k))+S[15]+4264355552&4294967295,N=I+(R<<10&4294967295|R>>>22),R=k+(I^(N|~P))+S[6]+2734768916&4294967295,k=N+(R<<15&4294967295|R>>>17),R=P+(N^(k|~I))+S[13]+1309151649&4294967295,P=k+(R<<21&4294967295|R>>>11),R=I+(k^(P|~N))+S[4]+4149444226&4294967295,I=P+(R<<6&4294967295|R>>>26),R=N+(P^(I|~k))+S[11]+3174756917&4294967295,N=I+(R<<10&4294967295|R>>>22),R=k+(I^(N|~P))+S[2]+718787259&4294967295,k=N+(R<<15&4294967295|R>>>17),R=P+(N^(k|~I))+S[9]+3951481745&4294967295,A.g[0]=A.g[0]+I&4294967295,A.g[1]=A.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,A.g[2]=A.g[2]+k&4294967295,A.g[3]=A.g[3]+N&4294967295}r.prototype.u=function(A,I){I===void 0&&(I=A.length);for(var P=I-this.blockSize,S=this.B,k=this.h,N=0;N<I;){if(k==0)for(;N<=P;)i(this,A,N),N+=this.blockSize;if(typeof A=="string"){for(;N<I;)if(S[k++]=A.charCodeAt(N++),k==this.blockSize){i(this,S),k=0;break}}else for(;N<I;)if(S[k++]=A[N++],k==this.blockSize){i(this,S),k=0;break}}this.h=k,this.o+=I},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var I=1;I<A.length-8;++I)A[I]=0;var P=8*this.o;for(I=A.length-8;I<A.length;++I)A[I]=P&255,P/=256;for(this.u(A),A=Array(16),I=P=0;4>I;++I)for(var S=0;32>S;S+=8)A[P++]=this.g[I]>>>S&255;return A};function s(A,I){var P=a;return Object.prototype.hasOwnProperty.call(P,A)?P[A]:P[A]=I(A)}function o(A,I){this.h=I;for(var P=[],S=!0,k=A.length-1;0<=k;k--){var N=A[k]|0;S&&N==I||(P[k]=N,S=!1)}this.g=P}var a={};function l(A){return-128<=A&&128>A?s(A,function(I){return new o([I|0],0>I?-1:0)}):new o([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return h;if(0>A)return T(u(-A));for(var I=[],P=1,S=0;A>=P;S++)I[S]=A/P|0,P*=4294967296;return new o(I,0)}function d(A,I){if(A.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A.charAt(0)=="-")return T(d(A.substring(1),I));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=u(Math.pow(I,8)),S=h,k=0;k<A.length;k+=8){var N=Math.min(8,A.length-k),R=parseInt(A.substring(k,k+N),I);8>N?(N=u(Math.pow(I,N)),S=S.j(N).add(u(R))):(S=S.j(P),S=S.add(u(R)))}return S}var h=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-T(this).m();for(var A=0,I=1,P=0;P<this.g.length;P++){var S=this.i(P);A+=(0<=S?S:4294967296+S)*I,I*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(E(this))return"-"+T(this).toString(A);for(var I=u(Math.pow(A,6)),P=this,S="";;){var k=C(P,I).g;P=m(P,k.j(I));var N=((0<P.g.length?P.g[0]:P.h)>>>0).toString(A);if(P=k,_(P))return N+S;for(;6>N.length;)N="0"+N;S=N+S}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(var I=0;I<A.g.length;I++)if(A.g[I]!=0)return!1;return!0}function E(A){return A.h==-1}t.l=function(A){return A=m(this,A),E(A)?-1:_(A)?0:1};function T(A){for(var I=A.g.length,P=[],S=0;S<I;S++)P[S]=~A.g[S];return new o(P,~A.h).add(f)}t.abs=function(){return E(this)?T(this):this},t.add=function(A){for(var I=Math.max(this.g.length,A.g.length),P=[],S=0,k=0;k<=I;k++){var N=S+(this.i(k)&65535)+(A.i(k)&65535),R=(N>>>16)+(this.i(k)>>>16)+(A.i(k)>>>16);S=R>>>16,N&=65535,R&=65535,P[k]=R<<16|N}return new o(P,P[P.length-1]&-2147483648?-1:0)};function m(A,I){return A.add(T(I))}t.j=function(A){if(_(this)||_(A))return h;if(E(this))return E(A)?T(this).j(T(A)):T(T(this).j(A));if(E(A))return T(this.j(T(A)));if(0>this.l(g)&&0>A.l(g))return u(this.m()*A.m());for(var I=this.g.length+A.g.length,P=[],S=0;S<2*I;S++)P[S]=0;for(S=0;S<this.g.length;S++)for(var k=0;k<A.g.length;k++){var N=this.i(S)>>>16,R=this.i(S)&65535,Z=A.i(k)>>>16,ie=A.i(k)&65535;P[2*S+2*k]+=R*ie,v(P,2*S+2*k),P[2*S+2*k+1]+=N*ie,v(P,2*S+2*k+1),P[2*S+2*k+1]+=R*Z,v(P,2*S+2*k+1),P[2*S+2*k+2]+=N*Z,v(P,2*S+2*k+2)}for(S=0;S<I;S++)P[S]=P[2*S+1]<<16|P[2*S];for(S=I;S<2*I;S++)P[S]=0;return new o(P,0)};function v(A,I){for(;(A[I]&65535)!=A[I];)A[I+1]+=A[I]>>>16,A[I]&=65535,I++}function w(A,I){this.g=A,this.h=I}function C(A,I){if(_(I))throw Error("division by zero");if(_(A))return new w(h,h);if(E(A))return I=C(T(A),I),new w(T(I.g),T(I.h));if(E(I))return I=C(A,T(I)),new w(T(I.g),I.h);if(30<A.g.length){if(E(A)||E(I))throw Error("slowDivide_ only works with positive integers.");for(var P=f,S=I;0>=S.l(A);)P=O(P),S=O(S);var k=D(P,1),N=D(S,1);for(S=D(S,2),P=D(P,2);!_(S);){var R=N.add(S);0>=R.l(A)&&(k=k.add(P),N=R),S=D(S,1),P=D(P,1)}return I=m(A,k.j(I)),new w(k,I)}for(k=h;0<=A.l(I);){for(P=Math.max(1,Math.floor(A.m()/I.m())),S=Math.ceil(Math.log(P)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),N=u(P),R=N.j(I);E(R)||0<R.l(A);)P-=S,N=u(P),R=N.j(I);_(N)&&(N=f),k=k.add(N),A=m(A,R)}return new w(k,A)}t.A=function(A){return C(this,A).h},t.and=function(A){for(var I=Math.max(this.g.length,A.g.length),P=[],S=0;S<I;S++)P[S]=this.i(S)&A.i(S);return new o(P,this.h&A.h)},t.or=function(A){for(var I=Math.max(this.g.length,A.g.length),P=[],S=0;S<I;S++)P[S]=this.i(S)|A.i(S);return new o(P,this.h|A.h)},t.xor=function(A){for(var I=Math.max(this.g.length,A.g.length),P=[],S=0;S<I;S++)P[S]=this.i(S)^A.i(S);return new o(P,this.h^A.h)};function O(A){for(var I=A.g.length+1,P=[],S=0;S<I;S++)P[S]=A.i(S)<<1|A.i(S-1)>>>31;return new o(P,A.h)}function D(A,I){var P=I>>5;I%=32;for(var S=A.g.length-P,k=[],N=0;N<S;N++)k[N]=0<I?A.i(N+P)>>>I|A.i(N+P+1)<<32-I:A.i(N+P);return new o(k,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,N1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,$s=o}).apply(typeof nS<"u"?nS:typeof self<"u"?self:typeof window<"u"?window:{});var bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O1,D1,Zl,L1,nh,Zv,M1,V1,F1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,y){return c==Array.prototype||c==Object.prototype||(c[p]=y.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof bd=="object"&&bd];for(var p=0;p<c.length;++p){var y=c[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(c,p){if(p)e:{var y=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var L=c[b];if(!(L in y))break e;y=y[L]}c=c[c.length-1],b=y[c],p=p(b),p!=b&&p!=null&&e(y,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var y=0,b=!1,L={next:function(){if(!b&&y<c.length){var U=y++;return{value:p(U,c[U]),done:!1}}return b=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(c){return c||function(){return s(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function d(c,p,y){return c.call.apply(c.bind,arguments)}function h(c,p,y){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,b),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function f(c,p,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function g(c,p){var y=Array.prototype.slice.call(arguments,1);return function(){var b=y.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function _(c,p){function y(){}y.prototype=p.prototype,c.aa=p.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(b,L,U){for(var G=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)G[Pe-2]=arguments[Pe];return p.prototype[L].apply(b,G)}}function E(c){const p=c.length;if(0<p){const y=Array(p);for(let b=0;b<p;b++)y[b]=c[b];return y}return[]}function T(c,p){for(let y=1;y<arguments.length;y++){const b=arguments[y];if(l(b)){const L=c.length||0,U=b.length||0;c.length=L+U;for(let G=0;G<U;G++)c[L+G]=b[G]}else c.push(b)}}class m{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function v(c){return/^[\s\xa0]*$/.test(c)}function w(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function C(c){return C[" "](c),c}C[" "]=function(){};var O=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function D(c,p,y){for(const b in c)p.call(y,c[b],b,c)}function A(c,p){for(const y in c)p.call(void 0,c[y],y,c)}function I(c){const p={};for(const y in c)p[y]=c[y];return p}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(c,p){let y,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(y in b)c[y]=b[y];for(let U=0;U<P.length;U++)y=P[U],Object.prototype.hasOwnProperty.call(b,y)&&(c[y]=b[y])}}function k(c){var p=1;c=c.split(":");const y=[];for(;0<p&&c.length;)y.push(c.shift()),p--;return c.length&&y.push(c.join(":")),y}function N(c){a.setTimeout(()=>{throw c},0)}function R(){var c=H;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class Z{constructor(){this.h=this.g=null}add(p,y){const b=ie.get();b.set(p,y),this.h?this.h.next=b:this.g=b,this.h=b}}var ie=new m(()=>new Se,c=>c.reset());class Se{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,$=!1,H=new Z,Q=()=>{const c=a.Promise.resolve(void 0);Be=()=>{c.then(oe)}};var oe=()=>{for(var c;c=R();){try{c.h.call(c.g)}catch(y){N(y)}var p=ie;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}$=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var $t=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};a.addEventListener("test",y,p),a.removeEventListener("test",y,p)}catch{}return c}();function Le(c,p){if(Ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(O){e:{try{C(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else y=="mouseover"?p=c.fromElement:y=="mouseout"&&(p=c.toElement);this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Bt[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Le.aa.h.call(this)}}_(Le,Ee);var Bt={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var zn="closure_listenable_"+(1e6*Math.random()|0),tm=0;function al(c,p,y,b,L){this.listener=c,this.proxy=null,this.src=p,this.type=y,this.capture=!!b,this.ha=L,this.key=++tm,this.da=this.fa=!1}function ii(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function wo(c){this.src=c,this.g={},this.h=0}wo.prototype.add=function(c,p,y,b,L){var U=c.toString();c=this.g[U],c||(c=this.g[U]=[],this.h++);var G=ds(c,p,b,L);return-1<G?(p=c[G],y||(p.fa=!1)):(p=new al(p,this.src,U,!!b,L),p.fa=y,c.push(p)),p};function Eo(c,p){var y=p.type;if(y in c.g){var b=c.g[y],L=Array.prototype.indexOf.call(b,p,void 0),U;(U=0<=L)&&Array.prototype.splice.call(b,L,1),U&&(ii(p),c.g[y].length==0&&(delete c.g[y],c.h--))}}function ds(c,p,y,b){for(var L=0;L<c.length;++L){var U=c[L];if(!U.da&&U.listener==p&&U.capture==!!y&&U.ha==b)return L}return-1}var si="closure_lm_"+(1e6*Math.random()|0),Ce={};function ll(c,p,y,b,L){if(Array.isArray(p)){for(var U=0;U<p.length;U++)ll(c,p[U],y,b,L);return null}return y=FE(y),c&&c[zn]?c.K(p,y,u(b)?!!b.capture:!!b,L):ul(c,p,y,!1,b,L)}function ul(c,p,y,b,L,U){if(!p)throw Error("Invalid event type");var G=u(L)?!!L.capture:!!L,Pe=rm(c);if(Pe||(c[si]=Pe=new wo(c)),y=Pe.add(p,y,b,G,U),y.proxy)return y;if(b=oO(),y.proxy=b,b.src=c,b.listener=y,c.addEventListener)$t||(L=G),L===void 0&&(L=!1),c.addEventListener(p.toString(),b,L);else if(c.attachEvent)c.attachEvent(VE(p.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return y}function oO(){function c(y){return p.call(c.src,c.listener,y)}const p=aO;return c}function ME(c,p,y,b,L){if(Array.isArray(p))for(var U=0;U<p.length;U++)ME(c,p[U],y,b,L);else b=u(b)?!!b.capture:!!b,y=FE(y),c&&c[zn]?(c=c.i,p=String(p).toString(),p in c.g&&(U=c.g[p],y=ds(U,y,b,L),-1<y&&(ii(U[y]),Array.prototype.splice.call(U,y,1),U.length==0&&(delete c.g[p],c.h--)))):c&&(c=rm(c))&&(p=c.g[p.toString()],c=-1,p&&(c=ds(p,y,b,L)),(y=-1<c?p[c]:null)&&nm(y))}function nm(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[zn])Eo(p.i,c);else{var y=c.type,b=c.proxy;p.removeEventListener?p.removeEventListener(y,b,c.capture):p.detachEvent?p.detachEvent(VE(y),b):p.addListener&&p.removeListener&&p.removeListener(b),(y=rm(p))?(Eo(y,c),y.h==0&&(y.src=null,p[si]=null)):ii(c)}}}function VE(c){return c in Ce?Ce[c]:Ce[c]="on"+c}function aO(c,p){if(c.da)c=!0;else{p=new Le(p,this);var y=c.listener,b=c.ha||c.src;c.fa&&nm(c),c=y.call(b,p)}return c}function rm(c){return c=c[si],c instanceof wo?c:null}var im="__closure_events_fn_"+(1e9*Math.random()>>>0);function FE(c){return typeof c=="function"?c:(c[im]||(c[im]=function(p){return c.handleEvent(p)}),c[im])}function xt(){ae.call(this),this.i=new wo(this),this.M=this,this.F=null}_(xt,ae),xt.prototype[zn]=!0,xt.prototype.removeEventListener=function(c,p,y,b){ME(this,c,p,y,b)};function jt(c,p){var y,b=c.F;if(b)for(y=[];b;b=b.F)y.push(b);if(c=c.M,b=p.type||p,typeof p=="string")p=new Ee(p,c);else if(p instanceof Ee)p.target=p.target||c;else{var L=p;p=new Ee(b,c),S(p,L)}if(L=!0,y)for(var U=y.length-1;0<=U;U--){var G=p.g=y[U];L=Wc(G,b,!0,p)&&L}if(G=p.g=c,L=Wc(G,b,!0,p)&&L,L=Wc(G,b,!1,p)&&L,y)for(U=0;U<y.length;U++)G=p.g=y[U],L=Wc(G,b,!1,p)&&L}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var y=c.g[p],b=0;b<y.length;b++)ii(y[b]);delete c.g[p],c.h--}}this.F=null},xt.prototype.K=function(c,p,y,b){return this.i.add(String(c),p,!1,y,b)},xt.prototype.L=function(c,p,y,b){return this.i.add(String(c),p,!0,y,b)};function Wc(c,p,y,b){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,U=0;U<p.length;++U){var G=p[U];if(G&&!G.da&&G.capture==y){var Pe=G.listener,Tt=G.ha||G.src;G.fa&&Eo(c.i,G),L=Pe.call(Tt,b)!==!1&&L}}return L&&!b.defaultPrevented}function UE(c,p,y){if(typeof c=="function")y&&(c=f(c,y));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function $E(c){c.g=UE(()=>{c.g=null,c.i&&(c.i=!1,$E(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class lO extends ae{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:$E(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cl(c){ae.call(this),this.h=c,this.g={}}_(cl,ae);var BE=[];function jE(c){D(c.g,function(p,y){this.g.hasOwnProperty(y)&&nm(p)},c),c.g={}}cl.prototype.N=function(){cl.aa.N.call(this),jE(this)},cl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sm=a.JSON.stringify,uO=a.JSON.parse,cO=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function om(){}om.prototype.h=null;function zE(c){return c.h||(c.h=c.i())}function qE(){}var dl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function am(){Ee.call(this,"d")}_(am,Ee);function lm(){Ee.call(this,"c")}_(lm,Ee);var hs={},GE=null;function Hc(){return GE=GE||new xt}hs.La="serverreachability";function WE(c){Ee.call(this,hs.La,c)}_(WE,Ee);function hl(c){const p=Hc();jt(p,new WE(p))}hs.STAT_EVENT="statevent";function HE(c,p){Ee.call(this,hs.STAT_EVENT,c),this.stat=p}_(HE,Ee);function zt(c){const p=Hc();jt(p,new HE(p,c))}hs.Ma="timingevent";function KE(c,p){Ee.call(this,hs.Ma,c),this.size=p}_(KE,Ee);function fl(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function pl(){this.g=!0}pl.prototype.xa=function(){this.g=!1};function dO(c,p,y,b,L,U){c.info(function(){if(c.g)if(U)for(var G="",Pe=U.split("&"),Tt=0;Tt<Pe.length;Tt++){var me=Pe[Tt].split("=");if(1<me.length){var kt=me[0];me=me[1];var Nt=kt.split("_");G=2<=Nt.length&&Nt[1]=="type"?G+(kt+"="+me+"&"):G+(kt+"=redacted&")}}else G=null;else G=U;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+p+`
`+y+`
`+G})}function hO(c,p,y,b,L,U,G){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+p+`
`+y+`
`+U+" "+G})}function Io(c,p,y,b){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+pO(c,y)+(b?" "+b:"")})}function fO(c,p){c.info(function(){return"TIMEOUT: "+p})}pl.prototype.info=function(){};function pO(c,p){if(!c.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var b=y[c];if(!(2>b.length)){var L=b[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return sm(y)}catch{return p}}var Kc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},QE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},um;function Qc(){}_(Qc,om),Qc.prototype.g=function(){return new XMLHttpRequest},Qc.prototype.i=function(){return{}},um=new Qc;function oi(c,p,y,b){this.j=c,this.i=p,this.l=y,this.R=b||1,this.U=new cl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new YE}function YE(){this.i=null,this.g="",this.h=!1}var XE={},cm={};function dm(c,p,y){c.L=1,c.v=Zc(br(p)),c.m=y,c.P=!0,JE(c,null)}function JE(c,p){c.F=Date.now(),Yc(c),c.A=br(c.v);var y=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),hI(y.i,"t",b),c.C=0,y=c.j.J,c.h=new YE,c.g=xI(c.j,y?p:null,!c.m),0<c.O&&(c.M=new lO(f(c.Y,c,c.g),c.O)),p=c.U,y=c.g,b=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(BE[0]=L.toString()),L=BE);for(var U=0;U<L.length;U++){var G=ll(y,L[U],b||p.handleEvent,!1,p.h||p);if(!G)break;p.g[G.key]=G}p=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),hl(),dO(c.i,c.u,c.A,c.l,c.R,c.m)}oi.prototype.ca=function(c){c=c.target;const p=this.M;p&&Ar(c)==3?p.j():this.Y(c)},oi.prototype.Y=function(c){try{if(c==this.g)e:{const Nt=Ar(this.g);var p=this.g.Ba();const Po=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||_I(this.g)))){this.J||Nt!=4||p==7||(p==8||0>=Po?hl(3):hl(2)),hm(this);var y=this.g.Z();this.X=y;t:if(ZE(this)){var b=_I(this.g);c="";var L=b.length,U=Ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fs(this),ml(this);var G="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(b[p],{stream:!(U&&p==L-1)});b.length=0,this.h.g+=c,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=y==200,hO(this.i,this.u,this.A,this.l,this.R,Nt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,Tt=this.g;if((Pe=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Pe)){var me=Pe;break t}}me=null}if(y=me)Io(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fm(this,y);else{this.o=!1,this.s=3,zt(12),fs(this),ml(this);break e}}if(this.P){y=!0;let qn;for(;!this.J&&this.C<G.length;)if(qn=mO(this,G),qn==cm){Nt==4&&(this.s=4,zt(14),y=!1),Io(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==XE){this.s=4,zt(15),Io(this.i,this.l,G,"[Invalid Chunk]"),y=!1;break}else Io(this.i,this.l,qn,null),fm(this,qn);if(ZE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||G.length!=0||this.h.h||(this.s=1,zt(16),y=!1),this.o=this.o&&y,!y)Io(this.i,this.l,G,"[Invalid Chunked Response]"),fs(this),ml(this);else if(0<G.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),_m(kt),kt.M=!0,zt(11))}}else Io(this.i,this.l,G,null),fm(this,G);Nt==4&&fs(this),this.o&&!this.J&&(Nt==4?bI(this.j,this):(this.o=!1,Yc(this)))}else NO(this.g),y==400&&0<G.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),fs(this),ml(this)}}}catch{}finally{}};function ZE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function mO(c,p){var y=c.C,b=p.indexOf(`
`,y);return b==-1?cm:(y=Number(p.substring(y,b)),isNaN(y)?XE:(b+=1,b+y>p.length?cm:(p=p.slice(b,b+y),c.C=b+y,p)))}oi.prototype.cancel=function(){this.J=!0,fs(this)};function Yc(c){c.S=Date.now()+c.I,eI(c,c.I)}function eI(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=fl(f(c.ba,c),p)}function hm(c){c.B&&(a.clearTimeout(c.B),c.B=null)}oi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(fO(this.i,this.A),this.L!=2&&(hl(),zt(17)),fs(this),this.s=2,ml(this)):eI(this,this.S-c)};function ml(c){c.j.G==0||c.J||bI(c.j,c)}function fs(c){hm(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,jE(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function fm(c,p){try{var y=c.j;if(y.G!=0&&(y.g==c||pm(y.h,c))){if(!c.K&&pm(y.h,c)&&y.G==3){try{var b=y.Da.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)id(y),nd(y);else break e;ym(y),zt(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=fl(f(y.Za,y),6e3));if(1>=rI(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ms(y,11)}else if((c.K||y.g==c)&&id(y),!v(p))for(L=y.Da.g.parse(p),p=0;p<L.length;p++){let me=L[p];if(y.T=me[0],me=me[1],y.G==2)if(me[0]=="c"){y.K=me[1],y.ia=me[2];const kt=me[3];kt!=null&&(y.la=kt,y.j.info("VER="+y.la));const Nt=me[4];Nt!=null&&(y.Aa=Nt,y.j.info("SVER="+y.Aa));const Po=me[5];Po!=null&&typeof Po=="number"&&0<Po&&(b=1.5*Po,y.L=b,y.j.info("backChannelRequestTimeoutMs_="+b)),b=y;const qn=c.g;if(qn){const od=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(od){var U=b.h;U.g||od.indexOf("spdy")==-1&&od.indexOf("quic")==-1&&od.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(mm(U,U.h),U.h=null))}if(b.D){const wm=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;wm&&(b.ya=wm,xe(b.I,b.D,wm))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),b=y;var G=c;if(b.qa=CI(b,b.J?b.ia:null,b.W),G.K){iI(b.h,G);var Pe=G,Tt=b.L;Tt&&(Pe.I=Tt),Pe.B&&(hm(Pe),Yc(Pe)),b.g=G}else SI(b);0<y.i.length&&rd(y)}else me[0]!="stop"&&me[0]!="close"||ms(y,7);else y.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?ms(y,7):vm(y):me[0]!="noop"&&y.l&&y.l.ta(me),y.v=0)}}hl(4)}catch{}}var gO=class{constructor(c,p){this.g=c,this.map=p}};function tI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function rI(c){return c.h?1:c.g?c.g.size:0}function pm(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function mm(c,p){c.g?c.g.add(p):c.h=p}function iI(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}tI.prototype.cancel=function(){if(this.i=sI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function sI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const y of c.g.values())p=p.concat(y.D);return p}return E(c.i)}function vO(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],y=c.length,b=0;b<y;b++)p.push(c[b]);return p}p=[],y=0;for(b in c)p[y++]=c[b];return p}function yO(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var y=0;y<c;y++)p.push(y);return p}p=[],y=0;for(const b in c)p[y++]=b;return p}}}function oI(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var y=yO(c),b=vO(c),L=b.length,U=0;U<L;U++)p.call(void 0,b[U],y&&y[U],c)}var aI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _O(c,p){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var b=c[y].indexOf("="),L=null;if(0<=b){var U=c[y].substring(0,b);L=c[y].substring(b+1)}else U=c[y];p(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ps(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ps){this.h=c.h,Xc(this,c.j),this.o=c.o,this.g=c.g,Jc(this,c.s),this.l=c.l;var p=c.i,y=new yl;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),lI(this,y),this.m=c.m}else c&&(p=String(c).match(aI))?(this.h=!1,Xc(this,p[1]||"",!0),this.o=gl(p[2]||""),this.g=gl(p[3]||"",!0),Jc(this,p[4]),this.l=gl(p[5]||"",!0),lI(this,p[6]||"",!0),this.m=gl(p[7]||"")):(this.h=!1,this.i=new yl(null,this.h))}ps.prototype.toString=function(){var c=[],p=this.j;p&&c.push(vl(p,uI,!0),":");var y=this.g;return(y||p=="file")&&(c.push("//"),(p=this.o)&&c.push(vl(p,uI,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(vl(y,y.charAt(0)=="/"?IO:EO,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",vl(y,SO)),c.join("")};function br(c){return new ps(c)}function Xc(c,p,y){c.j=y?gl(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Jc(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function lI(c,p,y){p instanceof yl?(c.i=p,PO(c.i,c.h)):(y||(p=vl(p,TO)),c.i=new yl(p,c.h))}function xe(c,p,y){c.i.set(p,y)}function Zc(c){return xe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function gl(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function vl(c,p,y){return typeof c=="string"?(c=encodeURI(c).replace(p,wO),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function wO(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var uI=/[#\/\?@]/g,EO=/[#\?:]/g,IO=/[#\?]/g,TO=/[#\?@]/g,SO=/#/g;function yl(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function ai(c){c.g||(c.g=new Map,c.h=0,c.i&&_O(c.i,function(p,y){c.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}t=yl.prototype,t.add=function(c,p){ai(this),this.i=null,c=To(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(p),this.h+=1,this};function cI(c,p){ai(c),p=To(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function dI(c,p){return ai(c),p=To(c,p),c.g.has(p)}t.forEach=function(c,p){ai(this),this.g.forEach(function(y,b){y.forEach(function(L){c.call(p,L,b,this)},this)},this)},t.na=function(){ai(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let b=0;b<p.length;b++){const L=c[b];for(let U=0;U<L.length;U++)y.push(p[b])}return y},t.V=function(c){ai(this);let p=[];if(typeof c=="string")dI(this,c)&&(p=p.concat(this.g.get(To(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)p=p.concat(c[y])}return p},t.set=function(c,p){return ai(this),this.i=null,c=To(this,c),dI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function hI(c,p,y){cI(c,p),0<y.length&&(c.i=null,c.g.set(To(c,p),E(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var b=p[y];const U=encodeURIComponent(String(b)),G=this.V(b);for(b=0;b<G.length;b++){var L=U;G[b]!==""&&(L+="="+encodeURIComponent(String(G[b]))),c.push(L)}}return this.i=c.join("&")};function To(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function PO(c,p){p&&!c.j&&(ai(c),c.i=null,c.g.forEach(function(y,b){var L=b.toLowerCase();b!=L&&(cI(this,b),hI(this,L,y))},c)),c.j=p}function bO(c,p){const y=new pl;if(a.Image){const b=new Image;b.onload=g(li,y,"TestLoadImage: loaded",!0,p,b),b.onerror=g(li,y,"TestLoadImage: error",!1,p,b),b.onabort=g(li,y,"TestLoadImage: abort",!1,p,b),b.ontimeout=g(li,y,"TestLoadImage: timeout",!1,p,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else p(!1)}function AO(c,p){const y=new pl,b=new AbortController,L=setTimeout(()=>{b.abort(),li(y,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:b.signal}).then(U=>{clearTimeout(L),U.ok?li(y,"TestPingServer: ok",!0,p):li(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),li(y,"TestPingServer: error",!1,p)})}function li(c,p,y,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(y)}catch{}}function RO(){this.g=new cO}function CO(c,p,y){const b=y||"";try{oI(c,function(L,U){let G=L;u(L)&&(G=sm(L)),p.push(b+U+"="+encodeURIComponent(G))})}catch(L){throw p.push(b+"type="+encodeURIComponent("_badmap")),L}}function _l(c){this.l=c.Ub||null,this.j=c.eb||!1}_(_l,om),_l.prototype.g=function(){return new ed(this.l,this.j)},_l.prototype.i=function(c){return function(){return c}}({});function ed(c,p){xt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(ed,xt),t=ed.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,El(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wl(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,El(this)),this.g&&(this.readyState=3,El(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function fI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?wl(this):El(this),this.readyState==3&&fI(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,wl(this))},t.Qa=function(c){this.g&&(this.response=c,wl(this))},t.ga=function(){this.g&&wl(this)};function wl(c){c.readyState=4,c.l=null,c.j=null,c.v=null,El(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=p.next();return c.join(`\r
`)};function El(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ed.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function pI(c){let p="";return D(c,function(y,b){p+=b,p+=":",p+=y,p+=`\r
`}),p}function gm(c,p,y){e:{for(b in y){var b=!1;break e}b=!0}b||(y=pI(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):xe(c,p,y))}function He(c){xt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(He,xt);var xO=/^https?$/i,kO=["POST","PUT"];t=He.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,y,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():um.g(),this.v=this.o?zE(this.o):zE(um),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(U){mI(this,U);return}if(c=y||"",y=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)y.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const U of b.keys())y.set(U,b.get(U));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(kO,p,void 0))||b||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,G]of y)this.g.setRequestHeader(U,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yI(this),this.u=!0,this.g.send(c),this.u=!1}catch(U){mI(this,U)}};function mI(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,gI(c),td(c)}function gI(c){c.A||(c.A=!0,jt(c,"complete"),jt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,jt(this,"complete"),jt(this,"abort"),td(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),td(this,!0)),He.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vI(this):this.bb())},t.bb=function(){vI(this)};function vI(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Ar(c)!=4||c.Z()!=2)){if(c.u&&Ar(c)==4)UE(c.Ea,0,c);else if(jt(c,"readystatechange"),Ar(c)==4){c.h=!1;try{const G=c.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var b;if(b=G===0){var L=String(c.D).match(aI)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),b=!xO.test(L?L.toLowerCase():"")}y=b}if(y)jt(c,"complete"),jt(c,"success");else{c.m=6;try{var U=2<Ar(c)?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.Z()+"]",gI(c)}}finally{td(c)}}}}function td(c,p){if(c.g){yI(c);const y=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||jt(c,"ready");try{y.onreadystatechange=b}catch{}}}function yI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Ar(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),uO(p)}};function _I(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function NO(c){const p={};c=(c.g&&2<=Ar(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(v(c[b]))continue;var y=k(c[b]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=p[L]||[];p[L]=U,U.push(y)}A(p,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Il(c,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||p}function wI(c){this.Aa=0,this.i=[],this.j=new pl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Il("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Il("baseRetryDelayMs",5e3,c),this.cb=Il("retryDelaySeedMs",1e4,c),this.Wa=Il("forwardChannelMaxRetries",2,c),this.wa=Il("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new tI(c&&c.concurrentRequestLimit),this.Da=new RO,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wI.prototype,t.la=8,t.G=1,t.connect=function(c,p,y,b){zt(0),this.W=c,this.H=p||{},y&&b!==void 0&&(this.H.OSID=y,this.H.OAID=b),this.F=this.X,this.I=CI(this,null,this.W),rd(this)};function vm(c){if(EI(c),c.G==3){var p=c.U++,y=br(c.I);if(xe(y,"SID",c.K),xe(y,"RID",p),xe(y,"TYPE","terminate"),Tl(c,y),p=new oi(c,c.j,p),p.L=2,p.v=Zc(br(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=p.v,y=!0),y||(p.g=xI(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Yc(p)}RI(c)}function nd(c){c.g&&(_m(c),c.g.cancel(),c.g=null)}function EI(c){nd(c),c.u&&(a.clearTimeout(c.u),c.u=null),id(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function rd(c){if(!nI(c.h)&&!c.s){c.s=!0;var p=c.Ga;Be||Q(),$||(Be(),$=!0),H.add(p,c),c.B=0}}function OO(c,p){return rI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=fl(f(c.Ga,c,p),AI(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new oi(this,this.j,c);let U=this.o;if(this.S&&(U?(U=I(U),S(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var b=this.i[y];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(p+=b,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=TI(this,L,p),y=br(this.I),xe(y,"RID",c),xe(y,"CVER",22),this.D&&xe(y,"X-HTTP-Session-Id",this.D),Tl(this,y),U&&(this.O?p="headers="+encodeURIComponent(String(pI(U)))+"&"+p:this.m&&gm(y,this.m,U)),mm(this.h,L),this.Ua&&xe(y,"TYPE","init"),this.P?(xe(y,"$req",p),xe(y,"SID","null"),L.T=!0,dm(L,y,null)):dm(L,y,p),this.G=2}}else this.G==3&&(c?II(this,c):this.i.length==0||nI(this.h)||II(this))};function II(c,p){var y;p?y=p.l:y=c.U++;const b=br(c.I);xe(b,"SID",c.K),xe(b,"RID",y),xe(b,"AID",c.T),Tl(c,b),c.m&&c.o&&gm(b,c.m,c.o),y=new oi(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),p&&(c.i=p.D.concat(c.i)),p=TI(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),mm(c.h,y),dm(y,b,p)}function Tl(c,p){c.H&&D(c.H,function(y,b){xe(p,b,y)}),c.l&&oI({},function(y,b){xe(p,b,y)})}function TI(c,p,y){y=Math.min(c.i.length,y);var b=c.l?f(c.l.Na,c.l,c):null;e:{var L=c.i;let U=-1;for(;;){const G=["count="+y];U==-1?0<y?(U=L[0].g,G.push("ofs="+U)):U=0:G.push("ofs="+U);let Pe=!0;for(let Tt=0;Tt<y;Tt++){let me=L[Tt].g;const kt=L[Tt].map;if(me-=U,0>me)U=Math.max(0,L[Tt].g-100),Pe=!1;else try{CO(kt,G,"req"+me+"_")}catch{b&&b(kt)}}if(Pe){b=G.join("&");break e}}}return c=c.i.splice(0,y),p.D=c,b}function SI(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;Be||Q(),$||(Be(),$=!0),H.add(p,c),c.v=0}}function ym(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=fl(f(c.Fa,c),AI(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,PI(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=fl(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),nd(this),PI(this))};function _m(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function PI(c){c.g=new oi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=br(c.qa);xe(p,"RID","rpc"),xe(p,"SID",c.K),xe(p,"AID",c.T),xe(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&xe(p,"TO",c.ja),xe(p,"TYPE","xmlhttp"),Tl(c,p),c.m&&c.o&&gm(p,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Zc(br(p)),y.m=null,y.P=!0,JE(y,c)}t.Za=function(){this.C!=null&&(this.C=null,nd(this),ym(this),zt(19))};function id(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function bI(c,p){var y=null;if(c.g==p){id(c),_m(c),c.g=null;var b=2}else if(pm(c.h,p))y=p.D,iI(c.h,p),b=1;else return;if(c.G!=0){if(p.o)if(b==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;b=Hc(),jt(b,new KE(b,y)),rd(c)}else SI(c);else if(L=p.s,L==3||L==0&&0<p.X||!(b==1&&OO(c,p)||b==2&&ym(c)))switch(y&&0<y.length&&(p=c.h,p.i=p.i.concat(y)),L){case 1:ms(c,5);break;case 4:ms(c,10);break;case 3:ms(c,6);break;default:ms(c,2)}}}function AI(c,p){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*p}function ms(c,p){if(c.j.info("Error code "+p),p==2){var y=f(c.fb,c),b=c.Xa;const L=!b;b=new ps(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Xc(b,"https"),Zc(b),L?bO(b.toString(),y):AO(b.toString(),y)}else zt(2);c.G=0,c.l&&c.l.sa(p),RI(c),EI(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function RI(c){if(c.G=0,c.ka=[],c.l){const p=sI(c.h);(p.length!=0||c.i.length!=0)&&(T(c.ka,p),T(c.ka,c.i),c.h.i.length=0,E(c.i),c.i.length=0),c.l.ra()}}function CI(c,p,y){var b=y instanceof ps?br(y):new ps(y);if(b.g!="")p&&(b.g=p+"."+b.g),Jc(b,b.s);else{var L=a.location;b=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var U=new ps(null);b&&Xc(U,b),p&&(U.g=p),L&&Jc(U,L),y&&(U.l=y),b=U}return y=c.D,p=c.ya,y&&p&&xe(b,y,p),xe(b,"VER",c.la),Tl(c,b),b}function xI(c,p,y){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new He(new _l({eb:y})):new He(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kI(){}t=kI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sd(){}sd.prototype.g=function(c,p){return new gn(c,p)};function gn(c,p){xt.call(this),this.g=new wI(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!v(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new So(this)}_(gn,xt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){vm(this.g)},gn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=sm(c),c=y);p.i.push(new gO(p.Ya++,c)),p.G==3&&rd(p)},gn.prototype.N=function(){this.g.l=null,delete this.j,vm(this.g),delete this.g,gn.aa.N.call(this)};function NI(c){am.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const y in p){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}_(NI,am);function OI(){lm.call(this),this.status=1}_(OI,lm);function So(c){this.g=c}_(So,kI),So.prototype.ua=function(){jt(this.g,"a")},So.prototype.ta=function(c){jt(this.g,new NI(c))},So.prototype.sa=function(c){jt(this.g,new OI)},So.prototype.ra=function(){jt(this.g,"b")},sd.prototype.createWebChannel=sd.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,F1=function(){return new sd},V1=function(){return Hc()},M1=hs,Zv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Kc.NO_ERROR=0,Kc.TIMEOUT=8,Kc.HTTP_ERROR=6,nh=Kc,QE.COMPLETE="complete",L1=QE,qE.EventType=dl,dl.OPEN="a",dl.CLOSE="b",dl.ERROR="c",dl.MESSAGE="d",xt.prototype.listen=xt.prototype.K,Zl=qE,D1=_l,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,O1=He}).apply(typeof bd<"u"?bd:typeof self<"u"?self:typeof window<"u"?window:{});const rS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi=new Sc("@firebase/firestore");function Mo(){return Hi.logLevel}function J4(t){Hi.setLogLevel(t)}function j(t,...e){if(Hi.logLevel<=se.DEBUG){const n=e.map(bw);Hi.debug(`Firestore (${Ja}): ${t}`,...n)}}function tt(t,...e){if(Hi.logLevel<=se.ERROR){const n=e.map(bw);Hi.error(`Firestore (${Ja}): ${t}`,...n)}}function nr(t,...e){if(Hi.logLevel<=se.WARN){const n=e.map(bw);Hi.warn(`Firestore (${Ja}): ${t}`,...n)}}function bw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: `+t;throw tt(e),new Error(e)}function ee(t,e){t||Y()}function Z4(t,e){t||Y()}function K(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends gt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class tq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nq{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new yt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ee(typeof r.accessToken=="string"),new U1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new pt(e)}}class rq{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iq{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new rq(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sq{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oq{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ee(typeof n.token=="string"),this.R=n.token,new sq(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aq(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=aq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ne(t,e){return t<e?-1:t>e?1:0}function Ca(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function B1(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new $e(0,0))}static max(){return new te(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ue extends sc{construct(e,n,r){return new ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ue(n)}static emptyPath(){return new ue([])}}const lq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fe extends sc{construct(e,n,r){return new Fe(e,n,r)}static isValidIdentifier(e){return lq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Fe(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new B(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new B(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new B(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fe(n)}static emptyPath(){return new Fe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(ue.fromString(e))}static fromName(e){return new W(ue.fromString(e).popFirst(5))}static empty(){return new W(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new ue(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function ey(t){return t.fields.find(e=>e.kind===2)}function Is(t){return t.fields.filter(e=>e.kind!==2)}nf.UNKNOWN_ID=-1;class rh{constructor(e,n){this.fieldPath=e,this.kind=n}}class oc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new oc(0,Pn.min())}}function j1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new Pn(i,W.empty(),e)}function z1(t){return new Pn(t.readTime,t.key,-1)}class Pn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pn(te.min(),W.empty(),-1)}static max(){return new Pn(te.max(),W.empty(),-1)}}function Aw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function os(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==q1)throw t;j("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new V((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new yt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new mu(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=Rw(r.target.error);this.V.reject(new mu(e,i))}}static open(e,n,r,i){try{return new Rp(n,e.transaction(i,r))}catch(s){throw new mu(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(j("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new cq(n)}}class _r{constructor(e,n,r){this.name=e,this.version=n,this.p=r,_r.S(pe())===12.2&&tt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return j("SimpleDb","Removing database:",e),Ts(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Yu())return!1;if(_r.C())return!0;const e=pe(),n=_r.S(e),r=0<n&&n<10,i=W1(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(j("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new mu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new B(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new B(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new mu(e,o))},i.onupgradeneeded=s=>{j("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{j("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Rp.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),V.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(j("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function W1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class uq{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ts(this.B.delete())}}class mu extends B{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function as(t){return t.name==="IndexedDbTransactionError"}class cq{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(j("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(j("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ts(r)}add(e){return j("SimpleDb","ADD",this.store.name,e,e),Ts(this.store.add(e))}get(e){return Ts(this.store.get(e)).next(n=>(n===void 0&&(n=null),j("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return j("SimpleDb","DELETE",this.store.name,e),Ts(this.store.delete(e))}count(){return j("SimpleDb","COUNT",this.store.name),Ts(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new V((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new V((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){j("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new V((r,i)=>{n.onerror=s=>{const o=Rw(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new V((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new uq(a),u=n(a.primaryKey,a.value,l);if(u instanceof V){const d=u.catch(h=>(l.done(),V.reject(h)));r.push(d)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ts(t){return new V((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=Rw(r.target.error);n(i)}})}let iS=!1;function Rw(t){const e=_r.S(pe());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iS||(iS=!0,setTimeout(()=>{throw r},0)),r}}return t}class dq{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){j("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{j("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){as(n)?j("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await os(n)}await this.X(6e4)})}}class hq{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return V.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return j("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(j("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=z1(s);Aw(o,r)>0&&(r=o)}),new Pn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}an.oe=-1;function Nc(t){return t==null}function ac(t){return t===0&&1/t==-1/0}function H1(t){return typeof t=="number"&&Number.isInteger(t)&&!ac(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sS(e)),e=fq(t.get(n),e);return sS(e)}function fq(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function sS(t){return t+""}function fr(t){const e=t.length;if(ee(e>=2),e===2)return ee(t.charAt(0)===""&&t.charAt(1)===""),ue.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&Y(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Y()}s=o+2}return new ue(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(t,e){return[t,Xt(e)]}function K1(t,e,n){return[t,Xt(e),n]}const pq={},mq=["prefixPath","collectionGroup","readTime","documentId"],gq=["prefixPath","collectionGroup","documentId"],vq=["collectionGroup","readTime","prefixPath","documentId"],yq=["canonicalId","targetId"],_q=["targetId","path"],wq=["path","targetId"],Eq=["collectionId","parent"],Iq=["indexId","uid"],Tq=["uid","sequenceNumber"],Sq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Pq=["indexId","uid","orderedDocumentKey"],bq=["userId","collectionPath","documentId"],Aq=["userId","collectionPath","largestBatchId"],Rq=["userId","collectionGroup","largestBatchId"],Q1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cq=[...Q1,"documentOverlays"],Y1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],X1=Y1,J1=[...X1,"indexConfiguration","indexState","indexEntries"],xq=J1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends G1{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Et(t,e){const n=K(t);return _r.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function mo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Z1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ad(this.root,e,this.comparator,!0)}}class Ad{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Pt.RED,this.left=i??Pt.EMPTY,this.right=s??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Pt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Pt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lS(this.data.getIterator())}getIteratorFrom(e){return new lS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ie)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ie(this.comparator);return n.data=e,n}}class lS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(Fe.comparator)}static empty(){return new ln([])}unionWith(e){let n=new Ie(Fe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ca(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ex("Invalid base64 string: "+s):s}}(e);return new ct(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const Nq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(t){if(ee(!!t),typeof t=="string"){let e=0;const n=Nq.exec(t);if(ee(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ki(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Cw(t){const e=t.mapValue.fields.__previous_value__;return Cp(e)?Cw(e):e}function lc(t){const e=Kr(t.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oq{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Qi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Qi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Qi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sh={nullValue:"NULL_VALUE"};function Js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cp(t)?4:tx(t)?9007199254740991:10:Y()}function Tr(t,e){if(t===e)return!0;const n=Js(t);if(n!==Js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lc(t).isEqual(lc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Kr(i.timestampValue),a=Kr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ki(i.bytesValue).isEqual(Ki(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Qe(i.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Qe(i.integerValue)===Qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Qe(i.doubleValue),a=Qe(s.doubleValue);return o===a?ac(o)===ac(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ca(t.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(aS(o)!==aS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Tr(o[l],a[l])))return!1;return!0}(t,e);default:return Y()}}function uc(t,e){return(t.values||[]).find(n=>Tr(n,e))!==void 0}function Yi(t,e){if(t===e)return 0;const n=Js(t),r=Js(e);if(n!==r)return ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Qe(s.integerValue||s.doubleValue),l=Qe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return uS(t.timestampValue,e.timestampValue);case 4:return uS(lc(t),lc(e));case 5:return ne(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ki(s),l=Ki(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=ne(a[u],l[u]);if(d!==0)return d}return ne(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ne(Qe(s.latitude),Qe(o.latitude));return a!==0?a:ne(Qe(s.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const d=Yi(a[u],l[u]);if(d)return d}return ne(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ai.mapValue&&o===Ai.mapValue)return 0;if(s===Ai.mapValue)return 1;if(o===Ai.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=ne(l[h],d[h]);if(f!==0)return f;const g=Yi(a[l[h]],u[d[h]]);if(g!==0)return g}return ne(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Y()}}function uS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);const n=Kr(t),r=Kr(e),i=ne(n.seconds,r.seconds);return i!==0?i:ne(n.nanos,r.nanos)}function xa(t){return ny(t)}function ny(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ki(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=ny(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${ny(n.fields[o])}`;return i+"}"}(t.mapValue):Y()}function Zs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ry(t){return!!t&&"integerValue"in t}function cc(t){return!!t&&"arrayValue"in t}function cS(t){return!!t&&"nullValue"in t}function dS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function oh(t){return!!t&&"mapValue"in t}function gu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return mo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=gu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Dq(t){return"nullValue"in t?sh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Zs(Qi.empty(),W.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Y()}function Lq(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Zs(Qi.empty(),W.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ai:Y()}function hS(t,e){const n=Yi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function fS(t,e){const n=Yi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.value=e}static empty(){return new bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gu(n)}setAll(e){let n=Fe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=gu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){mo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bt(gu(this.value))}}function nx(t){const e=[];return mo(t.fields,(n,r)=>{const i=new Fe([n]);if(oh(r)){const s=nx(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ne(e,0,te.min(),te.min(),te.min(),bt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ne(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new Ne(e,2,n,te.min(),te.min(),bt.empty(),0)}static newUnknownDocument(e,n){return new Ne(e,3,n,te.min(),te.min(),bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ne&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ne(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this.position=e,this.inclusive=n}}function pS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Yi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function mS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n="asc"){this.field=e,this.dir=n}}function Mq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{}class ce extends rx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Vq(e,n,r):n==="array-contains"?new $q(e,r):n==="in"?new ux(e,r):n==="not-in"?new Bq(e,r):n==="array-contains-any"?new jq(e,r):new ce(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Fq(e,r):new Uq(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Yi(n,this.value)):n!==null&&Js(this.value)===Js(n)&&this.matchesComparison(Yi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ye extends rx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ye(e,n)}matches(e){return ka(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ka(t){return t.op==="and"}function iy(t){return t.op==="or"}function xw(t){return ix(t)&&ka(t)}function ix(t){for(const e of t.filters)if(e instanceof ye)return!1;return!0}function sy(t){if(t instanceof ce)return t.field.canonicalString()+t.op.toString()+xa(t.value);if(xw(t))return t.filters.map(e=>sy(e)).join(",");{const e=t.filters.map(n=>sy(n)).join(",");return`${t.op}(${e})`}}function sx(t,e){return t instanceof ce?function(r,i){return i instanceof ce&&r.op===i.op&&r.field.isEqual(i.field)&&Tr(r.value,i.value)}(t,e):t instanceof ye?function(r,i){return i instanceof ye&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&sx(o,i.filters[a]),!0):!1}(t,e):void Y()}function ox(t,e){const n=t.filters.concat(e);return ye.create(n,t.op)}function ax(t){return t instanceof ce?function(n){return`${n.field.canonicalString()} ${n.op} ${xa(n.value)}`}(t):t instanceof ye?function(n){return n.op.toString()+" {"+n.getFilters().map(ax).join(" ,")+"}"}(t):"Filter"}class Vq extends ce{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class Fq extends ce{constructor(e,n){super(e,"in",n),this.keys=lx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Uq extends ce{constructor(e,n){super(e,"not-in",n),this.keys=lx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function lx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class $q extends ce{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cc(n)&&uc(n.arrayValue,this.value)}}class ux extends ce{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&uc(this.value.arrayValue,n)}}class Bq extends ce{constructor(e,n){super(e,"not-in",n)}matches(e){if(uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!uc(this.value.arrayValue,n)}}class jq extends ce{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>uc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function oy(t,e=null,n=[],r=[],i=null,s=null,o=null){return new zq(t,e,n,r,i,s,o)}function eo(t){const e=K(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Nc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xa(r)).join(",")),e.ue=n}return e.ue}function Oc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Mq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!mS(t.startAt,e.startAt)&&mS(t.endAt,e.endAt)}function rf(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function sf(t,e){return t.filters.filter(n=>n instanceof ce&&n.field.isEqual(e))}function gS(t,e,n){let r=sh,i=!0;for(const s of sf(t,e)){let o=sh,a=!0;switch(s.op){case"<":case"<=":o=Dq(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=sh}hS({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];hS({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function vS(t,e,n){let r=Ai,i=!0;for(const s of sf(t,e)){let o=Ai,a=!0;switch(s.op){case">=":case">":o=Lq(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ai}fS({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];fS({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cx(t,e,n,r,i,s,o,a){return new ei(t,e,n,r,i,s,o,a)}function Za(t){return new ei(t)}function yS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kw(t){return t.collectionGroup!==null}function da(t){const e=K(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ie(Fe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new dc(s,r))}),n.has(Fe.keyField().canonicalString())||e.ce.push(new dc(Fe.keyField(),r))}return e.ce}function Jt(t){const e=K(t);return e.le||(e.le=qq(e,da(t))),e.le}function qq(t,e){if(t.limitType==="F")return oy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new dc(i.field,s)});const n=t.endAt?new Xi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xi(t.startAt.position,t.startAt.inclusive):null;return oy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ay(t,e){const n=t.filters.concat([e]);return new ei(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function of(t,e,n){return new ei(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dc(t,e){return Oc(Jt(t),Jt(e))&&t.limitType===e.limitType}function dx(t){return`${eo(Jt(t))}|lt:${t.limitType}`}function Vo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ax(i)).join(", ")}]`),Nc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>xa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>xa(i)).join(",")),`Target(${r})`}(Jt(t))}; limitType=${t.limitType})`}function Lc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of da(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=pS(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,da(r),i)||r.endAt&&!function(o,a,l){const u=pS(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,da(r),i))}(t,e)}function hx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fx(t){return(e,n)=>{let r=!1;for(const i of da(t)){const s=Gq(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Gq(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Yi(l,u):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Z1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wq=new Re(W.comparator);function un(){return Wq}const px=new Re(W.comparator);function eu(...t){let e=px;for(const n of t)e=e.insert(n.key,n);return e}function mx(t){let e=px;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function pr(){return vu()}function gx(){return vu()}function vu(){return new ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const Hq=new Re(W.comparator),Kq=new Ie(W.comparator);function re(...t){let e=Kq;for(const n of t)e=e.add(n);return e}const Qq=new Ie(ne);function Nw(){return Qq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(e)?"-0":e}}function yx(t){return{integerValue:""+t}}function _x(t,e){return H1(e)?yx(e):vx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(){this._=void 0}}function Yq(t,e,n){return t instanceof Na?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Cp(s)&&(s=Cw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof to?Ex(t,e):t instanceof no?Ix(t,e):function(i,s){const o=wx(i,s),a=_S(o)+_S(i.Pe);return ry(o)&&ry(i.Pe)?yx(a):vx(i.serializer,a)}(t,e)}function Xq(t,e,n){return t instanceof to?Ex(t,e):t instanceof no?Ix(t,e):n}function wx(t,e){return t instanceof Oa?function(r){return ry(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Na extends xp{}class to extends xp{constructor(e){super(),this.elements=e}}function Ex(t,e){const n=Tx(e);for(const r of t.elements)n.some(i=>Tr(i,r))||n.push(r);return{arrayValue:{values:n}}}class no extends xp{constructor(e){super(),this.elements=e}}function Ix(t,e){let n=Tx(e);for(const r of t.elements)n=n.filter(i=>!Tr(i,r));return{arrayValue:{values:n}}}class Oa extends xp{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function _S(t){return Qe(t.integerValue||t.doubleValue)}function Tx(t){return cc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this.field=e,this.transform=n}}function Jq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof to&&i instanceof to||r instanceof no&&i instanceof no?Ca(r.elements,i.elements,Tr):r instanceof Oa&&i instanceof Oa?Tr(r.Pe,i.Pe):r instanceof Na&&i instanceof Na}(t.transform,e.transform)}class Zq{constructor(e,n){this.version=e,this.transformResults=n}}class Ue{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ue}static exists(e){return new Ue(void 0,e)}static updateTime(e){return new Ue(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ah(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kp{}function Sx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tl(t.key,Ue.none()):new el(t.key,t.data,Ue.none());{const n=t.data,r=bt.empty();let i=new Ie(Fe.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ti(t.key,r,new ln(i.toArray()),Ue.none())}}function e6(t,e,n){t instanceof el?function(i,s,o){const a=i.value.clone(),l=ES(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ti?function(i,s,o){if(!ah(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ES(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Px(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function yu(t,e,n,r){return t instanceof el?function(s,o,a,l){if(!ah(s.precondition,o))return a;const u=s.value.clone(),d=IS(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ti?function(s,o,a,l){if(!ah(s.precondition,o))return a;const u=IS(s.fieldTransforms,l,o),d=o.data;return d.setAll(Px(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return ah(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function t6(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=wx(r.transform,i||null);s!=null&&(n===null&&(n=bt.empty()),n.set(r.field,s))}return n||null}function wS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ca(r,i,(s,o)=>Jq(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class el extends kp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ti extends kp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Px(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ES(t,e,n){const r=new Map;ee(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Xq(o,a,n[i]))}return r}function IS(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Yq(s,o,e))}return r}class tl extends kp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ow extends kp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&e6(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=yu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=yu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gx();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Sx(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&Ca(this.mutations,e.mutations,(n,r)=>wS(n,r))&&Ca(this.baseMutations,e.baseMutations,(n,r)=>wS(n,r))}}class Lw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ee(e.mutations.length===r.length);let i=function(){return Hq}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Lw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,de;function bx(t){switch(t){default:return Y();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function Ax(t){if(t===void 0)return tt("GRPC error has no .code"),F.UNKNOWN;switch(t){case rt.OK:return F.OK;case rt.CANCELLED:return F.CANCELLED;case rt.UNKNOWN:return F.UNKNOWN;case rt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case rt.INTERNAL:return F.INTERNAL;case rt.UNAVAILABLE:return F.UNAVAILABLE;case rt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case rt.NOT_FOUND:return F.NOT_FOUND;case rt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case rt.ABORTED:return F.ABORTED;case rt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case rt.DATA_LOSS:return F.DATA_LOSS;default:return Y()}}(de=rt||(rt={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=new $s([4294967295,4294967295],0);function TS(t){const e=Rx().encode(t),n=new N1;return n.update(e),new Uint8Array(n.digest())}function SS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $s([n,r],0),new $s([i,s],0)]}class Vw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new tu(`Invalid padding: ${n}`);if(r<0)throw new tu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new tu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$s.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply($s.fromNumber(r)));return i.compare(r6)===1&&(i=new $s([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=TS(e),[r,i]=SS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Vw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=TS(e),[r,i]=SS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Fc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vc(te.min(),i,new Re(ne),un(),re())}}class Fc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fc(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Cx{constructor(e,n){this.targetId=e,this.me=n}}class xx{constructor(e,n,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class PS{constructor(){this.fe=0,this.ge=AS(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=re(),n=re(),r=re();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new Fc(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=AS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class i6{constructor(e){this.Le=e,this.Be=new Map,this.ke=un(),this.qe=bS(),this.Qe=new Re(ne)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(rf(s))if(r===0){const o=new W(s.path);this.Ue(n,o,Ne.newNoDocument(o,te.min()))}else ee(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ki(r).toUint8Array()}catch(l){if(l instanceof ex)return nr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Vw(o,i,s)}catch(l){return nr(l instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&rf(a.target)){const l=new W(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ne.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=re();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Vc(e,n,this.Qe,this.ke,r);return this.ke=un(),this.qe=bS(),this.Qe=new Re(ne),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new PS,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ie(ne),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new PS),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function bS(){return new Re(W.comparator)}function AS(){return new Re(W.comparator)}const s6={asc:"ASCENDING",desc:"DESCENDING"},o6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a6={and:"AND",or:"OR"};class l6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ly(t,e){return t.useProto3Json||Nc(e)?e:{value:e}}function Da(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function u6(t,e){return Da(t,e.toTimestamp())}function nt(t){return ee(!!t),te.fromTimestamp(function(n){const r=Kr(n);return new $e(r.seconds,r.nanos)}(t))}function Fw(t,e){return uy(t,e).canonicalString()}function uy(t,e){const n=function(i){return new ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Nx(t){const e=ue.fromString(t);return ee(jx(e)),e}function hc(t,e){return Fw(t.databaseId,e.path)}function wr(t,e){const n=Nx(e);if(n.get(1)!==t.databaseId.projectId)throw new B(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(Lx(n))}function Ox(t,e){return Fw(t.databaseId,e)}function Dx(t){const e=Nx(t);return e.length===4?ue.emptyPath():Lx(e)}function cy(t){return new ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Lx(t){return ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function RS(t,e,n){return{name:hc(t,e),fields:n.value.mapValue.fields}}function Mx(t,e,n){const r=wr(t,e.name),i=nt(e.updateTime),s=e.createTime?nt(e.createTime):te.min(),o=new bt({mapValue:{fields:e.fields}}),a=Ne.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function c6(t,e){return"found"in e?function(r,i){ee(!!i.found),i.found.name,i.found.updateTime;const s=wr(r,i.found.name),o=nt(i.found.updateTime),a=i.found.createTime?nt(i.found.createTime):te.min(),l=new bt({mapValue:{fields:i.found.fields}});return Ne.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){ee(!!i.missing),ee(!!i.readTime);const s=wr(r,i.missing),o=nt(i.readTime);return Ne.newNoDocument(s,o)}(t,e):Y()}function d6(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ee(d===void 0||typeof d=="string"),ct.fromBase64String(d||"")):(ee(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ct.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?F.UNKNOWN:Ax(u.code);return new B(d,u.message||"")}(o);n=new xx(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=wr(t,r.document.name),s=nt(r.document.updateTime),o=r.document.createTime?nt(r.document.createTime):te.min(),a=new bt({mapValue:{fields:r.document.fields}}),l=Ne.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new lh(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=wr(t,r.document),s=r.readTime?nt(r.readTime):te.min(),o=Ne.newNoDocument(i,s),a=r.removedTargetIds||[];n=new lh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=wr(t,r.document),s=r.removedTargetIds||[];n=new lh([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new n6(i,s),a=r.targetId;n=new Cx(a,o)}}return n}function fc(t,e){let n;if(e instanceof el)n={update:RS(t,e.key,e.value)};else if(e instanceof tl)n={delete:hc(t,e.key)};else if(e instanceof ti)n={update:RS(t,e.key,e.data),updateMask:v6(e.fieldMask)};else{if(!(e instanceof Ow))return Y();n={verify:hc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Na)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof to)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof no)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Oa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:u6(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(t,e.precondition)),n}function dy(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ue.updateTime(nt(s.updateTime)):s.exists!==void 0?Ue.exists(s.exists):Ue.none()}(e.currentDocument):Ue.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ee(a.setToServerValue==="REQUEST_TIME"),l=new Na;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new to(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new no(d)}else"increment"in a?l=new Oa(o,a.increment):Y();const u=Fe.fromServerFormat(a.fieldPath);return new Mc(u,l)}(t,i)):[];if(e.update){e.update.name;const i=wr(t,e.update.name),s=new bt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new ln(u.map(d=>Fe.fromServerFormat(d)))}(e.updateMask);return new ti(i,s,o,n,r)}return new el(i,s,n,r)}if(e.delete){const i=wr(t,e.delete);return new tl(i,n)}if(e.verify){const i=wr(t,e.verify);return new Ow(i,n)}return Y()}function h6(t,e){return t&&t.length>0?(ee(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?nt(i.updateTime):nt(s);return o.isEqual(te.min())&&(o=nt(s)),new Zq(o,i.transformResults||[])}(n,e))):[]}function Vx(t,e){return{documents:[Ox(t,e.path)]}}function Fx(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ox(t,i);const s=function(u){if(u.length!==0)return Bx(ye.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:Fo(f.field),direction:p6(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ly(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function Ux(t){let e=Dx(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ee(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=$x(h);return f instanceof ye&&xw(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(_){return new dc(Uo(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Nc(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,g=h.values||[];return new Xi(g,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,g=h.values||[];return new Xi(g,f)}(n.endAt)),cx(e,i,o,s,a,"F",l,u)}function f6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $x(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Uo(n.unaryFilter.field);return ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Uo(n.unaryFilter.field);return ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Uo(n.unaryFilter.field);return ce.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Uo(n.unaryFilter.field);return ce.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return ce.create(Uo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ye.create(n.compositeFilter.filters.map(r=>$x(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function p6(t){return s6[t]}function m6(t){return o6[t]}function g6(t){return a6[t]}function Fo(t){return{fieldPath:t.canonicalString()}}function Uo(t){return Fe.fromServerFormat(t.fieldPath)}function Bx(t){return t instanceof ce?function(n){if(n.op==="=="){if(dS(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NAN"}};if(cS(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dS(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NAN"}};if(cS(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(n.field),op:m6(n.op),value:n.value}}}(t):t instanceof ye?function(n){const r=n.getFilters().map(i=>Bx(i));return r.length===1?r[0]:{compositeFilter:{op:g6(n.op),filters:r}}}(t):Y()}function v6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,r,i,s=te.min(),o=te.min(),a=ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.ct=e}}function y6(t,e){let n;if(e.document)n=Mx(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=W.fromSegments(e.noDocument.path),i=io(e.noDocument.readTime);n=Ne.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Y();{const r=W.fromSegments(e.unknownDocument.path),i=io(e.unknownDocument.version);n=Ne.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new $e(i[0],i[1]);return te.fromTimestamp(s)}(e.readTime)),n}function CS(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:af(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:hc(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Da(s,o.version.toTimestamp()),createTime:Da(s,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ro(e.version)};else{if(!e.isUnknownDocument())return Y();r.unknownDocument={path:n.path.toArray(),version:ro(e.version)}}return r}function af(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ro(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function io(t){const e=new $e(t.seconds,t.nanoseconds);return te.fromTimestamp(e)}function Ss(t,e){const n=(e.baseMutations||[]).map(s=>dy(t.ct,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>dy(t.ct,s)),i=$e.fromMillis(e.localWriteTimeMs);return new Dw(e.batchId,i,n,r)}function nu(t){const e=io(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?io(t.lastLimboFreeSnapshotVersion):te.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return ee(s.documents.length===1),Jt(Za(Dx(s.documents[0])))}(t.query):function(s){return Jt(Ux(s))}(t.query),new Vr(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ct.fromBase64String(t.resumeToken))}function qx(t,e){const n=ro(e.snapshotVersion),r=ro(e.lastLimboFreeSnapshotVersion);let i;i=rf(e.target)?Vx(t.ct,e.target):Fx(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Uw(t){const e=Ux({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?of(e,e.limit,"L"):e}function vg(t,e){return new Mw(e.largestBatchId,dy(t.ct,e.overlayMutation))}function xS(t,e){const n=e.path.lastSegment();return[t,Xt(e.path.popLast()),n]}function kS(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:ro(r.readTime),documentKey:Xt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{getBundleMetadata(e,n){return NS(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:io(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return NS(e).put(function(i){return{bundleId:i.id,createTime:ro(nt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return OS(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:Uw(s.bundledQuery),readTime:io(s.readTime)}}(r)})}saveNamedQuery(e,n){return OS(e).put(function(i){return{name:i.name,readTime:ro(nt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function NS(t){return Et(t,"bundles")}function OS(t){return Et(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Np(e,r)}getOverlay(e,n){return Ml(e).get(xS(this.userId,n)).next(r=>r?vg(this.serializer,r):null)}getOverlays(e,n){const r=pr();return V.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new Mw(n,o);i.push(this.ht(e,a))}),V.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Xt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Ml(e).j("collectionPathOverlayIndex",a))}),V.waitFor(s)}getOverlaysForCollection(e,n,r){const i=pr(),s=Xt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ml(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=vg(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=pr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ml(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,d)=>{const h=vg(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,n){return Ml(e).put(function(i,s,o){const[a,l,u]=xS(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:fc(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Ml(t){return Et(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Qe(e.integerValue));else if("doubleValue"in e){const r=Qe(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),ac(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Kr(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ki(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?tx(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):Y()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),W.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}Ps.bt=new Ps;function w6(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function DS(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=w6(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class E6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){const n=this.Bt(e),r=DS(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Bt(e),r=DS(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class I6{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class T6{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Vl{constructor(){this.Gt=new E6,this.zt=new I6(this.Gt),this.jt=new T6(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new bs(this.indexId,this.documentKey,this.arrayValue,r)}}function di(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=LS(t.arrayValue,e.arrayValue),n!==0?n:(n=LS(t.directionalValue,e.directionalValue),n!==0?n:W.comparator(t.documentKey,e.documentKey)))}function LS(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.Yt=new Ie((n,r)=>Fe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(ee(e.collectionGroup===this.collectionId),this.en)return!1;const n=ey(e);if(n!==void 0&&!this.nn(n))return!1;const r=Is(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ie(Fe.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new rh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new rh(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new rh(r.field,r.dir==="asc"?0:1)));return new nf(nf.UNKNOWN_ID,this.collectionId,n,oc.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){var e,n;if(ee(t instanceof ce||t instanceof ye),t instanceof ce){if(t instanceof ux){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ce.create(t.field,"==",s)))||[];return ye.create(i,"or")}return t}const r=t.filters.map(i=>Gx(i));return ye.create(r,t.op)}function S6(t){if(t.getFilters().length===0)return[];const e=py(Gx(t));return ee(Wx(e)),hy(e)||fy(e)?[e]:e.getFilters()}function hy(t){return t instanceof ce}function fy(t){return t instanceof ye&&xw(t)}function Wx(t){return hy(t)||fy(t)||function(n){if(n instanceof ye&&iy(n)){for(const r of n.getFilters())if(!hy(r)&&!fy(r))return!1;return!0}return!1}(t)}function py(t){if(ee(t instanceof ce||t instanceof ye),t instanceof ce)return t;if(t.filters.length===1)return py(t.filters[0]);const e=t.filters.map(r=>py(r));let n=ye.create(e,t.op);return n=lf(n),Wx(n)?n:(ee(n instanceof ye),ee(ka(n)),ee(n.filters.length>1),n.filters.reduce((r,i)=>$w(r,i)))}function $w(t,e){let n;return ee(t instanceof ce||t instanceof ye),ee(e instanceof ce||e instanceof ye),n=t instanceof ce?e instanceof ce?function(i,s){return ye.create([i,s],"and")}(t,e):VS(t,e):e instanceof ce?VS(e,t):function(i,s){if(ee(i.filters.length>0&&s.filters.length>0),ka(i)&&ka(s))return ox(i,s.getFilters());const o=iy(i)?i:s,a=iy(i)?s:i,l=o.filters.map(u=>$w(u,a));return ye.create(l,"or")}(t,e),lf(n)}function VS(t,e){if(ka(e))return ox(e,t.getFilters());{const n=e.filters.map(r=>$w(t,r));return ye.create(n,"or")}}function lf(t){if(ee(t instanceof ce||t instanceof ye),t instanceof ce)return t;const e=t.getFilters();if(e.length===1)return lf(e[0]);if(ix(t))return t;const n=e.map(i=>lf(i)),r=[];return n.forEach(i=>{i instanceof ce?r.push(i):i instanceof ye&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ye.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(){this._n=new Bw}addToCollectionParentIndex(e,n){return this._n.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Pn.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Pn.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class Bw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ie(ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ie(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new Uint8Array(0);class b6{constructor(e,n){this.databaseId=n,this.an=new Bw,this.un=new ls(r=>eo(r),(r,i)=>Oc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const s={collectionId:r,parent:Xt(i)};return FS(e).put(s)}return V.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[B1(n),""],!1,!0);return FS(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(fr(o.parent))}return r})}addFieldIndex(e,n){const r=Fl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=No(e);return s.next(a=>{o.put(kS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Fl(e),i=No(e),s=ko(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Fl(e),r=ko(e),i=No(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return V.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new MS(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ko(e);let i=!0;const s=new Map;return V.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=re();const a=[];return V.forEach(s,(l,u)=>{j("IndexedDbIndexManager",`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`}(l)} to execute ${eo(n)}`);const d=function(w,C){const O=ey(C);if(O===void 0)return null;for(const D of sf(w,O.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null}(u,l),h=function(w,C){const O=new Map;for(const D of Is(C))for(const A of sf(w,D.fieldPath))switch(A.op){case"==":case"in":O.set(D.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return O.set(D.fieldPath.canonicalString(),A.value),Array.from(O.values())}return null}(u,l),f=function(w,C){const O=[];let D=!0;for(const A of Is(C)){const I=A.kind===0?gS(w,A.fieldPath,w.startAt):vS(w,A.fieldPath,w.startAt);O.push(I.value),D&&(D=I.inclusive)}return new Xi(O,D)}(u,l),g=function(w,C){const O=[];let D=!0;for(const A of Is(C)){const I=A.kind===0?vS(w,A.fieldPath,w.endAt):gS(w,A.fieldPath,w.endAt);O.push(I.value),D&&(D=I.inclusive)}return new Xi(O,D)}(u,l),_=this.hn(l,u,f),E=this.hn(l,u,g),T=this.Pn(l,u,h),m=this.In(l.indexId,d,_,f.inclusive,E,g.inclusive,T);return V.forEach(m,v=>r.G(v,n.limit).next(w=>{w.forEach(C=>{const O=W.fromSegments(C.documentKey);o.has(O)||(o=o.add(O),a.push(O))})}))}).next(()=>a)}return V.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=S6(ye.create(e.filters,"and")).map(r=>oy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),d=[];for(let h=0;h<l;++h){const f=n?this.Tn(n[h/u]):Rd,g=this.En(e,f,r[h%u],i),_=this.dn(e,f,s[h%u],o),E=a.map(T=>this.En(e,f,T,!0));d.push(...this.createRange(g,_,E))}return d}En(e,n,r,i){const s=new bs(e,W.empty(),n,r);return i?s:s.Jt()}dn(e,n,r,i){const s=new bs(e,W.empty(),n,r);return i?s.Jt():s}ln(e,n){const r=new MS(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.cn(n);return V.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Ie(Fe.comparator),d=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?d=!0:u=u.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){const r=new Vl;for(const i of Is(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Ht(i.kind);Ps.bt.Pt(s,o)}return r.Wt()}Tn(e){const n=new Vl;return Ps.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new Vl;return Ps.bt.Pt(Zs(this.databaseId,n),r.Ht(function(s){const o=Is(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new Vl);let s=0;for(const o of Is(e)){const a=r[s++];for(const l of i)if(this.Vn(n,o.fieldPath)&&cc(a))i=this.mn(i,o,a);else{const u=l.Ht(o.kind);Ps.bt.Pt(a,u)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Vl;l.seed(a.Wt()),Ps.bt.Pt(o,l.Ht(n.kind)),s.push(l)}return s}Vn(e,n){return!!e.filters.find(r=>r instanceof ce&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Fl(e),i=No(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return V.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,h){const f=h?new oc(h.sequenceNumber,new Pn(io(h.readTime),new W(fr(h.documentKey)),h.largestBatchId)):oc.empty(),g=d.fields.map(([_,E])=>new rh(Fe.fromServerFormat(_),E));return new nf(d.indexId,d.collectionGroup,g,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ne(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Fl(e),s=No(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,l=>s.put(kS(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return V.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),V.forEach(a,l=>this.pn(e,i,l).next(u=>{const d=this.yn(s,l);return u.isEqual(d)?V.resolve():this.wn(e,s,l,u,d)}))))})}Sn(e,n,r,i){return ko(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return ko(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=ko(e);let s=new Ie(di);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{s=s.add(new bs(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,n){let r=new Ie(di);const i=this.An(n,e);if(i==null)return r;const s=ey(n);if(s!=null){const o=e.data.field(s.fieldPath);if(cc(o))for(const a of o.arrayValue.values||[])r=r.add(new bs(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new bs(n.indexId,e.key,Rd,i));return r}wn(e,n,r,i,s){j("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,d,h,f){const g=l.getIterator(),_=u.getIterator();let E=xo(g),T=xo(_);for(;E||T;){let m=!1,v=!1;if(E&&T){const w=d(E,T);w<0?v=!0:w>0&&(m=!0)}else E!=null?v=!0:m=!0;m?(h(T),T=xo(_)):v?(f(E),E=xo(g)):(E=xo(g),T=xo(_))}}(i,s,di,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),V.waitFor(o)}gn(e){let n=1;return No(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>di(o,a)).filter((o,a,l)=>!a||di(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=di(o,e),l=di(o,n);if(a===0)i[0]=e.Jt();else if(a>0&&l<0)i.push(o),i.push(o.Jt());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Rd,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Rd,[]];s.push(IDBKeyRange.bound(a,l))}return s}Dn(e,n){return di(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(US)}getMinOffset(e,n){return V.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||Y())).next(US)}}function FS(t){return Et(t,"collectionParents")}function ko(t){return Et(t,"indexEntries")}function Fl(t){return Et(t,"indexConfiguration")}function No(t){return Et(t,"indexState")}function US(t){ee(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;Aw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Pn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(d,h,f)=>(a++,f.delete()));s.push(l.next(()=>{ee(a===1)}));const u=[];for(const d of n.mutations){const h=K1(e,d.key.path,n.batchId);s.push(i.delete(h)),u.push(d.key)}return V.waitFor(s).next(()=>u)}function uf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Y();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(41943040,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);class Op{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){ee(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Op(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hi(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=$o(e),o=hi(e);return o.add({}).next(a=>{ee(typeof a=="number");const l=new Dw(a,n,r,i),u=function(g,_,E){const T=E.baseMutations.map(v=>fc(g.ct,v)),m=E.mutations.map(v=>fc(g.ct,v));return{userId:_,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:T,mutations:m}}(this.serializer,this.userId,l),d=[];let h=new Ie((f,g)=>ne(f.canonicalString(),g.canonicalString()));for(const f of i){const g=K1(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),d.push(o.put(u)),d.push(s.put(g,pq))}return h.forEach(f=>{d.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),V.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return hi(e).get(n).next(r=>r?(ee(r.userId===this.userId),Ss(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?V.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return hi(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ee(a.batchId>=r),s=Ss(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hi(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hi(e).U("userMutationsIndex",n).next(r=>r.map(i=>Ss(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=ih(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return $o(e).J({range:i},(o,a,l)=>{const[u,d,h]=o,f=fr(d);if(u===this.userId&&n.path.isEqual(f))return hi(e).get(h).next(g=>{if(!g)throw Y();ee(g.userId===this.userId),s.push(Ss(this.serializer,g))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ie(ne);const i=[];return n.forEach(s=>{const o=ih(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=$o(e).J({range:a},(u,d,h)=>{const[f,g,_]=u,E=fr(g);f===this.userId&&s.path.isEqual(E)?r=r.add(_):h.done()});i.push(l)}),V.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=ih(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Ie(ne);return $o(e).J({range:o},(l,u,d)=>{const[h,f,g]=l,_=fr(f);h===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(g)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(hi(e).get(s).next(o=>{if(o===null)throw Y();ee(o.userId===this.userId),r.push(Ss(this.serializer,o))}))}),V.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Hx(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),V.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return $o(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=fr(s[1]);i.push(l)}else a.done()}).next(()=>{ee(i.length===0)})})}containsKey(e,n){return Kx(e,this.userId,n)}xn(e){return Qx(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Kx(t,e,n){const r=ih(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return $o(t).J({range:s,H:!0},(a,l,u)=>{const[d,h,f]=a;d===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function hi(t){return Et(t,"mutations")}function $o(t){return Et(t,"documentMutations")}function Qx(t){return Et(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new so(0)}static Ln(){return new so(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new so(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>te.fromTimestamp(new $e(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Oo(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(ee(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Oo(e).J((o,a)=>{const l=nu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>V.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Oo(e).J((r,i)=>{const s=nu(i);n(s)})}Bn(e){return BS(e).get("targetGlobalKey").next(n=>(ee(n!==null),n))}kn(e,n){return BS(e).put("targetGlobalKey",n)}qn(e,n){return Oo(e).put(qx(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=eo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Oo(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=nu(a);Oc(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ei(e);return n.forEach(o=>{const a=Xt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),V.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ei(e);return V.forEach(n,s=>{const o=Xt(s.path);return V.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ei(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ei(e);let s=re();return i.J({range:r,H:!0},(o,a,l)=>{const u=fr(o[1]),d=new W(u);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Xt(n.path),i=IDBKeyRange.bound([r],[B1(r)],!1,!0);let s=0;return Ei(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,n){return Oo(e).get(n).next(r=>r?nu(r):null)}}function Oo(t){return Et(t,"targets")}function BS(t){return Et(t,"targetGlobal")}function Ei(t){return Et(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS([t,e],[n,r]){const i=ne(t,n);return i===0?ne(e,r):i}class R6{constructor(e){this.Kn=e,this.buffer=new Ie(jS),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();jS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class C6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){j("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){as(n)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await os(n)}await this.zn(3e5)})}}class x6{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(an.oe);const r=new R6(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve($S)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$S):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,s,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Mo()<=se.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function k6(t,e){return new x6(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,n){this.db=e,this.garbageCollector=k6(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Cd(e,r)}removeReference(e,n,r){return Cd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Cd(e,n)}er(e,n){return function(i,s){let o=!1;return Qx(i).Y(a=>Kx(i,a,s).next(l=>(l&&(o=!0),V.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=n){const l=this.er(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,te.min()),Ei(e).delete(function(h){return[0,Xt(h.path)]}(o))))});i.push(l)}}).next(()=>V.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Cd(e,n)}Xn(e,n){const r=Ei(e);let i,s=an.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==an.oe&&n(new W(fr(i)),s),s=u,i=l):s=an.oe}).next(()=>{s!==an.oe&&n(new W(fr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Cd(t,e){return Ei(t).put(function(r,i){return{targetId:0,path:Xt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(){this.changes=new ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ne.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return gs(e).put(r)}removeEntry(e,n,r){return gs(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],af(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Ne.newInvalidDocument(n);return gs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ul(n))},(i,s)=>{r=this.nr(n,s)}).next(()=>r)}rr(e,n){let r={size:0,document:Ne.newInvalidDocument(n)};return gs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ul(n))},(i,s)=>{r={document:this.nr(n,s),size:uf(s)}}).next(()=>r)}getEntries(e,n){let r=un();return this.ir(e,n,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,n){let r=un(),i=new Re(W.comparator);return this.ir(e,n,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,uf(o))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return V.resolve();let i=new Ie(GS);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Ul(i.first()),Ul(i.last())),o=i.getIterator();let a=o.getNext();return gs(e).J({index:"documentKeyIndex",range:s},(l,u,d)=>{const h=W.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&GS(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.$(Ul(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),af(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gs(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=un();for(const h of u){const f=this.nr(W.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(Lc(n,f)||i.has(f.key))&&(d=d.insert(f.key,f))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=un();const o=qS(n,r),a=qS(n,Pn.max());return gs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,d)=>{const h=this.nr(W.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new D6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return zS(e).get("remoteDocumentGlobalKey").next(n=>(ee(!!n),n))}tr(e,n){return zS(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=y6(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(te.min())))return r}return Ne.newInvalidDocument(e)}}function Xx(t){return new O6(t)}class D6 extends Yx{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new ls(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ie((s,o)=>ne(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(n.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=CS(this.ar.serializer,o);i=i.add(s.path.popLast());const u=uf(l);r+=u-a.size,n.push(this.ar.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=CS(this.ar.serializer,o.convertToNoDocument(te.min()));n.push(this.ar.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.ar.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function zS(t){return Et(t,"remoteDocumentGlobal")}function gs(t){return Et(t,"remoteDocumentsV14")}function Ul(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qS(t,e){const n=e.documentKey.path.toArray();return[t,af(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function GS(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ne(n[s],r[s]),i)return i;return i=ne(n.length,r.length),i||(i=ne(n[n.length-2],r[r.length-2]),i||ne(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&yu(r.mutation,i,ln.empty(),$e.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const i=pr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=eu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=pr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=un();const o=vu(),a=function(){return vu()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof ti)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),yu(d.mutation,u,d.mutation.getFieldMask(),$e.now())):o.set(u.key,ln.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var h;return a.set(u,new L6(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=vu();let i=new Re((o,a)=>o-a),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||ln.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(i.get(a.batchId)||re()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=gx();d.forEach(f=>{if(!s.has(f)){const g=Sx(n.get(f),r.get(f));g!==null&&h.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):V.resolve(pr());let a=-1,l=s;return o.next(u=>V.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,re())).next(d=>({batchId:a,changes:mx(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=eu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=eu();return this.indexManager.getCollectionParents(e,s).next(a=>V.forEach(a,l=>{const u=function(h,f){return new ei(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Ne.newInvalidDocument(d)))});let a=eu();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&yu(d.mutation,u,ln.empty(),$e.now()),Lc(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return V.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:nt(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Uw(i.bundledQuery),readTime:nt(i.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(){this.overlays=new Re(W.comparator),this.hr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=pr();return V.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=pr(),s=n.length+1,o=new W(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Re((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=pr(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=pr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return V.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Mw(n,r));let s=this.hr.get(n);s===void 0&&(s=re(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.Pr=new Ie(dt.Ir),this.Tr=new Ie(dt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new dt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new W(new ue([])),r=new dt(n,e),i=new dt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new W(new ue([])),r=new dt(n,e),i=new dt(n,e+1);let s=re();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new dt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return W.comparator(e.key,n.key)||ne(e.pr,n.pr)}static Er(e,n){return ne(e.pr,n.pr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ie(dt.Ir)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Dw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new dt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),i=new dt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ie(ne);return n.forEach(i=>{const s=new dt(i,0),o=new dt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),V.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;W.isDocumentKey(s)||(s=s.child(""));const o=new dt(new W(s),0);let a=new Ie(ne);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.pr)),!0)},o),V.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ee(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return V.forEach(n.mutations,i=>{const s=new dt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new dt(n,0),i=this.wr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e){this.vr=e,this.docs=function(){return new Re(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():Ne.newInvalidDocument(n))}getEntries(e,n){let r=un();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ne.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=un();const o=n.path,a=new W(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Aw(z1(d),r)<=0||(i.has(d.key)||Lc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y()}Fr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $6(this)}getSize(e){return V.resolve(this.size)}}class $6 extends Yx{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.persistence=e,this.Mr=new ls(n=>eo(n),Oc),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Or=0,this.Nr=new jw,this.targetCount=0,this.Lr=so.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),V.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new so(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.qn(n),V.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n){this.Br={},this.overlays={},this.kr=new an(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new B6(this),this.indexManager=new P6,this.remoteDocumentCache=function(i){return new U6(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new zx(n),this.$r=new M6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new V6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new F6(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const i=new j6(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return V.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class j6 extends G1{constructor(e){super(),this.currentSequenceNumber=e}}class Dp{constructor(e){this.persistence=e,this.zr=new jw,this.jr=null}static Hr(e){return new Dp(e)}get Jr(){if(this.jr)return this.jr;throw Y()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),V.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Jr,r=>{const i=W.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return V.or([()=>V.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Rp("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oS,{unique:!0}),l.createObjectStore("documentMutations")}(e),WS(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=V.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),WS(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:te.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",oS,{unique:!0});const h=u.store("mutations"),f=d.map(g=>h.put(g));return V.waitFor(f)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:bq});u.createIndex("collectionPathOverlayIndex",Aq,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Rq,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:mq});u.createIndex("documentKeyIndex",gq),u.createIndex("collectionGroupIndex",vq)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Iq}).createIndex("sequenceNumberIndex",Tq,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Sq}).createIndex("documentKeyIndex",Pq,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),o}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=uf(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>V.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>V.forEach(a,l=>{ee(l.userId===s.userId);const u=Ss(this.serializer,l);return Hx(e,s.userId,u).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new ue(o),u=function(h){return[0,Xt(h)]}(l);s.push(n.get(u).next(d=>d?V.resolve():(h=>n.put({targetId:0,path:Xt(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>V.waitFor(s))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:Eq});const r=n.store("collectionParents"),i=new Bw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Xt(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new ue(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],u)=>{const d=fr(a);return s(d.popLast())}))}ri(e){const n=e.store("targets");return n.J((r,i)=>{const s=nu(i),o=qx(this.serializer,s);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new W(ue.fromString(h.document.name).popFirst(5)):h.noDocument?W.fromSegments(h.noDocument.path):h.unknownDocument?W.fromSegments(h.unknownDocument.path):Y()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>V.waitFor(i))}si(e,n){const r=n.store("mutations"),i=Xx(this.serializer),s=new Zx(Dp.Hr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var u;let d=(u=a.get(l.userId))!==null&&u!==void 0?u:re();Ss(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),V.forEach(a,(l,u)=>{const d=new pt(u),h=Np.lt(this.serializer,d),f=s.getIndexManager(d),g=Op.lt(d,this.serializer,f,s.referenceDelegate);return new Jx(i,g,h,f).recalculateAndSaveOverlaysForDocumentKeys(new ty(n,an.oe),l).next()})})}}function WS(t){t.createObjectStore("targetDocuments",{keyPath:_q}).createIndex("documentTargetsIndex",wq,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yq,{unique:!0}),t.createObjectStore("targetGlobal")}const yg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class zw{constructor(e,n,r,i,s,o,a,l,u,d,h=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=u,this.ai=d,this.ui=h,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=f=>Promise.resolve(),!zw.D())throw new B(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new N6(this,i),this.Ti=n+"main",this.serializer=new zx(l),this.Ei=new _r(this.Ti,this.ui,new z6(this.serializer)),this.Qr=new A6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Xx(this.serializer),this.$r=new _6,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&tt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(F.FAILED_PRECONDITION,yg);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new an(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(as(e))return j("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return $l(e).get("owner").next(n=>V.resolve(this.Si(n)))}bi(e){return xd(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Et(n,"clientMetadata");return r.U().next(i=>{const s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return V.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(const n of e)this.di.removeItem(this.Fi(n.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?V.resolve(!0):$l(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new B(F.FAILED_PRECONDITION,yg);return!1}}return!(!this.networkEnabled||!this.inForeground)||xd(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&j("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new ty(e,an.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>xd(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Op.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new b6(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Np.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){j("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===16?xq:l===15?J1:l===14?X1:l===13?Y1:l===12?Cq:l===11?Q1:void Y()}(this.ui);let o;return this.Ei.runTransaction(e,i,s,a=>(o=new ty(a,this.kr?this.kr.next():an.oe),n==="readwrite-primary"?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw tt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new B(F.FAILED_PRECONDITION,q1);return r(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return $l(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new B(F.FAILED_PRECONDITION,yg)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $l(e).put("owner",n)}static D(){return _r.D()}yi(e){const n=$l(e);return n.get("owner").next(r=>this.Si(r)?(j("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):V.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(tt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;IC()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return j("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){tt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $l(t){return Et(t,"owner")}function xd(t){return Et(t,"clientMetadata")}function qw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=re(),i=re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Gw(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return IC()?8:W1(pe())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new q6;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Mo()<=se.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Vo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),V.resolve()):(Mo()<=se.DEBUG&&j("QueryEngine","Query:",Vo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Mo()<=se.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Vo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jt(n))):V.resolve())}ji(e,n){if(yS(n))return V.resolve(null);let r=Jt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=of(n,null,"F"),r=Jt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=re(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Zi(n,a);return this.Xi(n,u,o,l.readTime)?this.ji(e,of(n,null,"F")):this.es(e,u,n,l)}))})))}Hi(e,n,r,i){return yS(n)||i.isEqual(te.min())?V.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?V.resolve(null):(Mo()<=se.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vo(n)),this.es(e,o,n,j1(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ie(fx(e));return n.forEach((i,s)=>{Lc(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Mo()<=se.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Vo(n)),this.zi.getDocumentsMatchingQuery(e,n,Pn.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Re(ne),this.rs=new ls(s=>eo(s),Oc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jx(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function tk(t,e,n,r){return new G6(t,e,n,r)}async function nk(t,e){const n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=re();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})}function W6(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,f=h.keys();let g=V.resolve();return f.forEach(_=>{g=g.next(()=>d.getEntry(l,_)).next(E=>{const T=u.docVersions.get(_);ee(T!==null),E.version.compareTo(T)<0&&(h.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),d.addEntry(E)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=re();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function rk(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function H6(t,e){const n=K(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,h)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(ct.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(h,g),function(E,T,m){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(f,g,d)&&a.push(n.Qr.updateTargetData(s,g))});let l=un(),u=re();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(ik(s,o,e.documentUpdates).next(d=>{l=d.cs,u=d.ls})),!r.isEqual(te.min())){const d=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.ns=i,s))}function ik(t,e,n){let r=re(),i=re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=un();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(te.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{cs:o,ls:i}})}function K6(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function La(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,V.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Vr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function Ma(t,e,n){const r=K(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!as(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function cf(t,e,n){const r=K(t);let i=te.min(),s=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=K(l),f=h.rs.get(d);return f!==void 0?V.resolve(h.ns.get(f)):h.Qr.getTargetData(u,d)}(r,o,Jt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:re())).next(a=>(ak(r,hx(e),a),{documents:a,hs:s})))}function sk(t,e){const n=K(t),r=K(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function ok(t,e){const n=K(t),r=n.ss.get(e)||te.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,j1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ak(n,e,i),i))}function ak(t,e,n){let r=t.ss.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}async function Q6(t,e,n,r){const i=K(t);let s=re(),o=un();for(const u of n){const d=e.Ps(u.metadata.name);u.document&&(s=s.add(d));const h=e.Is(u);h.setReadTime(e.Ts(u.metadata.readTime)),o=o.insert(d,h)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await La(i,function(d){return Jt(Za(ue.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>ik(u,a,o).next(d=>(a.apply(u),d)).next(d=>i.Qr.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.Qr.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.cs,d.ls)).next(()=>d.cs)))}async function Y6(t,e,n=re()){const r=await La(t,Jt(Uw(e.bundledQuery))),i=K(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=nt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(ct.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}function HS(t,e){return`firestore_clients_${t}_${e}`}function KS(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _g(t,e){return`firestore_targets_${t}_${e}`}class df{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new B(i.error.code,i.error.message))),o?new df(e,n,i.state,s):(tt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _u{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new B(r.error.code,r.error.message))),s?new _u(e,r.state,i):(tt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=Nw();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=H1(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new hf(e,s):(tt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Ww{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new Ww(n.clientId,n.onlineState):(tt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class my{constructor(){this.activeTargetIds=Nw()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wg{constructor(e,n,r,i,s){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Re(ne),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=HS(this.persistenceKey,this.Vs),this.Ss=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new my),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Vs)continue;const i=this.getItem(HS(this.persistenceKey,r));if(i){const s=hf.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();const n=this.storage.getItem(this.vs);if(n){const r=this.xs(n);r&&this.Os(r)}for(const r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(_g(this.persistenceKey,e));if(r){const i=_u.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_g(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return j("SharedClientState","READ",e,n),n}setItem(e,n){j("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){j("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const n=e;if(n.storageArea===this.storage){if(j("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void tt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){const r=this.$s(n.key);return this.Us(r,null)}{const r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){const r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){const r=function(s){let o=an.oe;if(s!=null)try{const a=JSON.parse(s);ee(typeof a=="number"),o=a}catch(a){tt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==an.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){const r=this.Js(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const i=new df(this.currentUser,e,n,r),s=KS(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){const n=KS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){const n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){const i=_g(this.persistenceKey,e),s=new _u(e,n,r);this.setItem(i,s.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return hf.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return df.Es(new pt(s),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return _u.Es(i,n)}xs(e){return Ww.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);j("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Nw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class lk{constructor(){this.no=new my,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new my,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd=null;function Eg(){return kd===null?kd=function(){return 268435456+Math.round(2147483648*Math.random())}():kd++,"0x"+kd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class eG extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Eg(),l=this.vo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(n,l,u,i).then(d=>(j("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw nr("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ja}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=J6[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){const s=Eg();return new Promise((o,a)=>{const l=new O1;l.setWithCredentials(!0),l.listenOnce(L1.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case nh.NO_ERROR:const d=l.getResponseJson();j(Lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case nh.TIMEOUT:j(Lt,`RPC '${e}' ${s} timed out`),a(new B(F.DEADLINE_EXCEEDED,"Request time out"));break;case nh.HTTP_ERROR:const h=l.getStatus();if(j(Lt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const _=function(T){const m=T.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(m)>=0?m:F.UNKNOWN}(g.status);a(new B(_,g.message))}else a(new B(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new B(F.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{j(Lt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);j(Lt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Oo(e,n,r){const i=Eg(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=F1(),a=V1(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new D1({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");j(Lt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);let f=!1,g=!1;const _=new Z6({lo:T=>{g?j(Lt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||(j(Lt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),j(Lt,`RPC '${e}' stream ${i} sending:`,T),h.send(T))},ho:()=>h.close()}),E=(T,m,v)=>{T.listen(m,w=>{try{v(w)}catch(C){setTimeout(()=>{throw C},0)}})};return E(h,Zl.EventType.OPEN,()=>{g||(j(Lt,`RPC '${e}' stream ${i} transport opened.`),_.mo())}),E(h,Zl.EventType.CLOSE,()=>{g||(g=!0,j(Lt,`RPC '${e}' stream ${i} transport closed`),_.po())}),E(h,Zl.EventType.ERROR,T=>{g||(g=!0,nr(Lt,`RPC '${e}' stream ${i} transport errored:`,T),_.po(new B(F.UNAVAILABLE,"The operation could not be completed")))}),E(h,Zl.EventType.MESSAGE,T=>{var m;if(!g){const v=T.data[0];ee(!!v);const w=v,C=w.error||((m=w[0])===null||m===void 0?void 0:m.error);if(C){j(Lt,`RPC '${e}' stream ${i} received error:`,C);const O=C.status;let D=function(P){const S=rt[P];if(S!==void 0)return Ax(S)}(O),A=C.message;D===void 0&&(D=F.INTERNAL,A="Unknown error status: "+O+" with message "+C.message),g=!0,_.po(new B(D,A)),h.close()}else j(Lt,`RPC '${e}' stream ${i} received:`,v),_.yo(v)}}),E(a,M1.STAT_EVENT,T=>{T.stat===Zv.PROXY?j(Lt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Zv.NOPROXY&&j(Lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.fo()},0),_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(){return typeof window<"u"?window:null}function uh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){return new l6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n,r,i,s,o,a,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Hw(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(tt(n.toString()),tt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(n)}__(){}auth(){this.state=1;const e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{const i=new B(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){const r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tG extends ck{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();const n=d6(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?nt(o.readTime):te.min()}(e);return this.listener.h_(n,r)}P_(e){const n={};n.database=cy(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=rf(l)?{documents:Vx(s,l)}:{query:Fx(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=kx(s,o.resumeToken);const u=ly(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=Da(s,o.snapshotVersion.toTimestamp());const u=ly(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=f6(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){const n={};n.database=cy(this.serializer),n.removeTarget=e,this.i_(n)}}class nG extends ck{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const n=h6(e.writeResults,e.commitTime),r=nt(e.commitTime);return this.listener.A_(r,n)}return ee(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=cy(this.serializer),this.i_(e)}d_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>fc(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new B(F.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,uy(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(F.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,uy(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(F.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class iG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(tt(n),this.y_=!1):j("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{us(this)&&(j("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=K(l);u.M_.add(4),await nl(u),u.N_.set("Unknown"),u.M_.delete(4),await $c(u)}(this))})}),this.N_=new iG(r,i)}}async function $c(t){if(us(t))for(const e of t.x_)await e(!0)}async function nl(t){for(const e of t.x_)await e(!1)}function Lp(t,e){const n=K(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Yw(n)?Qw(n):il(n).Xo()&&Kw(n,e))}function Va(t,e){const n=K(t),r=il(n);n.F_.delete(e),r.Xo()&&dk(n,e),n.F_.size===0&&(r.Xo()?r.n_():us(n)&&n.N_.set("Unknown"))}function Kw(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}il(t).P_(e)}function dk(t,e){t.L_.xe(e),il(t).I_(e)}function Qw(t){t.L_=new i6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),il(t).start(),t.N_.w_()}function Yw(t){return us(t)&&!il(t).Zo()&&t.F_.size>0}function us(t){return K(t).M_.size===0}function hk(t){t.L_=void 0}async function oG(t){t.N_.set("Online")}async function aG(t){t.F_.forEach((e,n)=>{Kw(t,e)})}async function lG(t,e){hk(t),Yw(t)?(t.N_.D_(e),Qw(t)):t.N_.set("Unknown")}async function uG(t,e,n){if(t.N_.set("Online"),e instanceof xx&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ff(t,r)}else if(e instanceof lh?t.L_.Ke(e):e instanceof Cx?t.L_.He(e):t.L_.We(e),!n.isEqual(te.min()))try{const r=await rk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.F_.get(u);d&&s.F_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.F_.get(l);if(!d)return;s.F_.set(l,d.withResumeToken(ct.EMPTY_BYTE_STRING,d.snapshotVersion)),dk(s,l);const h=new Vr(d.target,l,u,d.sequenceNumber);Kw(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){j("RemoteStore","Failed to raise snapshot:",r),await ff(t,r)}}async function ff(t,e,n){if(!as(e))throw e;t.M_.add(1),await nl(t),t.N_.set("Offline"),n||(n=()=>rk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{j("RemoteStore","Retrying IndexedDB access"),await n(),t.M_.delete(1),await $c(t)})}function fk(t,e){return e().catch(n=>ff(t,n,e))}async function rl(t){const e=K(t),n=Ji(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;cG(e);)try{const i=await K6(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,dG(e,i)}catch(i){await ff(e,i)}pk(e)&&mk(e)}function cG(t){return us(t)&&t.v_.length<10}function dG(t,e){t.v_.push(e);const n=Ji(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function pk(t){return us(t)&&!Ji(t).Zo()&&t.v_.length>0}function mk(t){Ji(t).start()}async function hG(t){Ji(t).V_()}async function fG(t){const e=Ji(t);for(const n of t.v_)e.d_(n.mutations)}async function pG(t,e,n){const r=t.v_.shift(),i=Lw.from(r,e,n);await fk(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await rl(t)}async function mG(t,e){e&&Ji(t).E_&&await async function(r,i){if(function(o){return bx(o)&&o!==F.ABORTED}(i.code)){const s=r.v_.shift();Ji(r).t_(),await fk(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await rl(r)}}(t,e),pk(t)&&mk(t)}async function YS(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");const r=us(n);n.M_.add(3),await nl(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),await $c(n)}async function gy(t,e){const n=K(t);e?(n.M_.delete(2),await $c(n)):e||(n.M_.add(2),await nl(n),n.N_.set("Unknown"))}function il(t){return t.B_||(t.B_=function(n,r,i){const s=K(n);return s.f_(),new tG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:oG.bind(null,t),To:aG.bind(null,t),Ao:lG.bind(null,t),h_:uG.bind(null,t)}),t.x_.push(async e=>{e?(t.B_.t_(),Yw(t)?Qw(t):t.N_.set("Unknown")):(await t.B_.stop(),hk(t))})),t.B_}function Ji(t){return t.k_||(t.k_=function(n,r,i){const s=K(n);return s.f_(),new nG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:hG.bind(null,t),Ao:mG.bind(null,t),R_:fG.bind(null,t),A_:pG.bind(null,t)}),t.x_.push(async e=>{e?(t.k_.t_(),await rl(t)):(await t.k_.stop(),t.v_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))})),t.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Xw(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sl(t,e){if(tt("AsyncQueue",`${e}: ${t}`),as(t))return new B(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=eu(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new ha(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ha)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ha;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.q_=new Re(W.comparator)}track(e){const n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):Y():this.q_=this.q_.insert(n,e)}Q_(){const e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fa{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fa(e,n,ha.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class vG{constructor(){this.queries=new ls(e=>dx(e),Dc),this.onlineState="Unknown",this.z_=new Set}}async function Jw(t,e){const n=K(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new gG,r=e.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=sl(o,`Initialization of query '${Vo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&eE(n)}async function Zw(t,e){const n=K(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function yG(t,e){const n=K(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&eE(n)}function _G(t,e,n){const r=K(t),i=r.queries.get(e);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(e)}function eE(t){t.z_.forEach(e=>{e.next()})}var vy,JS;(JS=vy||(vy={})).J_="default",JS.Cache="cache";class tE{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==vy.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wG{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.serializer=e}Ps(e){return wr(this.serializer,e)}Is(e){return e.metadata.exists?Mx(this.serializer,e.document,!1):Ne.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return nt(e)}}class EG{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=gk(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;const r=ue.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){const n=new Map,r=new ZS(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||re()).add(s);n.set(o,a)}}return n}async complete(){const e=await Q6(this.localStore,new ZS(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(const r of this.queries)await Y6(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function gk(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.key=e}}class yk{constructor(e){this.key=e}}class _k{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=re(),this.mutatedKeys=re(),this.Ia=fx(e),this.Ta=new ha(this.Ia)}get Ea(){return this.la}da(e,n){const r=n?n.Aa:new XS,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),g=Lc(this.query,h)?h:null,_=!!f&&this.mutatedKeys.has(f.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;f&&g?f.data.isEqual(g.data)?_!==E&&(r.track({type:3,doc:g}),T=!0):this.Ra(f,g)||(r.track({type:2,doc:g}),T=!0,(l&&this.Ia(g,l)>0||u&&this.Ia(g,u)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),T=!0):f&&!g&&(r.track({type:1,doc:f}),T=!0,(l||u)&&(a=!0)),T&&(g?(o=o.add(g),s=E?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const o=e.Aa.Q_();o.sort((d,h)=>function(g,_){const E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return E(g)-E(_)}(d.type,h.type)||this.Ia(d.doc,h.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,u=l!==this.ha;return this.ha=l,o.length!==0||u?{snapshot:new Fa(this.query,e.Ta,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new XS,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=re(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new yk(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new vk(r))}),n}pa(e){this.la=e.hs,this.Pa=re();const n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Fa.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class IG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TG{constructor(e){this.key=e,this.wa=!1}}class SG{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ls(a=>dx(a),Dc),this.Da=new Map,this.Ca=new Set,this.va=new Re(W.comparator),this.Fa=new Map,this.Ma=new jw,this.xa={},this.Oa=new Map,this.Na=so.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function PG(t,e,n=!0){const r=Mp(t);let i;const s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await wk(r,e,n,!0),i}async function bG(t,e){const n=Mp(t);await wk(n,e,!0,!1)}async function wk(t,e,n,r){const i=await La(t.localStore,Jt(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await nE(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Lp(t.remoteStore,i),a}async function nE(t,e,n,r,i){t.Ba=(h,f,g)=>async function(E,T,m,v){let w=T.view.da(m);w.Xi&&(w=await cf(E.localStore,T.query,!1).then(({documents:A})=>T.view.da(A,w)));const C=v&&v.targetChanges.get(T.targetId),O=v&&v.targetMismatches.get(T.targetId)!=null,D=T.view.applyChanges(w,E.isPrimaryClient,C,O);return yy(E,T.targetId,D.fa),D.snapshot}(t,h,f,g);const s=await cf(t.localStore,e,!0),o=new _k(e,s.hs),a=o.da(s.documents),l=Fc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);yy(t,n,u.fa);const d=new IG(e,n,o);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot}async function AG(t,e,n){const r=K(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Dc(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ma(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Va(r.remoteStore,i.targetId),Ua(r,i.targetId)}).catch(os)):(Ua(r,i.targetId),await Ma(r.localStore,i.targetId,!0))}async function RG(t,e){const n=K(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Va(n.remoteStore,r.targetId))}async function CG(t,e,n){const r=oE(t);try{const i=await function(o,a){const l=K(o),u=$e.now(),d=a.reduce((g,_)=>g.add(_.key),re());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=un(),E=re();return l.os.getEntries(g,d).next(T=>{_=T,_.forEach((m,v)=>{v.isValidDocument()||(E=E.add(m))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,_)).next(T=>{h=T;const m=[];for(const v of a){const w=t6(v,h.get(v.key).overlayedDocument);w!=null&&m.push(new ti(v.key,w,nx(w.value.mapValue),Ue.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,m,a)}).next(T=>{f=T;const m=T.applyToLocalDocumentSet(h,E);return l.documentOverlayCache.saveOverlays(g,T.batchId,m)})}).then(()=>({batchId:f.batchId,changes:mx(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.xa[o.currentUser.toKey()];u||(u=new Re(ne)),u=u.insert(a,l),o.xa[o.currentUser.toKey()]=u}(r,i.batchId,n),await ni(r,i.changes),await rl(r.remoteStore)}catch(i){const s=sl(i,"Failed to persist write");n.reject(s)}}async function Ek(t,e){const n=K(t);try{const r=await H6(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ee(o.wa):i.removedDocuments.size>0&&(ee(o.wa),o.wa=!1))}),await ni(n,r,e)}catch(r){await os(r)}}function eP(t,e,n){const r=K(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=K(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const f of h.U_)f.j_(a)&&(u=!0)}),u&&eE(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xG(t,e,n){const r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Re(W.comparator);o=o.insert(s,Ne.newNoDocument(s,te.min()));const a=re().add(s),l=new Vc(te.min(),new Map,new Re(ne),o,a);await Ek(r,l),r.va=r.va.remove(s),r.Fa.delete(e),sE(r)}else await Ma(r.localStore,e,!1).then(()=>Ua(r,e,n)).catch(os)}async function kG(t,e){const n=K(t),r=e.batch.batchId;try{const i=await W6(n.localStore,e);iE(n,r,null),rE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ni(n,i)}catch(i){await os(i)}}async function NG(t,e,n){const r=K(t);try{const i=await function(o,a){const l=K(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(ee(h!==null),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);iE(r,e,n),rE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ni(r,i)}catch(i){await os(i)}}async function OG(t,e){const n=K(t);us(n.remoteStore)||j("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=K(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){const i=sl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function rE(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function iE(t,e,n){const r=K(t);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Ua(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||Ik(t,r)})}function Ik(t,e){t.Ca.delete(e.path.canonicalString());const n=t.va.get(e);n!==null&&(Va(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),sE(t))}function yy(t,e,n){for(const r of n)r instanceof vk?(t.Ma.addReference(r.key,e),DG(t,r)):r instanceof yk?(j("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||Ik(t,r.key)):Y()}function DG(t,e){const n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(j("SyncEngine","New document in limbo: "+n),t.Ca.add(r),sE(t))}function sE(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){const e=t.Ca.values().next().value;t.Ca.delete(e);const n=new W(ue.fromString(e)),r=t.Na.next();t.Fa.set(r,new TG(n)),t.va=t.va.insert(n,r),Lp(t.remoteStore,new Vr(Jt(Za(n.path)),r,"TargetPurposeLimboResolution",an.oe))}}async function ni(t,e,n){const r=K(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient){const d=u&&!u.fromCache;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=Gw.Ki(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,u){const d=K(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>V.forEach(u,f=>V.forEach(f.qi,g=>d.persistence.referenceDelegate.addReference(h,f.targetId,g)).next(()=>V.forEach(f.Qi,g=>d.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))}catch(h){if(!as(h))throw h;j("LocalStore","Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const g=d.ns.get(f),_=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(_);d.ns=d.ns.insert(f,E)}}}(r.localStore,s))}async function LG(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());const r=await nk(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new B(F.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ni(n,r.us)}}function MG(t,e){const n=K(t),r=n.Fa.get(e);if(r&&r.wa)return re().add(r.key);{let i=re();const s=n.Da.get(e);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}async function VG(t,e){const n=K(t),r=await cf(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&yy(n,e.targetId,i.fa),i}async function FG(t,e){const n=K(t);return ok(n.localStore,e).then(r=>ni(n,r))}async function UG(t,e,n,r){const i=K(t),s=await function(a,l){const u=K(a),d=K(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.vn(h,l).next(f=>f?u.localDocuments.getDocuments(h,f):V.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await rl(i.remoteStore):n==="acknowledged"||n==="rejected"?(iE(i,e,r||null),rE(i,e),function(a,l){K(K(a).mutationQueue).Mn(l)}(i.localStore,e)):Y(),await ni(i,s)):j("SyncEngine","Cannot apply mutation batch with id: "+e)}async function $G(t,e){const n=K(t);if(Mp(n),oE(n),e===!0&&n.La!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await tP(n,r.toArray());n.La=!0,await gy(n.remoteStore,!0);for(const s of i)Lp(n.remoteStore,s)}else if(e===!1&&n.La!==!1){const r=[];let i=Promise.resolve();n.Da.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Ua(n,o),Ma(n.localStore,o,!0))),Va(n.remoteStore,o)}),await i,await tP(n,r),function(o){const a=K(o);a.Fa.forEach((l,u)=>{Va(a.remoteStore,u)}),a.Ma.mr(),a.Fa=new Map,a.va=new Re(W.comparator)}(n),n.La=!1,await gy(n.remoteStore,!1)}}async function tP(t,e,n){const r=K(t),i=[],s=[];for(const o of e){let a;const l=r.Da.get(o);if(l&&l.length!==0){a=await La(r.localStore,Jt(l[0]));for(const u of l){const d=r.ba.get(u),h=await VG(r,d);h.snapshot&&s.push(h.snapshot)}}else{const u=await sk(r.localStore,o);a=await La(r.localStore,u),await nE(r,Tk(u),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i}function Tk(t){return cx(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function BG(t){return function(n){return K(K(n).persistence).Bi()}(K(t).localStore)}async function jG(t,e,n,r){const i=K(t);if(i.La)return void j("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await ok(i.localStore,hx(s[0])),a=Vc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ct.EMPTY_BYTE_STRING);await ni(i,o,a);break}case"rejected":await Ma(i.localStore,e,!0),Ua(i,e,r);break;default:Y()}}async function zG(t,e,n){const r=Mp(t);if(r.La){for(const i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){j("SyncEngine","Adding an already active target "+i);continue}const s=await sk(r.localStore,i),o=await La(r.localStore,s);await nE(r,Tk(s),o.targetId,!1,o.resumeToken),Lp(r.remoteStore,o)}for(const i of n)r.Da.has(i)&&await Ma(r.localStore,i,!1).then(()=>{Va(r.remoteStore,i),Ua(r,i)}).catch(os)}}function Mp(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ek.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xG.bind(null,e),e.Sa.h_=yG.bind(null,e.eventManager),e.Sa.ka=_G.bind(null,e.eventManager),e}function oE(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NG.bind(null,e),e}function qG(t,e,n){const r=K(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(g,_){const E=K(g),T=nt(_.createTime);return E.persistence.runTransaction("hasNewerBundle","readonly",m=>E.$r.getBundleMetadata(m,_.id)).then(m=>!!m&&m.createTime.compareTo(T)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(g){return{taskState:"Success",documentsLoaded:g.totalDocuments,bytesLoaded:g.totalBytes,totalDocuments:g.totalDocuments,totalBytes:g.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(gk(l));const u=new EG(l,s.localStore,o.serializer);let d=await o.qa();for(;d;){const f=await u._a(d);f&&a._updateProgress(f),d=await o.qa()}const h=await u.complete();return await ni(s,h.ca,void 0),await function(g,_){const E=K(g);return E.persistence.runTransaction("Save bundle","readwrite",T=>E.$r.saveBundleMetadata(T,_))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.ua)}catch(l){return nr("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class _y{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Uc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return tk(this.persistence,new ek,e.initialUser,this.serializer)}createPersistence(e){return new Zx(Dp.Hr,this.serializer)}createSharedClientState(e){return new lk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Sk extends _y{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await oE(this.Qa.syncEngine),await rl(this.Qa.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return tk(this.persistence,new ek,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new C6(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new hq(n,this.persistence);return new dq(e.asyncQueue,r)}createPersistence(e){const n=qw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new zw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,uk(),uh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new lk}}class GG extends Sk{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Qa.syncEngine;this.sharedClientState instanceof wg&&(this.sharedClientState.syncEngine={Zs:UG.bind(null,n),Xs:jG.bind(null,n),eo:zG.bind(null,n),Bi:BG.bind(null,n),Ys:FG.bind(null,n)},await this.sharedClientState.start()),await this.persistence.fi(async r=>{await $G(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=uk();if(!wg.D(n))throw new B(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=qw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class aE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LG.bind(null,this.syncEngine),await gy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vG}()}createDatastore(e){const n=Uc(e.databaseInfo.databaseId),r=function(s){return new eG(s)}(e.databaseInfo);return function(s,o,a,l){return new rG(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new sG(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>eP(this.syncEngine,n,0),function(){return QS.D()?new QS:new X6}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const h=new SG(i,s,o,a,l,u);return d&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=K(r);j("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await nl(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):tt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WG{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new yt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(e===null)return null;const n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);const i=await this.Ha(r);return new wG(JSON.parse(i),e.length+r)}Ja(){return this.buffer.findIndex(e=>e===123)}async za(){for(;this.Ja()<0&&!await this.Ya(););if(this.buffer.length===0)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ya(){const e=await this.Ua.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new B(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=K(i),a={documents:s.map(h=>hc(o.serializer,h))},l=await o.xo("BatchGetDocuments",o.serializer.databaseId,ue.emptyPath(),a,s.length),u=new Map;l.forEach(h=>{const f=c6(o.serializer,h);u.set(f.key.toString(),f)});const d=[];return s.forEach(h=>{const f=u.get(h.toString());ee(!!f),d.push(f)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new tl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=W.fromPath(r);this.mutations.push(new Ow(i,this.precondition(i)))}),await async function(r,i){const s=K(r),o={writes:i.map(a=>fc(s.serializer,a))};await s.Co("Commit",s.serializer.databaseId,ue.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Y();n=te.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new B(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(te.min())?Ue.exists(!1):Ue.updateTime(n):Ue.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(te.min()))throw new B(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ue.updateTime(n)}return Ue.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KG{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new Hw(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(async()=>{const e=new HG(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})})}tu(e){try{const n=this.updateFunction(e);return!Nc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!bx(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QG{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=$1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{j("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=sl(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ch(t,e){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lE(t);j("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>YS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>YS(e.remoteStore,i)),t._onlineComponents=e}function Pk(t){return t.name==="FirebaseError"?t.code===F.FAILED_PRECONDITION||t.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function lE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{await ch(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Pk(n))throw n;nr("Error using user provided cache. Falling back to memory cache: "+n),await ch(t,new _y)}}else j("FirestoreClient","Using default OfflineComponentProvider"),await ch(t,new _y);return t._offlineComponents}async function Fp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),await wy(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),await wy(t,new aE))),t._onlineComponents}function bk(t){return lE(t).then(e=>e.persistence)}function uE(t){return lE(t).then(e=>e.localStore)}function Ak(t){return Fp(t).then(e=>e.remoteStore)}function cE(t){return Fp(t).then(e=>e.syncEngine)}function YG(t){return Fp(t).then(e=>e.datastore)}async function $a(t){const e=await Fp(t),n=e.eventManager;return n.onListen=PG.bind(null,e.syncEngine),n.onUnlisten=AG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RG.bind(null,e.syncEngine),n}function XG(t){return t.asyncQueue.enqueue(async()=>{const e=await bk(t),n=await Ak(t);return e.setNetworkEnabled(!0),function(i){const s=K(i);return s.M_.delete(0),$c(s)}(n)})}function JG(t){return t.asyncQueue.enqueue(async()=>{const e=await bk(t),n=await Ak(t);return e.setNetworkEnabled(!1),async function(i){const s=K(i);s.M_.add(0),await nl(s),s.N_.set("Offline")}(n)})}function ZG(t,e){const n=new yt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,d){const h=K(u);return h.persistence.runTransaction("read document","readonly",f=>h.localDocuments.getDocument(f,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new B(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=sl(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await uE(t),e,n)),n.promise}function Rk(t,e,n={}){const r=new yt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new Vp({next:f=>{o.enqueueAndForget(()=>Zw(s,h));const g=f.docs.has(a);!g&&f.fromCache?u.reject(new B(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?u.reject(new B(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new tE(Za(a.path),d,{includeMetadataChanges:!0,ra:!0});return Jw(s,h)}(await $a(t),t.asyncQueue,e,n,r)),r.promise}function e9(t,e){const n=new yt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await cf(i,s,!0),l=new _k(s,a.hs),u=l.da(a.documents),d=l.applyChanges(u,!1);o.resolve(d.snapshot)}catch(a){const l=sl(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await uE(t),e,n)),n.promise}function Ck(t,e,n={}){const r=new yt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new Vp({next:f=>{o.enqueueAndForget(()=>Zw(s,h)),f.fromCache&&l.source==="server"?u.reject(new B(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new tE(a,d,{includeMetadataChanges:!0,ra:!0});return Jw(s,h)}(await $a(t),t.asyncQueue,e,n,r)),r.promise}function t9(t,e){const n=new Vp(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){K(i).z_.add(s),s.next()}(await $a(t),n)),()=>{n.$a(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){K(i).z_.delete(s)}(await $a(t),n))}}function n9(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?Rx().encode(o):o,function(d,h){return new WG(d,h)}(function(d,h){if(d instanceof Uint8Array)return nP(d,h);if(d instanceof ArrayBuffer)return nP(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Uc(e));t.asyncQueue.enqueueAndForget(async()=>{qG(await cE(t),i,r)})}function r9(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=K(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(await uE(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(t,e,n){if(!n)throw new B(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kk(t,e,n,r){if(e===!0&&r===!0)throw new B(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iP(t){if(!W.isDocumentKey(t))throw new B(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sP(t){if(W.isDocumentKey(t))throw new B(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Up(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function fe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Up(t);throw new B(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Nk(t,e){if(e<=0)throw new B(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xk((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oP({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new B(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new B(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oP(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eq;switch(r.type){case"firstParty":return new iq(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rP.get(n);r&&(j("ComponentProvider","Removing Datastore"),rP.delete(n),r.terminate())}(this),Promise.resolve()}}function i9(t,e,n,r={}){var i;const s=(t=fe(t,Bc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&nr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=pt.MOCK_USER;else{a=yC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new B(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pt(u)}t._authCredentials=new tq(new U1(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zt=class Ok{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ok(this.firestore,e,this._query)}},qe=class Dk{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ui(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dk(this.firestore,e,this._key)}},Ui=class Lk extends Zt{constructor(e,n,r){super(e,n,Za(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new W(e))}withConverter(e){return new Lk(this.firestore,e,this._path)}};function Mk(t,e,...n){if(t=J(t),dE("collection","path",e),t instanceof Bc){const r=ue.fromString(e,...n);return sP(r),new Ui(t,null,r)}{if(!(t instanceof qe||t instanceof Ui))throw new B(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return sP(r),new Ui(t.firestore,null,r)}}function s9(t,e){if(t=fe(t,Bc),dE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new B(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zt(t,null,function(r){return new ei(ue.emptyPath(),r)}(e))}function pf(t,e,...n){if(t=J(t),arguments.length===1&&(e=$1.newId()),dE("doc","path",e),t instanceof Bc){const r=ue.fromString(e,...n);return iP(r),new qe(t,null,new W(r))}{if(!(t instanceof qe||t instanceof Ui))throw new B(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return iP(r),new qe(t.firestore,t instanceof Ui?t.converter:null,new W(r))}}function Vk(t,e){return t=J(t),e=J(e),(t instanceof qe||t instanceof Ui)&&(e instanceof qe||e instanceof Ui)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Fk(t,e){return t=J(t),e=J(e),t instanceof Zt&&e instanceof Zt&&t.firestore===e.firestore&&Dc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Hw(this,"async_queue_retry"),this.hu=()=>{const n=uh();n&&j("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const e=uh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const n=uh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new yt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!as(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(e){const n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw tt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);const i=Xw.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Y()}verifyOperationInProgress(){}async du(){let e;do e=this.iu,await e;while(e!==this.iu)}Au(e){for(const n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const n=this._u.indexOf(e);this._u.splice(n,1)}}function Ey(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class a9{constructor(){this._progressObserver={},this._taskCompletionResolver=new yt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9=-1;let Xe=class extends Bc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new o9}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Uk(this),this._firestoreClient.terminate()}};function It(t){return t._firestoreClient||Uk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Uk(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new Oq(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,xk(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new QG(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function u9(t,e){Bk(t=fe(t,Xe));const n=It(t);if(n._uninitializedComponentsProvider)throw new B(F.FAILED_PRECONDITION,"SDK cache is already specified.");nr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new aE;return $k(n,i,new Sk(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function c9(t){Bk(t=fe(t,Xe));const e=It(t);if(e._uninitializedComponentsProvider)throw new B(F.FAILED_PRECONDITION,"SDK cache is already specified.");nr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new aE;return $k(e,r,new GG(r,n.cacheSizeBytes))}function $k(t,e,n){const r=new yt;return t.asyncQueue.enqueue(async()=>{try{await ch(t,n),await wy(t,e),r.resolve()}catch(i){const s=i;if(!Pk(s))throw s;nr("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function d9(t){if(t._initialized&&!t._terminated)throw new B(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!_r.D())return Promise.resolve();const i=r+"main";await _r.delete(i)}(qw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function h9(t){return function(n){const r=new yt;return n.asyncQueue.enqueueAndForget(async()=>OG(await cE(n),r)),r.promise}(It(t=fe(t,Xe)))}function f9(t){return XG(It(t=fe(t,Xe)))}function p9(t){return JG(It(t=fe(t,Xe)))}function m9(t,e){const n=It(t=fe(t,Xe)),r=new a9;return n9(n,t._databaseId,e,r),r}function g9(t,e){return r9(It(t=fe(t,Xe)),e).then(n=>n?new Zt(t,null,n.query):null)}function Bk(t){if(t._initialized||t._terminated)throw new B(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sr(ct.fromBase64String(e))}catch(n){throw new B(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sr(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=/^__.*__$/;class y9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new el(e,this.data,n,this.fieldTransforms)}}class jk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Bp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Bp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return mf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(zk(this.fu)&&v9.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class _9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uc(e)}Fu(e,n,r,i=!1){return new Bp({fu:e,methodName:n,vu:r,path:Fe.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vo(t){const e=t._freezeSettings(),n=Uc(t._databaseId);return new _9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jp(t,e,n,r,i,s={}){const o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);yE("Data must be an object, but it was:",o,r);const a=Wk(r,o);let l,u;if(s.merge)l=new ln(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=Iy(e,h,n);if(!o.contains(f))throw new B(F.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Kk(d,f)||d.push(f)}l=new ln(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new y9(new bt(a),l,u)}class jc extends go{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jc}}function qk(t,e,n){return new Bp({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hE extends go{_toFieldTransform(e){return new Mc(e.path,new Na)}isEqual(e){return e instanceof hE}}class fE extends go{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=qk(this,e,!0),r=this.Mu.map(s=>yo(s,n)),i=new to(r);return new Mc(e.path,i)}isEqual(e){return e instanceof fE&&Xu(this.Mu,e.Mu)}}class pE extends go{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){const n=qk(this,e,!0),r=this.Mu.map(s=>yo(s,n)),i=new no(r);return new Mc(e.path,i)}isEqual(e){return e instanceof pE&&Xu(this.Mu,e.Mu)}}class mE extends go{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){const n=new Oa(e.serializer,_x(e.serializer,this.xu));return new Mc(e.path,n)}isEqual(e){return e instanceof mE&&this.xu===e.xu}}function gE(t,e,n,r){const i=t.Fu(1,e,n);yE("Data must be an object, but it was:",i,r);const s=[],o=bt.empty();mo(r,(l,u)=>{const d=_E(e,l,n);u=J(u);const h=i.Su(d);if(u instanceof jc)s.push(d);else{const f=yo(u,h);f!=null&&(s.push(d),o.set(d,f))}});const a=new ln(s);return new jk(o,a,i.fieldTransforms)}function vE(t,e,n,r,i,s){const o=t.Fu(1,e,n),a=[Iy(e,r,n)],l=[i];if(s.length%2!=0)throw new B(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Iy(e,s[f])),l.push(s[f+1]);const u=[],d=bt.empty();for(let f=a.length-1;f>=0;--f)if(!Kk(u,a[f])){const g=a[f];let _=l[f];_=J(_);const E=o.Su(g);if(_ instanceof jc)u.push(g);else{const T=yo(_,E);T!=null&&(u.push(g),d.set(g,T))}}const h=new ln(u);return new jk(d,h,o.fieldTransforms)}function Gk(t,e,n,r=!1){return yo(n,t.Fu(r?4:3,e))}function yo(t,e){if(Hk(t=J(t)))return yE("Unsupported field value:",e,t),Wk(t,e);if(t instanceof go)return function(r,i){if(!zk(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=yo(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=J(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _x(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=$e.fromDate(r);return{timestampValue:Da(i.serializer,s)}}if(r instanceof $e){const s=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Da(i.serializer,s)}}if(r instanceof $p)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sr)return{bytesValue:kx(i.serializer,r._byteString)};if(r instanceof qe){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Fw(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Up(r)}`)}(t,e)}function Wk(t,e){const n={};return Z1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mo(t,(r,i)=>{const s=yo(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Hk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof $p||t instanceof Sr||t instanceof qe||t instanceof go)}function yE(t,e,n){if(!Hk(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Up(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Iy(t,e,n){if((e=J(e))instanceof Zi)return e._internalPath;if(typeof e=="string")return _E(t,e);throw mf("Field path arguments must be of type string or ",t,!1,void 0,n)}const w9=new RegExp("[~\\*/\\[\\]]");function _E(t,e,n){if(e.search(w9)>=0)throw mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zi(...e.split("."))._internalPath}catch{throw mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new B(F.INVALID_ARGUMENT,a+t+l)}function Kk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new E9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class E9 extends pc{data(){return super.data()}}function zp(t,e){return typeof e=="string"?_E(t,e):e instanceof Zi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wE{}class zc extends wE{}function fi(t,e,...n){let r=[];e instanceof wE&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof EE).length,a=s.filter(l=>l instanceof qp).length;if(o>1||o>0&&a>0)throw new B(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class qp extends zc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new qp(e,n,r)}_apply(e){const n=this._parse(e);return Xk(e._query,n),new Zt(e.firestore,e.converter,ay(e._query,n))}_parse(e){const n=vo(e.firestore);return function(s,o,a,l,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){lP(h,d);const g=[];for(const _ of h)g.push(aP(l,s,_));f={arrayValue:{values:g}}}else f=aP(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||lP(h,d),f=Gk(a,o,h,d==="in"||d==="not-in");return ce.create(u,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function I9(t,e,n){const r=e,i=zp("where",t);return qp._create(i,r,n)}class EE extends wE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new EE(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ye.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Xk(o,l),o=ay(o,l)}(e._query,n),new Zt(e.firestore,e.converter,ay(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class IE extends zc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new IE(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new B(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new B(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dc(s,o)}(e._query,this._field,this._direction);return new Zt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ei(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function T9(t,e="asc"){const n=e,r=zp("orderBy",t);return IE._create(r,n)}class Gp extends zc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Gp(e,n,r)}_apply(e){return new Zt(e.firestore,e.converter,of(e._query,this._limit,this._limitType))}}function S9(t){return Nk("limit",t),Gp._create("limit",t,"F")}function P9(t){return Nk("limitToLast",t),Gp._create("limitToLast",t,"L")}class Wp extends zc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Wp(e,n,r)}_apply(e){const n=Yk(e,this.type,this._docOrFields,this._inclusive);return new Zt(e.firestore,e.converter,function(i,s){return new ei(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function b9(...t){return Wp._create("startAt",t,!0)}function A9(...t){return Wp._create("startAfter",t,!1)}class Hp extends zc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Hp(e,n,r)}_apply(e){const n=Yk(e,this.type,this._docOrFields,this._inclusive);return new Zt(e.firestore,e.converter,function(i,s){return new ei(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function R9(...t){return Hp._create("endBefore",t,!1)}function C9(...t){return Hp._create("endAt",t,!0)}function Yk(t,e,n,r){if(n[0]=J(n[0]),n[0]instanceof pc)return function(s,o,a,l,u){if(!l)throw new B(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const h of da(s))if(h.field.isKeyField())d.push(Zs(o,l.key));else{const f=l.data.field(h.field);if(Cp(f))throw new B(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const g=h.field.canonicalString();throw new B(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(f)}return new Xi(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=vo(t.firestore);return function(o,a,l,u,d,h){const f=o.explicitOrderBy;if(d.length>f.length)throw new B(F.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let _=0;_<d.length;_++){const E=d[_];if(f[_].field.isKeyField()){if(typeof E!="string")throw new B(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof E}`);if(!kw(o)&&E.indexOf("/")!==-1)throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${E}' contains a slash.`);const T=o.path.child(ue.fromString(E));if(!W.isDocumentKey(T))throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const m=new W(T);g.push(Zs(a,m))}else{const T=Gk(l,u,E);g.push(T)}}return new Xi(g,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function aP(t,e,n){if(typeof(n=J(n))=="string"){if(n==="")throw new B(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kw(e)&&n.indexOf("/")!==-1)throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ue.fromString(n));if(!W.isDocumentKey(r))throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zs(t,new W(r))}if(n instanceof qe)return Zs(t,n._key);throw new B(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Up(n)}.`)}function lP(t,e){if(!Array.isArray(t)||t.length===0)throw new B(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xk(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class TE{convertValue(e,n="none"){switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return mo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new $p(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lc(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ue.fromString(e);ee(jx(r));const i=new Qi(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(n)||tt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class x9 extends TE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Qr=class extends pc{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},wu=class extends Qr{data(e={}){return super.data(e)}},es=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ns(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wu(this._firestore,this._userDataWriter,r.key,r,new Ns(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new wu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ns(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new wu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ns(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:k9(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function k9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function Jk(t,e){return t instanceof Qr&&e instanceof Qr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof es&&e instanceof es&&t._firestore===e._firestore&&Fk(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N9(t){t=fe(t,qe);const e=fe(t.firestore,Xe);return Rk(It(e),t._key).then(n=>SE(e,t,n))}class _o extends TE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}}function O9(t){t=fe(t,qe);const e=fe(t.firestore,Xe),n=It(e),r=new _o(e);return ZG(n,t._key).then(i=>new Qr(e,r,t._key,i,new Ns(i!==null&&i.hasLocalMutations,!0),t.converter))}function D9(t){t=fe(t,qe);const e=fe(t.firestore,Xe);return Rk(It(e),t._key,{source:"server"}).then(n=>SE(e,t,n))}function L9(t){t=fe(t,Zt);const e=fe(t.firestore,Xe),n=It(e),r=new _o(e);return Qk(t._query),Ck(n,t._query).then(i=>new es(e,r,t,i))}function M9(t){t=fe(t,Zt);const e=fe(t.firestore,Xe),n=It(e),r=new _o(e);return e9(n,t._query).then(i=>new es(e,r,t,i))}function V9(t){t=fe(t,Zt);const e=fe(t.firestore,Xe),n=It(e),r=new _o(e);return Ck(n,t._query,{source:"server"}).then(i=>new es(e,r,t,i))}function uP(t,e,n){t=fe(t,qe);const r=fe(t.firestore,Xe),i=Kp(t.converter,e,n);return qc(r,[jp(vo(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ue.none())])}function cP(t,e,n,...r){t=fe(t,qe);const i=fe(t.firestore,Xe),s=vo(i);let o;return o=typeof(e=J(e))=="string"||e instanceof Zi?vE(s,"updateDoc",t._key,e,n,r):gE(s,"updateDoc",t._key,e),qc(i,[o.toMutation(t._key,Ue.exists(!0))])}function F9(t){return qc(fe(t.firestore,Xe),[new tl(t._key,Ue.none())])}function U9(t,e){const n=fe(t.firestore,Xe),r=pf(t),i=Kp(t.converter,e);return qc(n,[jp(vo(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ue.exists(!1))]).then(()=>r)}function Zk(t,...e){var n,r,i;t=J(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Ey(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Ey(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,d;if(t instanceof qe)u=fe(t.firestore,Xe),d=Za(t._key.path),l={next:h=>{e[o]&&e[o](SE(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=fe(t,Zt);u=fe(h.firestore,Xe),d=h._query;const f=new _o(u);l={next:g=>{e[o]&&e[o](new es(u,f,h,g))},error:e[o+1],complete:e[o+2]},Qk(t._query)}return function(f,g,_,E){const T=new Vp(E),m=new tE(g,T,_);return f.asyncQueue.enqueueAndForget(async()=>Jw(await $a(f),m)),()=>{T.$a(),f.asyncQueue.enqueueAndForget(async()=>Zw(await $a(f),m))}}(It(u),d,a,l)}function $9(t,e){return t9(It(t=fe(t,Xe)),Ey(e)?e:{next:e})}function qc(t,e){return function(r,i){const s=new yt;return r.asyncQueue.enqueueAndForget(async()=>CG(await cE(r),i,s)),s.promise}(It(t),e)}function SE(t,e,n){const r=n.docs.get(e._key),i=new _o(t);return new Qr(t,i,e._key,r,new Ns(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j9=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=vo(e)}set(e,n,r){this._verifyNotCommitted();const i=Ii(e,this._firestore),s=Kp(i.converter,n,r),o=jp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ue.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Ii(e,this._firestore);let o;return o=typeof(n=J(n))=="string"||n instanceof Zi?vE(this._dataReader,"WriteBatch.update",s._key,n,r,i):gE(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ue.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ii(e,this._firestore);return this._mutations=this._mutations.concat(new tl(n._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ii(t,e){if((t=J(t)).firestore!==e)throw new B(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z9=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=vo(n)}get(n){const r=Ii(n,this._firestore),i=new x9(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Y();const o=s[0];if(o.isFoundDocument())return new pc(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new pc(this._firestore,i,r._key,null,r.converter);throw Y()})}set(n,r,i){const s=Ii(n,this._firestore),o=Kp(s.converter,r,i),a=jp(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Ii(n,this._firestore);let a;return a=typeof(r=J(r))=="string"||r instanceof Zi?vE(this._dataReader,"Transaction.update",o._key,r,i,s):gE(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Ii(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Ii(e,this._firestore),r=new _o(this._firestore);return super.get(e).then(i=>new Qr(this._firestore,r,n._key,i._document,new Ns(!1,!1),n.converter))}};function q9(t,e,n){t=fe(t,Xe);const r=Object.assign(Object.assign({},B9),n);return function(s){if(s.maxAttempts<1)throw new B(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new yt;return s.asyncQueue.enqueueAndForget(async()=>{const u=await YG(s);new KG(s.asyncQueue,u,a,o,l).Xa()}),l.promise}(It(t),i=>e(new z9(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(){return new jc("deleteField")}function eN(){return new hE("serverTimestamp")}function W9(...t){return new fE("arrayUnion",t)}function H9(...t){return new pE("arrayRemove",t)}function K9(t){return new mE("increment",t)}(function(e,n=!0){(function(i){Ja=i})(jn),er(new fn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Xe(new nq(r.getProvider("auth-internal")),new oq(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new B(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qi(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Yt(rS,"4.6.3",e),Yt(rS,"4.6.3","esm2017")})();const Q9="@firebase/firestore-compat",Y9="0.3.32";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new B("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(){if(typeof Uint8Array>"u")throw new B("unimplemented","Uint8Arrays are not available in this environment.")}function hP(){if(!kq())throw new B("unimplemented","Blobs are unavailable in Firestore in this environment.")}let tN=class Ty{constructor(e){this._delegate=e}static fromBase64String(e){return hP(),new Ty(Sr.fromBase64String(e))}static fromUint8Array(e){return dP(),new Ty(Sr.fromUint8Array(e))}toBase64(){return hP(),this._delegate.toBase64()}toUint8Array(){return dP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t){return X9(t,["next","error","complete"])}function X9(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{enableIndexedDbPersistence(e,n){return u9(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return c9(e._delegate)}clearIndexedDbPersistence(e){return d9(e._delegate)}}class nN{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&nr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){i9(this._delegate,e,n,r)}enableNetwork(){return f9(this._delegate)}disableNetwork(){return p9(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,kk("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return h9(this._delegate)}onSnapshotsInSync(e){return $9(this._delegate,e)}get app(){if(!this._appCompat)throw new B("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ba(this,Mk(this._delegate,e))}catch(n){throw Ht(n,"collection()","Firestore.collection()")}}doc(e){try{return new Dn(this,pf(this._delegate,e))}catch(n){throw Ht(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Wt(this,s9(this._delegate,e))}catch(n){throw Ht(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return q9(this._delegate,n=>e(new rN(this,n)))}batch(){return It(this._delegate),new iN(new j9(this._delegate,e=>qc(this._delegate,e)))}loadBundle(e){return m9(this._delegate,e)}namedQuery(e){return g9(this._delegate,e).then(n=>n?new Wt(this,n):null)}}class Qp extends TE{constructor(e){super(),this.firestore=e}convertBytes(e){return new tN(new Sr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Dn.forKey(n,this.firestore,null)}}function Z9(t){J4(t)}class rN{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Qp(e)}get(e){const n=Os(e);return this._delegate.get(n).then(r=>new mc(this._firestore,new Qr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Os(e);return r?(PE("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Os(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Os(e);return this._delegate.delete(n),this}}class iN{constructor(e){this._delegate=e}set(e,n,r){const i=Os(e);return r?(PE("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Os(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Os(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class oo{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new wu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gc(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=oo.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new oo(e,new Qp(e),n),i.set(n,s)),s}}oo.INSTANCES=new WeakMap;class Dn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Qp(e)}static forPath(e,n,r){if(e.length%2!==0)throw new B("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Dn(n,new qe(n._delegate,r,new W(e)))}static forKey(e,n,r){return new Dn(n,new qe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ba(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ba(this.firestore,Mk(this._delegate,e))}catch(n){throw Ht(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=J(e),e instanceof qe?Vk(this._delegate,e):!1}set(e,n){n=PE("DocumentReference.set",n);try{return n?uP(this._delegate,e,n):uP(this._delegate,e)}catch(r){throw Ht(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?cP(this._delegate,e):cP(this._delegate,e,n,...r)}catch(i){throw Ht(i,"updateDoc()","DocumentReference.update()")}}delete(){return F9(this._delegate)}onSnapshot(...e){const n=sN(e),r=oN(e,i=>new mc(this.firestore,new Qr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Zk(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=O9(this._delegate):(e==null?void 0:e.source)==="server"?n=D9(this._delegate):n=N9(this._delegate),n.then(r=>new mc(this.firestore,new Qr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Dn(this.firestore,e?this._delegate.withConverter(oo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ht(t,e,n){return t.message=t.message.replace(e,n),t}function sN(t){for(const e of t)if(typeof e=="object"&&!Sy(e))return e;return{}}function oN(t,e){var n,r;let i;return Sy(t[0])?i=t[0]:Sy(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class mc{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Dn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Jk(this._delegate,e._delegate)}}class gc extends mc{data(e){const n=this._delegate.data(e);return this._delegate._converter||Z4(n!==void 0),n}}class Wt{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Qp(e)}where(e,n,r){try{return new Wt(this.firestore,fi(this._delegate,I9(e,n,r)))}catch(i){throw Ht(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Wt(this.firestore,fi(this._delegate,T9(e,n)))}catch(r){throw Ht(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Wt(this.firestore,fi(this._delegate,S9(e)))}catch(n){throw Ht(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Wt(this.firestore,fi(this._delegate,P9(e)))}catch(n){throw Ht(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Wt(this.firestore,fi(this._delegate,b9(...e)))}catch(n){throw Ht(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Wt(this.firestore,fi(this._delegate,A9(...e)))}catch(n){throw Ht(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Wt(this.firestore,fi(this._delegate,R9(...e)))}catch(n){throw Ht(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Wt(this.firestore,fi(this._delegate,C9(...e)))}catch(n){throw Ht(n,"endAt()","Query.endAt()")}}isEqual(e){return Fk(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=M9(this._delegate):(e==null?void 0:e.source)==="server"?n=V9(this._delegate):n=L9(this._delegate),n.then(r=>new Py(this.firestore,new es(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=sN(e),r=oN(e,i=>new Py(this.firestore,new es(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Zk(this._delegate,n,r)}withConverter(e){return new Wt(this.firestore,e?this._delegate.withConverter(oo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class e3{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new gc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Py{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Wt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new gc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new e3(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new gc(this._firestore,r))})}isEqual(e){return Jk(this._delegate,e._delegate)}}class Ba extends Wt{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Dn(this.firestore,e):null}doc(e){try{return e===void 0?new Dn(this.firestore,pf(this._delegate)):new Dn(this.firestore,pf(this._delegate,e))}catch(n){throw Ht(n,"doc()","CollectionReference.doc()")}}add(e){return U9(this._delegate,e).then(n=>new Dn(this.firestore,n))}isEqual(e){return Vk(this._delegate,e._delegate)}withConverter(e){return new Ba(this.firestore,e?this._delegate.withConverter(oo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Os(t){return fe(t,qe)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(...e){this._delegate=new Zi(...e)}static documentId(){return new bE(Fe.keyField().canonicalString())}isEqual(e){return e=J(e),e instanceof Zi?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this._delegate=e}static serverTimestamp(){const e=eN();return e._methodName="FieldValue.serverTimestamp",new As(e)}static delete(){const e=G9();return e._methodName="FieldValue.delete",new As(e)}static arrayUnion(...e){const n=W9(...e);return n._methodName="FieldValue.arrayUnion",new As(n)}static arrayRemove(...e){const n=H9(...e);return n._methodName="FieldValue.arrayRemove",new As(n)}static increment(e){const n=K9(e);return n._methodName="FieldValue.increment",new As(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3={Firestore:nN,GeoPoint:$p,Timestamp:$e,Blob:tN,Transaction:rN,WriteBatch:iN,DocumentReference:Dn,DocumentSnapshot:mc,Query:Wt,QueryDocumentSnapshot:gc,QuerySnapshot:Py,CollectionReference:Ba,FieldPath:bE,FieldValue:As,setLogLevel:Z9,CACHE_SIZE_UNLIMITED:l9};function n3(t,e){t.INTERNAL.registerComponent(new fn("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},t3)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t){n3(t,(e,n)=>new nN(e,n,new J9)),t.registerVersion(Q9,Y9)}r3(pn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="firebasestorage.googleapis.com",lN="storageBucket",i3=2*60*1e3,s3=10*60*1e3,o3=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We extends gt{constructor(e,n,r=0){super(Ig(e),`Firebase Storage: ${n} (${Ig(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,We.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ig(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var De;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(De||(De={}));function Ig(t){return"storage/"+t}function AE(){const t="An unknown error occurred, please check the error payload for server response.";return new We(De.UNKNOWN,t)}function a3(t){return new We(De.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function l3(t){return new We(De.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function u3(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new We(De.UNAUTHENTICATED,t)}function c3(){return new We(De.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function d3(t){return new We(De.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function uN(){return new We(De.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function cN(){return new We(De.CANCELED,"User canceled the upload/download.")}function h3(t){return new We(De.INVALID_URL,"Invalid URL '"+t+"'.")}function f3(t){return new We(De.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function p3(){return new We(De.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+lN+"' property when initializing the app?")}function dN(){return new We(De.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function m3(){return new We(De.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function g3(){return new We(De.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function v3(t){return new We(De.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function fa(t){return new We(De.INVALID_ARGUMENT,t)}function hN(){return new We(De.APP_DELETED,"The Firebase app was deleted.")}function fN(t){return new We(De.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Eu(t,e){return new We(De.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Bl(t){throw new We(De.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ft.makeFromUrl(e,n)}catch{return new Ft(e,"")}if(r.path==="")return r;throw f3(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${d}/b/${i}/o${f}`,"i"),_={bucket:1,path:3},E=n===aN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",m=new RegExp(`^https?://${E}/${i}/${T}`,"i"),w=[{regex:a,indices:l,postModify:s},{regex:g,indices:_,postModify:u},{regex:m,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<w.length;C++){const O=w[C],D=O.regex.exec(e);if(D){const A=D[O.indices.bucket];let I=D[O.indices.path];I||(I=""),r=new Ft(A,I),O.postModify(r);break}}if(r==null)throw h3(e);return r}}class y3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function d(...T){u||(u=!0,e.apply(null,T))}function h(T){i=setTimeout(()=>{i=null,t(g,l())},T)}function f(){s&&clearTimeout(s)}function g(T,...m){if(u){f();return}if(T){f(),d.call(null,T,...m);return}if(l()||o){f(),d.call(null,T,...m);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,h(w)}let _=!1;function E(T){_||(_=!0,f(),!u&&(i!==null?(T||(a=2),clearTimeout(i),h(0)):T||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,E(!0)},n),E}function w3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(t){return t!==void 0}function I3(t){return typeof t=="function"}function T3(t){return typeof t=="object"&&!Array.isArray(t)}function Yp(t){return typeof t=="string"||t instanceof String}function fP(t){return RE()&&t instanceof Blob}function RE(){return typeof Blob<"u"}function by(t,e,n,r){if(r<e)throw fa(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw fa(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function pN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Bs||(Bs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,n,r,i,s,o,a,l,u,d,h,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,_)=>{this.resolve_=g,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Nd(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Bs.NO_ERROR,l=s.getStatus();if(!a||mN(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Bs.ABORT;r(!1,new Nd(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Nd(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());E3(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=AE();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?hN():cN();o(l)}else{const l=uN();o(l)}};this.canceled_?n(!1,new Nd(!1,null,!0)):this.backoffId_=_3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&w3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Nd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function P3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function b3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function A3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function R3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function C3(t,e,n,r,i,s,o=!0){const a=pN(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return A3(u,e),P3(u,n),b3(u,s),R3(u,r),new S3(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function k3(...t){const e=x3();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(RE())return new Blob(t);throw new We(De.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function N3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t){if(typeof atob>"u")throw v3("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Tg{constructor(e,n){this.data=e,this.contentType=n||null}}function gN(t,e){switch(t){case Ln.RAW:return new Tg(vN(e));case Ln.BASE64:case Ln.BASE64URL:return new Tg(yN(t,e));case Ln.DATA_URL:return new Tg(L3(e),M3(e))}throw AE()}function vN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function D3(t){let e;try{e=decodeURIComponent(t)}catch{throw Eu(Ln.DATA_URL,"Malformed data URL.")}return vN(e)}function yN(t,e){switch(t){case Ln.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Eu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ln.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Eu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=O3(e)}catch(i){throw i.message.includes("polyfill")?i:Eu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class _N{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Eu(Ln.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=V3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function L3(t){const e=new _N(t);return e.base64?yN(Ln.BASE64,e.rest):D3(e.rest)}function M3(t){return new _N(t).contentType}function V3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n){let r=0,i="";fP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(fP(this.data_)){const r=this.data_,i=N3(r,e,n);return i===null?null:new Or(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Or(r,!0)}}static getBlob(...e){if(RE()){const n=e.map(r=>r instanceof Or?r.data_:r);return new Or(k3.apply(null,n))}else{const n=e.map(o=>Yp(o)?gN(Ln.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Or(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t){let e;try{e=JSON.parse(t)}catch{return null}return T3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function U3(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function wN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(t,e){return e}class qt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||$3}}let Od=null;function B3(t){return!Yp(t)||t.length<2?t:wN(t)}function Xp(){if(Od)return Od;const t=[];t.push(new qt("bucket")),t.push(new qt("generation")),t.push(new qt("metageneration")),t.push(new qt("name","fullPath",!0));function e(s,o){return B3(o)}const n=new qt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new qt("size");return i.xform=r,t.push(i),t.push(new qt("timeCreated")),t.push(new qt("updated")),t.push(new qt("md5Hash",null,!0)),t.push(new qt("cacheControl",null,!0)),t.push(new qt("contentDisposition",null,!0)),t.push(new qt("contentEncoding",null,!0)),t.push(new qt("contentLanguage",null,!0)),t.push(new qt("contentType",null,!0)),t.push(new qt("metadata","customMetadata",!0)),Od=t,Od}function j3(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Ft(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function z3(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return j3(r,t),r}function EN(t,e,n){const r=CE(e);return r===null?null:z3(t,r,n)}function q3(t,e,n,r){const i=CE(e);if(i===null||!Yp(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const d=t.bucket,h=t.fullPath,f="/b/"+o(d)+"/o/"+o(h),g=cs(f,n,r),_=pN({alt:"media",token:u});return g+_})[0]}function xE(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="prefixes",mP="items";function G3(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[pP])for(const i of n[pP]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new Ft(e,s));r.prefixes.push(o)}if(n[mP])for(const i of n[mP]){const s=t._makeStorageReference(new Ft(e,i.name));r.items.push(s)}return r}function W3(t,e,n){const r=CE(n);return r===null?null:G3(t,e,r)}class ri{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t){if(!t)throw AE()}function Jp(t,e){function n(r,i){const s=EN(t,i,e);return Er(s!==null),s}return n}function H3(t,e){function n(r,i){const s=W3(t,e,i);return Er(s!==null),s}return n}function K3(t,e){function n(r,i){const s=EN(t,i,e);return Er(s!==null),q3(s,i,t.host,t._protocol)}return n}function ol(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=c3():i=u3():n.getStatus()===402?i=l3(t.bucket):n.getStatus()===403?i=d3(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Zp(t){const e=ol(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=a3(t.path)),s.serverResponse=i.serverResponse,s}return n}function IN(t,e,n){const r=e.fullServerUrl(),i=cs(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ri(i,s,Jp(t,n),o);return a.errorHandler=Zp(e),a}function Q3(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=cs(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,d=new ri(a,l,H3(t,e.bucket),u);return d.urlParams=s,d.errorHandler=ol(e),d}function Y3(t,e,n){const r=e.fullServerUrl(),i=cs(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ri(i,s,K3(t,n),o);return a.errorHandler=Zp(e),a}function X3(t,e,n,r){const i=e.fullServerUrl(),s=cs(i,t.host,t._protocol),o="PATCH",a=xE(n,r),l={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,d=new ri(s,o,Jp(t,r),u);return d.headers=l,d.body=a,d.errorHandler=Zp(e),d}function J3(t,e){const n=e.fullServerUrl(),r=cs(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new ri(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Zp(e),a}function Z3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function TN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Z3(null,e)),r}function eW(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let C=0;C<2;C++)w=w+Math.random().toString().slice(2);return w}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=TN(e,r,i),d=xE(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+l+"--",g=Or.getBlob(h,r,f);if(g===null)throw dN();const _={name:u.fullPath},E=cs(s,t.host,t._protocol),T="POST",m=t.maxUploadRetryTime,v=new ri(E,T,Jp(t,n),m);return v.urlParams=_,v.headers=o,v.body=g.uploadData(),v.errorHandler=ol(e),v}class gf{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function kE(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Er(!1)}return Er(!!n&&(e||["active"]).indexOf(n)!==-1),n}function tW(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=TN(e,r,i),a={name:o.fullPath},l=cs(s,t.host,t._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=xE(o,n),f=t.maxUploadRetryTime;function g(E){kE(E);let T;try{T=E.getResponseHeader("X-Goog-Upload-URL")}catch{Er(!1)}return Er(Yp(T)),T}const _=new ri(l,u,g,f);return _.urlParams=a,_.headers=d,_.body=h,_.errorHandler=ol(e),_}function nW(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(u){const d=kE(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Er(!1)}h||Er(!1);const f=Number(h);return Er(!isNaN(f)),new gf(f,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new ri(n,o,s,a);return l.headers=i,l.errorHandler=ol(e),l}const gP=256*1024;function rW(t,e,n,r,i,s,o,a){const l=new gf(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw m3();const u=l.total-l.current;let d=u;i>0&&(d=Math.min(d,i));const h=l.current,f=h+d;let g="";d===0?g="finalize":u===d?g="upload, finalize":g="upload";const _={"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":`${l.current}`},E=r.slice(h,f);if(E===null)throw dN();function T(C,O){const D=kE(C,["active","final"]),A=l.current+d,I=r.size();let P;return D==="final"?P=Jp(e,s)(C,O):P=null,new gf(A,I,D==="final",P)}const m="POST",v=e.maxUploadRetryTime,w=new ri(n,m,T,v);return w.headers=_,w.body=E.uploadData(),w.progressCallback=a||null,w.errorHandler=ol(t),w}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW={STATE_CHANGED:"state_changed"},Kt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Sg(t){switch(t){case"running":case"pausing":case"canceling":return Kt.RUNNING;case"paused":return Kt.PAUSED;case"success":return Kt.SUCCESS;case"canceled":return Kt.CANCELED;case"error":return Kt.ERROR;default:return Kt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sW=class{constructor(e,n,r){if(I3(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class oW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Bl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class aW extends oW{initXhr(){this.xhr_.responseType="text"}}function cr(){return new aW}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Xp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(De.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(mN(i.status,[]))if(s)i=uN();else{this.sleepTime=Math.max(this.sleepTime*2,o3),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(De.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=tW(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,cr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=nW(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,cr,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=gP*this._chunkMultiplier,n=new gf(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=rW(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,cr,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){gP*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=IN(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,cr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=eW(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,cr,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=cN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Sg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new sW(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Sg(this._state)){case Kt.SUCCESS:Do(this._resolve.bind(null,this.snapshot))();break;case Kt.CANCELED:case Kt.ERROR:const n=this._reject;Do(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Sg(this._state)){case Kt.RUNNING:case Kt.PAUSED:e.next&&Do(e.next.bind(e,this.snapshot))();break;case Kt.SUCCESS:e.complete&&Do(e.complete.bind(e))();break;case Kt.CANCELED:case Kt.ERROR:e.error&&Do(e.error.bind(e,this._error))();break;default:e.error&&Do(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n){this._service=e,n instanceof Ft?this._location=n:this._location=Ft.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ao(e,n)}get root(){const e=new Ft(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wN(this._location.path)}get storage(){return this._service}get parent(){const e=F3(this._location.path);if(e===null)return null;const n=new Ft(this._location.bucket,e);return new ao(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fN(e)}}function lW(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new SN(t,new Or(e),n)}function uW(t){const e={prefixes:[],items:[]};return PN(t,e).then(()=>e)}async function PN(t,e,n){const i=await bN(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await PN(t,e,i.nextPageToken)}function bN(t,e){e!=null&&typeof e.maxResults=="number"&&by("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=Q3(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,cr)}function cW(t){t._throwIfRoot("getMetadata");const e=IN(t.storage,t._location,Xp());return t.storage.makeRequestWithTokens(e,cr)}function dW(t,e){t._throwIfRoot("updateMetadata");const n=X3(t.storage,t._location,e,Xp());return t.storage.makeRequestWithTokens(n,cr)}function hW(t){t._throwIfRoot("getDownloadURL");const e=Y3(t.storage,t._location,Xp());return t.storage.makeRequestWithTokens(e,cr).then(n=>{if(n===null)throw g3();return n})}function fW(t){t._throwIfRoot("deleteObject");const e=J3(t.storage,t._location);return t.storage.makeRequestWithTokens(e,cr)}function AN(t,e){const n=U3(t._location.path,e),r=new Ft(t._location.bucket,n);return new ao(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pW(t){return/^[A-Za-z]+:\/\//.test(t)}function mW(t,e){return new ao(t,e)}function RN(t,e){if(t instanceof NE){const n=t;if(n._bucket==null)throw p3();const r=new ao(n,n._bucket);return e!=null?RN(r,e):r}else return e!==void 0?AN(t,e):t}function gW(t,e){if(e&&pW(e)){if(t instanceof NE)return mW(t,e);throw fa("To use ref(service, url), the first argument must be a Storage instance.")}else return RN(t,e)}function vP(t,e){const n=e==null?void 0:e[lN];return n==null?null:Ft.makeFromBucketSpec(n,t)}function vW(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:yC(i,t.app.options.projectId))}class NE{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=aN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=i3,this._maxUploadRetryTime=s3,this._requests=new Set,i!=null?this._bucket=Ft.makeFromBucketSpec(i,this._host):this._bucket=vP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ft.makeFromBucketSpec(this._url,e):this._bucket=vP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){by("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){by("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ao(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new y3(hN());{const o=C3(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const yP="@firebase/storage",_P="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW="storage";function _W(t,e,n){return t=J(t),lW(t,e,n)}function wW(t){return t=J(t),cW(t)}function EW(t,e){return t=J(t),dW(t,e)}function IW(t,e){return t=J(t),bN(t,e)}function TW(t){return t=J(t),uW(t)}function SW(t){return t=J(t),hW(t)}function PW(t){return t=J(t),fW(t)}function wP(t,e){return t=J(t),gW(t,e)}function bW(t,e){return AN(t,e)}function AW(t,e,n,r={}){vW(t,e,n,r)}function RW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new NE(n,r,i,e,jn)}function CW(){er(new fn(yW,RW,"PUBLIC").setMultipleInstances(!0)),Yt(yP,_P,""),Yt(yP,_P,"esm2017")}CW();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Dd(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Dd(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new Dd(o,this,this._ref)):s={next:n.next?o=>n.next(new Dd(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class IP{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Br(e,this._service))}get items(){return this._delegate.items.map(e=>new Br(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=bW(this._delegate,e);return new Br(n,this.storage)}get root(){return new Br(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Br(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new EP(_W(this._delegate,e,n),this)}putString(e,n=Ln.RAW,r){this._throwIfRoot("putString");const i=gN(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new EP(new SN(this._delegate,new Or(i.data,!0),s),this)}listAll(){return TW(this._delegate).then(e=>new IP(e,this.storage))}list(e){return IW(this._delegate,e||void 0).then(n=>new IP(n,this.storage))}getMetadata(){return wW(this._delegate)}updateMetadata(e){return EW(this._delegate,e)}getDownloadURL(){return SW(this._delegate)}delete(){return this._throwIfRoot("delete"),PW(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw fN(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(TP(e))throw fa("ref() expected a child path but got a URL, use refFromURL instead.");return new Br(wP(this._delegate,e),this)}refFromURL(e){if(!TP(e))throw fa("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ft.makeFromUrl(e,this._delegate.host)}catch{throw fa("refFromUrl() expected a valid full URL but got an invalid one.")}return new Br(wP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){AW(this._delegate,e,n,r)}}function TP(t){return/^[A-Za-z]+:\/\//.test(t)}const xW="@firebase/storage-compat",kW="0.3.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW="storage-compat";function OW(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new CN(n,r)}function DW(t){const e={TaskState:Kt,TaskEvent:iW,StringFormat:Ln,Storage:CN,Reference:Br};t.INTERNAL.registerComponent(new fn(NW,OW,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(xW,kW)}DW(pn);const LW={apiKey:"AIzaSyCVB8pKXHB6_AokRj3BjP4JEOErW2bwckU",authDomain:"events-306b6.firebaseapp.com",projectId:"events-306b6",storageBucket:"events-306b6.appspot.com",messagingSenderId:"818241195654",appId:"1:818241195654:web:d129d8d7370259595d8b07"};pn.apps.length||pn.initializeApp(LW);const dr=pn.firestore(),MW=pn.auth();function xN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VW=xN,kN=new Pr("auth","Firebase",xN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf=new Sc("@firebase/auth");function FW(t,...e){vf.logLevel<=se.WARN&&vf.warn(`Auth (${jn}): ${t}`,...e)}function dh(t,...e){vf.logLevel<=se.ERROR&&vf.error(`Auth (${jn}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t,...e){throw OE(t,...e)}function NN(t,...e){return OE(t,...e)}function ON(t,e,n){const r=Object.assign(Object.assign({},VW()),{[e]:n});return new Pr("auth","Firebase",r).create(e,{appName:t.name})}function hh(t){return ON(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return kN.create(t,...e)}function ge(t,e,...n){if(!t)throw OE(e,...n)}function Iu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dh(e),new Error(e)}function yf(t,e){t||Iu(e)}function UW(){return PP()==="http:"||PP()==="https:"}function PP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $W(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UW()||Z_()||"connection"in navigator)?navigator.onLine:!0}function BW(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n){this.shortDelay=e,this.longDelay=n,yf(n>e,"Short delay should be less than long delay!"),this.isMobile=_C()||gp()}get(){return $W()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jW(t,e){yf(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Iu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Iu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Iu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zW={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qW=new Gc(3e4,6e4);function LN(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function em(t,e,n,r,i={}){return MN(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=is(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),DN.fetch()(VN(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function MN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},zW),e);try{const i=new GW(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ld(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ld(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ld(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ld(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ON(t,d,u);SP(t,d)}}catch(i){if(i instanceof gt)throw i;SP(t,"network-request-failed",{message:String(i)})}}function VN(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?jW(t.config,i):`${t.config.apiScheme}://${i}`}class GW{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(NN(this.auth,"network-request-failed")),qW.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ld(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=NN(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WW(t,e){return em(t,"POST","/v1/accounts:delete",e)}async function FN(t,e){return em(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HW(t,e=!1){const n=J(t),r=await n.getIdToken(e),i=UN(r);ge(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Tu(Pg(i.auth_time)),issuedAtTime:Tu(Pg(i.iat)),expirationTime:Tu(Pg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Pg(t){return Number(t)*1e3}function UN(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const i=Y_(n);return i?JSON.parse(i):(dh("Failed to decode base64 JWT payload"),null)}catch(i){return dh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function bP(t){const e=UN(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ay(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof gt&&KW(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function KW({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tu(this.lastLoginAt),this.creationTime=Tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _f(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ay(t,FN(n,{idToken:r}));ge(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?$N(s.providerUserInfo):[],a=XW(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ry(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function YW(t){const e=J(t);await _f(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XW(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $N(t){return t.map(e=>{var{providerId:n}=e,r=Pc(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JW(t,e){const n=await MN(t,{},async()=>{const r=is({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=VN(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",DN.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZW(t,e){return em(t,"POST","/v2/accounts:revokeToken",LN(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=bP(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await JW(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new pa;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ge(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pa,this.toJSON())}_performRefresh(){return Iu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ri{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Pc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new QW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ry(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ay(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HW(this,e)}reload(){return YW(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _f(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(be(this.auth.app))return Promise.reject(hh(this.auth));const e=await this.getIdToken();return await Ay(this,WW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,m=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:C,isAnonymous:O,providerData:D,stsTokenManager:A}=n;ge(w&&A,e,"internal-error");const I=pa.fromJSON(this.name,A);ge(typeof w=="string",e,"internal-error"),pi(h,e.name),pi(f,e.name),ge(typeof C=="boolean",e,"internal-error"),ge(typeof O=="boolean",e,"internal-error"),pi(g,e.name),pi(_,e.name),pi(E,e.name),pi(T,e.name),pi(m,e.name),pi(v,e.name);const P=new Ri({uid:w,auth:e,email:f,emailVerified:C,displayName:h,isAnonymous:O,photoURL:_,phoneNumber:g,tenantId:E,stsTokenManager:I,createdAt:m,lastLoginAt:v});return D&&Array.isArray(D)&&(P.providerData=D.map(S=>Object.assign({},S))),T&&(P._redirectEventId=T),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new pa;i.updateFromServerResponse(n);const s=new Ri({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _f(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ge(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?$N(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new pa;a.updateFromIdToken(r);const l=new Ri({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ry(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=new Map;function Ds(t){yf(t instanceof Function,"Expected a class definition");let e=AP.get(t);return e?(yf(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AP.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BN.type="NONE";const RP=BN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t,e,n){return`firebase:${t}:${e}:${n}`}class ma{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=bg(this.userKey,i.apiKey,s),this.fullPersistenceKey=bg("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ri._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ma(Ds(RP),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Ds(RP);const o=bg(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const h=Ri._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ma(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ma(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(r5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(s5(e))return"Blackberry";if(o5(e))return"Webos";if(t5(e))return"Safari";if((e.includes("chrome/")||n5(e))&&!e.includes("edge/"))return"Chrome";if(i5(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function e5(t=pe()){return/firefox\//i.test(t)}function t5(t=pe()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n5(t=pe()){return/crios\//i.test(t)}function r5(t=pe()){return/iemobile/i.test(t)}function i5(t=pe()){return/android/i.test(t)}function s5(t=pe()){return/blackberry/i.test(t)}function o5(t=pe()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t,e=[]){let n;switch(t){case"Browser":n=CP(pe());break;case"Worker":n=`${CP(pe())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jn}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l5(t,e={}){return em(t,"GET","/v2/passwordPolicy",LN(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u5=6;class c5{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:u5,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xP(this),this.idTokenSubscription=new xP(this),this.beforeStateQueue=new a5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ds(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ma.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await FN(this,{idToken:e}),r=await Ri._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(be(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _f(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(be(this.app))return Promise.reject(hh(this));const n=e?J(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return be(this.app)?Promise.reject(hh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return be(this.app)?Promise.reject(hh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await l5(this),n=new c5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZW(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ds(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await ma.create(this,[Ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&FW(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function h5(t){return J(t)}class xP{constructor(e){this.auth=e,this.observer=null,this.addObserver=ew(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function f5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ds);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function p5(t,e,n,r){return J(t).onAuthStateChanged(e,n,r)}new Gc(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Gc(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Gc(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Gc(5e3,15e3);var kP="@firebase/auth",NP="1.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function v5(t){er(new fn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jN(t)},u=new d5(r,i,s,l);return f5(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),er(new fn("auth-internal",e=>{const n=h5(e.getProvider("auth").getImmediate());return(r=>new m5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yt(kP,NP,g5(t)),Yt(kP,NP,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=5*60;vC("authIdTokenMaxAge");v5("Browser");const vc=t=>{p5(MW,e=>{if(e){console.log("user",e);const n={id:e.uid,email:e.email,name:e.displayName};t(hC(n))}else console.log("")})};function _5({setSearch:t}){let e=Wa(),n=mp();const r=o=>{t(o.target.value)};let i=Kf(o=>o.userSlice);x.useEffect(()=>{vc(n)},[n]);const s=()=>{pn.auth().signOut(),n(fC()),console.log("")};return M.jsx(M.Fragment,{children:M.jsx(t0,{className:"nav-container",children:M.jsxs(JA,{className:"link-container ",children:[M.jsx("button",{className:"responsive-nav",children:"="}),M.jsx(t0.Brand,{href:"#home",className:"brand",children:"TICKEMASTERS"}),M.jsx("input",{className:"input-res",onChange:o=>{r(o)}}),M.jsxs(Rr,{className:"me-auto",children:[M.jsxs(Rr.Link,{onClick:()=>e("/"),className:"link",children:[" ","HOME"," "]}),M.jsx(Rr.Link,{onClick:()=>e("/"),className:"link",children:"POP"}),M.jsx(Rr.Link,{onClick:()=>e("/"),className:"link",children:"DANCE"}),M.jsx(Rr.Link,{onClick:()=>e("/"),className:"link",children:"CLASSIC"}),M.jsx(Rr.Link,{onClick:()=>e("/"),className:"link",children:"SPORTS"}),M.jsx("input",{className:"input",onChange:o=>{r(o)}}),i?M.jsx(Rr.Link,{onClick:()=>{s()},className:"link",children:"Loggout"}):M.jsx(Rr.Link,{onClick:()=>e("/Login"),className:"link",children:"ANMELDEN"}),M.jsx(Rr.Link,{onClick:()=>e("/Cart"),className:"link",children:"CART"})]})]})})})}function OP(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function DE(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Object.keys(e).forEach(n=>{typeof t[n]>"u"?t[n]=e[n]:OP(e[n])&&OP(t[n])&&Object.keys(e[n]).length>0&&DE(t[n],e[n])})}const zN={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function jr(){const t=typeof document<"u"?document:{};return DE(t,zN),t}const w5={document:zN,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function Cn(){const t=typeof window<"u"?window:{};return DE(t,w5),t}function E5(t){return t===void 0&&(t=""),t.trim().split(" ").filter(e=>!!e.trim())}function I5(t){const e=t;Object.keys(e).forEach(n=>{try{e[n]=null}catch{}try{delete e[n]}catch{}})}function Cy(t,e){return e===void 0&&(e=0),setTimeout(t,e)}function wf(){return Date.now()}function T5(t){const e=Cn();let n;return e.getComputedStyle&&(n=e.getComputedStyle(t,null)),!n&&t.currentStyle&&(n=t.currentStyle),n||(n=t.style),n}function S5(t,e){e===void 0&&(e="x");const n=Cn();let r,i,s;const o=T5(t);return n.WebKitCSSMatrix?(i=o.transform||o.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(a=>a.replace(",",".")).join(", ")),s=new n.WebKitCSSMatrix(i==="none"?"":i)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=s.toString().split(",")),e==="x"&&(n.WebKitCSSMatrix?i=s.m41:r.length===16?i=parseFloat(r[12]):i=parseFloat(r[4])),e==="y"&&(n.WebKitCSSMatrix?i=s.m42:r.length===16?i=parseFloat(r[13]):i=parseFloat(r[5])),i||0}function Md(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function P5(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function yn(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let n=1;n<arguments.length;n+=1){const r=n<0||arguments.length<=n?void 0:arguments[n];if(r!=null&&!P5(r)){const i=Object.keys(Object(r)).filter(s=>e.indexOf(s)<0);for(let s=0,o=i.length;s<o;s+=1){const a=i[s],l=Object.getOwnPropertyDescriptor(r,a);l!==void 0&&l.enumerable&&(Md(t[a])&&Md(r[a])?r[a].__swiper__?t[a]=r[a]:yn(t[a],r[a]):!Md(t[a])&&Md(r[a])?(t[a]={},r[a].__swiper__?t[a]=r[a]:yn(t[a],r[a])):t[a]=r[a])}}}return t}function Vd(t,e,n){t.style.setProperty(e,n)}function qN(t){let{swiper:e,targetPosition:n,side:r}=t;const i=Cn(),s=-e.translate;let o=null,a;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);const u=n>s?"next":"prev",d=(f,g)=>u==="next"&&f>=g||u==="prev"&&f<=g,h=()=>{a=new Date().getTime(),o===null&&(o=a);const f=Math.max(Math.min((a-o)/l,1),0),g=.5-Math.cos(f*Math.PI)/2;let _=s+g*(n-s);if(d(_,n)&&(_=n),e.wrapperEl.scrollTo({[r]:_}),d(_,n)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[r]:_})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(h)};h()}function mr(t,e){return e===void 0&&(e=""),[...t.children].filter(n=>n.matches(e))}function Ef(t){try{console.warn(t);return}catch{}}function If(t,e){e===void 0&&(e=[]);const n=document.createElement(t);return n.classList.add(...Array.isArray(e)?e:E5(e)),n}function b5(t,e){const n=[];for(;t.previousElementSibling;){const r=t.previousElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function A5(t,e){const n=[];for(;t.nextElementSibling;){const r=t.nextElementSibling;e?r.matches(e)&&n.push(r):n.push(r),t=r}return n}function Ci(t,e){return Cn().getComputedStyle(t,null).getPropertyValue(e)}function Tf(t){let e=t,n;if(e){for(n=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(n+=1);return n}}function GN(t,e){const n=[];let r=t.parentElement;for(;r;)e?r.matches(e)&&n.push(r):n.push(r),r=r.parentElement;return n}function xy(t,e,n){const r=Cn();return t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function ht(t){return(Array.isArray(t)?t:[t]).filter(e=>!!e)}let Ag;function R5(){const t=Cn(),e=jr();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function WN(){return Ag||(Ag=R5()),Ag}let Rg;function C5(t){let{userAgent:e}=t===void 0?{}:t;const n=WN(),r=Cn(),i=r.navigator.platform,s=e||r.navigator.userAgent,o={ios:!1,android:!1},a=r.screen.width,l=r.screen.height,u=s.match(/(Android);?[\s\/]+([\d.]+)?/);let d=s.match(/(iPad).*OS\s([\d_]+)/);const h=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!d&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),g=i==="Win32";let _=i==="MacIntel";const E=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&_&&n.touch&&E.indexOf(`${a}x${l}`)>=0&&(d=s.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),_=!1),u&&!g&&(o.os="android",o.android=!0),(d||f||h)&&(o.os="ios",o.ios=!0),o}function HN(t){return t===void 0&&(t={}),Rg||(Rg=C5(t)),Rg}let Cg;function x5(){const t=Cn(),e=HN();let n=!1;function r(){const a=t.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(r()){const a=String(t.navigator.userAgent);if(a.includes("Version/")){const[l,u]=a.split("Version/")[1].split(" ")[0].split(".").map(d=>Number(d));n=l<16||l===16&&u<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),s=r(),o=s||i&&e.ios;return{isSafari:n||s,needPerspectiveFix:n,need3dFix:o,isWebView:i}}function k5(){return Cg||(Cg=x5()),Cg}function N5(t){let{swiper:e,on:n,emit:r}=t;const i=Cn();let s=null,o=null;const a=()=>{!e||e.destroyed||!e.initialized||(r("beforeResize"),r("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(h=>{o=i.requestAnimationFrame(()=>{const{width:f,height:g}=e;let _=f,E=g;h.forEach(T=>{let{contentBoxSize:m,contentRect:v,target:w}=T;w&&w!==e.el||(_=v?v.width:(m[0]||m).inlineSize,E=v?v.height:(m[0]||m).blockSize)}),(_!==f||E!==g)&&a()})}),s.observe(e.el))},u=()=>{o&&i.cancelAnimationFrame(o),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},d=()=>{!e||e.destroyed||!e.initialized||r("orientationchange")};n("init",()=>{if(e.params.resizeObserver&&typeof i.ResizeObserver<"u"){l();return}i.addEventListener("resize",a),i.addEventListener("orientationchange",d)}),n("destroy",()=>{u(),i.removeEventListener("resize",a),i.removeEventListener("orientationchange",d)})}function O5(t){let{swiper:e,extendParams:n,on:r,emit:i}=t;const s=[],o=Cn(),a=function(d,h){h===void 0&&(h={});const f=o.MutationObserver||o.WebkitMutationObserver,g=new f(_=>{if(e.__preventObserver__)return;if(_.length===1){i("observerUpdate",_[0]);return}const E=function(){i("observerUpdate",_[0])};o.requestAnimationFrame?o.requestAnimationFrame(E):o.setTimeout(E,0)});g.observe(d,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:typeof h.childList>"u"?!0:h.childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),s.push(g)},l=()=>{if(e.params.observer){if(e.params.observeParents){const d=GN(e.hostEl);for(let h=0;h<d.length;h+=1)a(d[h])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},u=()=>{s.forEach(d=>{d.disconnect()}),s.splice(0,s.length)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",l),r("destroy",u)}var D5={on(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const i=n?"unshift":"push";return t.split(" ").forEach(s=>{r.eventsListeners[s]||(r.eventsListeners[s]=[]),r.eventsListeners[s][i](e)}),r},once(t,e,n){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function i(){r.off(t,i),i.__emitterProxy&&delete i.__emitterProxy;for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];e.apply(r,o)}return i.__emitterProxy=e,r.on(t,i,n)},onAny(t,e){const n=this;if(!n.eventsListeners||n.destroyed||typeof t!="function")return n;const r=e?"unshift":"push";return n.eventsAnyListeners.indexOf(t)<0&&n.eventsAnyListeners[r](t),n},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const n=e.eventsAnyListeners.indexOf(t);return n>=0&&e.eventsAnyListeners.splice(n,1),e},off(t,e){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||t.split(" ").forEach(r=>{typeof e>"u"?n.eventsListeners[r]=[]:n.eventsListeners[r]&&n.eventsListeners[r].forEach((i,s)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&n.eventsListeners[r].splice(s,1)})}),n},emit(){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let e,n,r;for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],n=s.slice(1,s.length),r=t):(e=s[0].events,n=s[0].data,r=s[0].context||t),n.unshift(r),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(u=>{u.apply(r,[l,...n])}),t.eventsListeners&&t.eventsListeners[l]&&t.eventsListeners[l].forEach(u=>{u.apply(r,n)})}),t}};function L5(){const t=this;let e,n;const r=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=r.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?n=t.params.height:n=r.clientHeight,!(e===0&&t.isHorizontal()||n===0&&t.isVertical())&&(e=e-parseInt(Ci(r,"padding-left")||0,10)-parseInt(Ci(r,"padding-right")||0,10),n=n-parseInt(Ci(r,"padding-top")||0,10)-parseInt(Ci(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(n)&&(n=0),Object.assign(t,{width:e,height:n,size:t.isHorizontal()?e:n}))}function M5(){const t=this;function e(S,k){return parseFloat(S.getPropertyValue(t.getDirectionLabel(k))||0)}const n=t.params,{wrapperEl:r,slidesEl:i,size:s,rtlTranslate:o,wrongRTL:a}=t,l=t.virtual&&n.virtual.enabled,u=l?t.virtual.slides.length:t.slides.length,d=mr(i,`.${t.params.slideClass}, swiper-slide`),h=l?t.virtual.slides.length:d.length;let f=[];const g=[],_=[];let E=n.slidesOffsetBefore;typeof E=="function"&&(E=n.slidesOffsetBefore.call(t));let T=n.slidesOffsetAfter;typeof T=="function"&&(T=n.slidesOffsetAfter.call(t));const m=t.snapGrid.length,v=t.slidesGrid.length;let w=n.spaceBetween,C=-E,O=0,D=0;if(typeof s>"u")return;typeof w=="string"&&w.indexOf("%")>=0?w=parseFloat(w.replace("%",""))/100*s:typeof w=="string"&&(w=parseFloat(w)),t.virtualSize=-w,d.forEach(S=>{o?S.style.marginLeft="":S.style.marginRight="",S.style.marginBottom="",S.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(Vd(r,"--swiper-centered-offset-before",""),Vd(r,"--swiper-centered-offset-after",""));const A=n.grid&&n.grid.rows>1&&t.grid;A?t.grid.initSlides(d):t.grid&&t.grid.unsetSlides();let I;const P=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(S=>typeof n.breakpoints[S].slidesPerView<"u").length>0;for(let S=0;S<h;S+=1){I=0;let k;if(d[S]&&(k=d[S]),A&&t.grid.updateSlide(S,k,d),!(d[S]&&Ci(k,"display")==="none")){if(n.slidesPerView==="auto"){P&&(d[S].style[t.getDirectionLabel("width")]="");const N=getComputedStyle(k),R=k.style.transform,Z=k.style.webkitTransform;if(R&&(k.style.transform="none"),Z&&(k.style.webkitTransform="none"),n.roundLengths)I=t.isHorizontal()?xy(k,"width"):xy(k,"height");else{const ie=e(N,"width"),Se=e(N,"padding-left"),Be=e(N,"padding-right"),$=e(N,"margin-left"),H=e(N,"margin-right"),Q=N.getPropertyValue("box-sizing");if(Q&&Q==="border-box")I=ie+$+H;else{const{clientWidth:oe,offsetWidth:ae}=k;I=ie+Se+Be+$+H+(ae-oe)}}R&&(k.style.transform=R),Z&&(k.style.webkitTransform=Z),n.roundLengths&&(I=Math.floor(I))}else I=(s-(n.slidesPerView-1)*w)/n.slidesPerView,n.roundLengths&&(I=Math.floor(I)),d[S]&&(d[S].style[t.getDirectionLabel("width")]=`${I}px`);d[S]&&(d[S].swiperSlideSize=I),_.push(I),n.centeredSlides?(C=C+I/2+O/2+w,O===0&&S!==0&&(C=C-s/2-w),S===0&&(C=C-s/2-w),Math.abs(C)<1/1e3&&(C=0),n.roundLengths&&(C=Math.floor(C)),D%n.slidesPerGroup===0&&f.push(C),g.push(C)):(n.roundLengths&&(C=Math.floor(C)),(D-Math.min(t.params.slidesPerGroupSkip,D))%t.params.slidesPerGroup===0&&f.push(C),g.push(C),C=C+I+w),t.virtualSize+=I+w,O=I,D+=1}}if(t.virtualSize=Math.max(t.virtualSize,s)+T,o&&a&&(n.effect==="slide"||n.effect==="coverflow")&&(r.style.width=`${t.virtualSize+w}px`),n.setWrapperSize&&(r.style[t.getDirectionLabel("width")]=`${t.virtualSize+w}px`),A&&t.grid.updateWrapperSize(I,f),!n.centeredSlides){const S=[];for(let k=0;k<f.length;k+=1){let N=f[k];n.roundLengths&&(N=Math.floor(N)),f[k]<=t.virtualSize-s&&S.push(N)}f=S,Math.floor(t.virtualSize-s)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-s)}if(l&&n.loop){const S=_[0]+w;if(n.slidesPerGroup>1){const k=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/n.slidesPerGroup),N=S*n.slidesPerGroup;for(let R=0;R<k;R+=1)f.push(f[f.length-1]+N)}for(let k=0;k<t.virtual.slidesBefore+t.virtual.slidesAfter;k+=1)n.slidesPerGroup===1&&f.push(f[f.length-1]+S),g.push(g[g.length-1]+S),t.virtualSize+=S}if(f.length===0&&(f=[0]),w!==0){const S=t.isHorizontal()&&o?"marginLeft":t.getDirectionLabel("marginRight");d.filter((k,N)=>!n.cssMode||n.loop?!0:N!==d.length-1).forEach(k=>{k.style[S]=`${w}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let S=0;_.forEach(N=>{S+=N+(w||0)}),S-=w;const k=S-s;f=f.map(N=>N<=0?-E:N>k?k+T:N)}if(n.centerInsufficientSlides){let S=0;_.forEach(N=>{S+=N+(w||0)}),S-=w;const k=(n.slidesOffsetBefore||0)+(n.slidesOffsetAfter||0);if(S+k<s){const N=(s-S-k)/2;f.forEach((R,Z)=>{f[Z]=R-N}),g.forEach((R,Z)=>{g[Z]=R+N})}}if(Object.assign(t,{slides:d,snapGrid:f,slidesGrid:g,slidesSizesGrid:_}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){Vd(r,"--swiper-centered-offset-before",`${-f[0]}px`),Vd(r,"--swiper-centered-offset-after",`${t.size/2-_[_.length-1]/2}px`);const S=-t.snapGrid[0],k=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(N=>N+S),t.slidesGrid=t.slidesGrid.map(N=>N+k)}if(h!==u&&t.emit("slidesLengthChange"),f.length!==m&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),g.length!==v&&t.emit("slidesGridLengthChange"),n.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!l&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const S=`${n.containerModifierClass}backface-hidden`,k=t.el.classList.contains(S);h<=n.maxBackfaceHiddenSlides?k||t.el.classList.add(S):k&&t.el.classList.remove(S)}}function V5(t){const e=this,n=[],r=e.virtual&&e.params.virtual.enabled;let i=0,s;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const o=a=>r?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{n.push(a)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const a=e.activeIndex+s;if(a>e.slides.length&&!r)break;n.push(o(a))}else n.push(o(e.activeIndex));for(s=0;s<n.length;s+=1)if(typeof n[s]<"u"){const a=n[s].offsetHeight;i=a>i?a:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function F5(){const t=this,e=t.slides,n=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(t.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-n-t.cssOverflowAdjustment()}const DP=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function U5(t){t===void 0&&(t=this&&this.translate||0);const e=this,n=e.params,{slides:r,rtlTranslate:i,snapGrid:s}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-t;i&&(o=t),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=n.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<r.length;l+=1){const u=r[l];let d=u.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(d-=r[0].swiperSlideOffset);const h=(o+(n.centeredSlides?e.minTranslate():0)-d)/(u.swiperSlideSize+a),f=(o-s[0]+(n.centeredSlides?e.minTranslate():0)-d)/(u.swiperSlideSize+a),g=-(o-d),_=g+e.slidesSizesGrid[l],E=g>=0&&g<=e.size-e.slidesSizesGrid[l],T=g>=0&&g<e.size-1||_>1&&_<=e.size||g<=0&&_>=e.size;T&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(l)),DP(u,T,n.slideVisibleClass),DP(u,E,n.slideFullyVisibleClass),u.progress=i?-h:h,u.originalProgress=i?-f:f}}function $5(t){const e=this;if(typeof t>"u"){const d=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*d||0}const n=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:s,isEnd:o,progressLoop:a}=e;const l=s,u=o;if(r===0)i=0,s=!0,o=!0;else{i=(t-e.minTranslate())/r;const d=Math.abs(t-e.minTranslate())<1,h=Math.abs(t-e.maxTranslate())<1;s=d||i<=0,o=h||i>=1,d&&(i=0),h&&(i=1)}if(n.loop){const d=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[d],g=e.slidesGrid[h],_=e.slidesGrid[e.slidesGrid.length-1],E=Math.abs(t);E>=f?a=(E-f)/_:a=(E+_-g)/_,a>1&&(a-=1)}Object.assign(e,{progress:i,progressLoop:a,isBeginning:s,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&e.updateSlidesProgress(t),s&&!l&&e.emit("reachBeginning toEdge"),o&&!u&&e.emit("reachEnd toEdge"),(l&&!s||u&&!o)&&e.emit("fromEdge"),e.emit("progress",i)}const xg=(t,e,n)=>{e&&!t.classList.contains(n)?t.classList.add(n):!e&&t.classList.contains(n)&&t.classList.remove(n)};function B5(){const t=this,{slides:e,params:n,slidesEl:r,activeIndex:i}=t,s=t.virtual&&n.virtual.enabled,o=t.grid&&n.grid&&n.grid.rows>1,a=h=>mr(r,`.${n.slideClass}${h}, swiper-slide${h}`)[0];let l,u,d;if(s)if(n.loop){let h=i-t.virtual.slidesBefore;h<0&&(h=t.virtual.slides.length+h),h>=t.virtual.slides.length&&(h-=t.virtual.slides.length),l=a(`[data-swiper-slide-index="${h}"]`)}else l=a(`[data-swiper-slide-index="${i}"]`);else o?(l=e.filter(h=>h.column===i)[0],d=e.filter(h=>h.column===i+1)[0],u=e.filter(h=>h.column===i-1)[0]):l=e[i];l&&(o||(d=A5(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!d&&(d=e[0]),u=b5(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!u===0&&(u=e[e.length-1]))),e.forEach(h=>{xg(h,h===l,n.slideActiveClass),xg(h,h===d,n.slideNextClass),xg(h,h===u,n.slidePrevClass)}),t.emitSlidesClasses()}const fh=(t,e)=>{if(!t||t.destroyed||!t.params)return;const n=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,r=e.closest(n());if(r){let i=r.querySelector(`.${t.params.lazyPreloaderClass}`);!i&&t.isElement&&(r.shadowRoot?i=r.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(i=r.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},kg=(t,e)=>{if(!t.slides[e])return;const n=t.slides[e].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},ky=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const n=t.slides.length;if(!n||!e||e<0)return;e=Math.min(e,n);const r=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),i=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const o=i,a=[o-e];a.push(...Array.from({length:e}).map((l,u)=>o+r+u)),t.slides.forEach((l,u)=>{a.includes(l.column)&&kg(t,u)});return}const s=i+r-1;if(t.params.rewind||t.params.loop)for(let o=i-e;o<=s+e;o+=1){const a=(o%n+n)%n;(a<i||a>s)&&kg(t,a)}else for(let o=Math.max(i-e,0);o<=Math.min(s+e,n-1);o+=1)o!==i&&(o>s||o<i)&&kg(t,o)};function j5(t){const{slidesGrid:e,params:n}=t,r=t.rtlTranslate?t.translate:-t.translate;let i;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?r>=e[s]&&r<e[s+1]-(e[s+1]-e[s])/2?i=s:r>=e[s]&&r<e[s+1]&&(i=s+1):r>=e[s]&&(i=s);return n.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function z5(t){const e=this,n=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:i,activeIndex:s,realIndex:o,snapIndex:a}=e;let l=t,u;const d=g=>{let _=g-e.virtual.slidesBefore;return _<0&&(_=e.virtual.slides.length+_),_>=e.virtual.slides.length&&(_-=e.virtual.slides.length),_};if(typeof l>"u"&&(l=j5(e)),r.indexOf(n)>=0)u=r.indexOf(n);else{const g=Math.min(i.slidesPerGroupSkip,l);u=g+Math.floor((l-g)/i.slidesPerGroup)}if(u>=r.length&&(u=r.length-1),l===s&&!e.params.loop){u!==a&&(e.snapIndex=u,e.emit("snapIndexChange"));return}if(l===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=d(l);return}const h=e.grid&&i.grid&&i.grid.rows>1;let f;if(e.virtual&&i.virtual.enabled&&i.loop)f=d(l);else if(h){const g=e.slides.filter(E=>E.column===l)[0];let _=parseInt(g.getAttribute("data-swiper-slide-index"),10);Number.isNaN(_)&&(_=Math.max(e.slides.indexOf(g),0)),f=Math.floor(_/i.grid.rows)}else if(e.slides[l]){const g=e.slides[l].getAttribute("data-swiper-slide-index");g?f=parseInt(g,10):f=l}else f=l;Object.assign(e,{previousSnapIndex:a,snapIndex:u,previousRealIndex:o,realIndex:f,previousIndex:s,activeIndex:l}),e.initialized&&ky(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function q5(t,e){const n=this,r=n.params;let i=t.closest(`.${r.slideClass}, swiper-slide`);!i&&n.isElement&&e&&e.length>1&&e.includes(t)&&[...e.slice(e.indexOf(t)+1,e.length)].forEach(a=>{!i&&a.matches&&a.matches(`.${r.slideClass}, swiper-slide`)&&(i=a)});let s=!1,o;if(i){for(let a=0;a<n.slides.length;a+=1)if(n.slides[a]===i){s=!0,o=a;break}}if(i&&s)n.clickedSlide=i,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=o;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}r.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var G5={updateSize:L5,updateSlides:M5,updateAutoHeight:V5,updateSlidesOffset:F5,updateSlidesProgress:U5,updateProgress:$5,updateSlidesClasses:B5,updateActiveIndex:z5,updateClickedSlide:q5};function W5(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const e=this,{params:n,rtlTranslate:r,translate:i,wrapperEl:s}=e;if(n.virtualTranslate)return r?-i:i;if(n.cssMode)return i;let o=S5(s,t);return o+=e.cssOverflowAdjustment(),r&&(o=-o),o||0}function H5(t,e){const n=this,{rtlTranslate:r,params:i,wrapperEl:s,progress:o}=n;let a=0,l=0;const u=0;n.isHorizontal()?a=r?-t:t:l=t,i.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?a:l,i.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-a:-l:i.virtualTranslate||(n.isHorizontal()?a-=n.cssOverflowAdjustment():l-=n.cssOverflowAdjustment(),s.style.transform=`translate3d(${a}px, ${l}px, ${u}px)`);let d;const h=n.maxTranslate()-n.minTranslate();h===0?d=0:d=(t-n.minTranslate())/h,d!==o&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)}function K5(){return-this.snapGrid[0]}function Q5(){return-this.snapGrid[this.snapGrid.length-1]}function Y5(t,e,n,r,i){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),n===void 0&&(n=!0),r===void 0&&(r=!0);const s=this,{params:o,wrapperEl:a}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),u=s.maxTranslate();let d;if(r&&t>l?d=l:r&&t<u?d=u:d=t,s.updateProgress(d),o.cssMode){const h=s.isHorizontal();if(e===0)a[h?"scrollLeft":"scrollTop"]=-d;else{if(!s.support.smoothScroll)return qN({swiper:s,targetPosition:-d,side:h?"left":"top"}),!0;a.scrollTo({[h?"left":"top"]:-d,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(d),n&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(d),n&&(s.emit("beforeTransitionStart",e,i),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(f){!s||s.destroyed||f.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,n&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var X5={getTranslate:W5,setTranslate:H5,minTranslate:K5,maxTranslate:Q5,translateTo:Y5};function J5(t,e){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${t}ms`,n.wrapperEl.style.transitionDelay=t===0?"0ms":""),n.emit("setTransition",t,e)}function KN(t){let{swiper:e,runCallbacks:n,direction:r,step:i}=t;const{activeIndex:s,previousIndex:o}=e;let a=r;if(a||(s>o?a="next":s<o?a="prev":a="reset"),e.emit(`transition${i}`),n&&s!==o){if(a==="reset"){e.emit(`slideResetTransition${i}`);return}e.emit(`slideChangeTransition${i}`),a==="next"?e.emit(`slideNextTransition${i}`):e.emit(`slidePrevTransition${i}`)}}function Z5(t,e){t===void 0&&(t=!0);const n=this,{params:r}=n;r.cssMode||(r.autoHeight&&n.updateAutoHeight(),KN({swiper:n,runCallbacks:t,direction:e,step:"Start"}))}function eH(t,e){t===void 0&&(t=!0);const n=this,{params:r}=n;n.animating=!1,!r.cssMode&&(n.setTransition(0),KN({swiper:n,runCallbacks:t,direction:e,step:"End"}))}var tH={setTransition:J5,transitionStart:Z5,transitionEnd:eH};function nH(t,e,n,r,i){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const s=this;let o=t;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:u,previousIndex:d,activeIndex:h,rtlTranslate:f,wrapperEl:g,enabled:_}=s;if(!_&&!r&&!i||s.destroyed||s.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=s.params.speed);const E=Math.min(s.params.slidesPerGroupSkip,o);let T=E+Math.floor((o-E)/s.params.slidesPerGroup);T>=l.length&&(T=l.length-1);const m=-l[T];if(a.normalizeSlideIndex)for(let w=0;w<u.length;w+=1){const C=-Math.floor(m*100),O=Math.floor(u[w]*100),D=Math.floor(u[w+1]*100);typeof u[w+1]<"u"?C>=O&&C<D-(D-O)/2?o=w:C>=O&&C<D&&(o=w+1):C>=O&&(o=w)}if(s.initialized&&o!==h&&(!s.allowSlideNext&&(f?m>s.translate&&m>s.minTranslate():m<s.translate&&m<s.minTranslate())||!s.allowSlidePrev&&m>s.translate&&m>s.maxTranslate()&&(h||0)!==o))return!1;o!==(d||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(m);let v;if(o>h?v="next":o<h?v="prev":v="reset",f&&-m===s.translate||!f&&m===s.translate)return s.updateActiveIndex(o),a.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),a.effect!=="slide"&&s.setTranslate(m),v!=="reset"&&(s.transitionStart(n,v),s.transitionEnd(n,v)),!1;if(a.cssMode){const w=s.isHorizontal(),C=f?m:-m;if(e===0){const O=s.virtual&&s.params.virtual.enabled;O&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),O&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{g[w?"scrollLeft":"scrollTop"]=C})):g[w?"scrollLeft":"scrollTop"]=C,O&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return qN({swiper:s,targetPosition:C,side:w?"left":"top"}),!0;g.scrollTo({[w?"left":"top"]:C,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(m),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,r),s.transitionStart(n,v),e===0?s.transitionEnd(n,v):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(C){!s||s.destroyed||C.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,v))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function rH(t,e,n,r){t===void 0&&(t=0),n===void 0&&(n=!0),typeof t=="string"&&(t=parseInt(t,10));const i=this;if(i.destroyed)return;typeof e>"u"&&(e=i.params.speed);const s=i.grid&&i.params.grid&&i.params.grid.rows>1;let o=t;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)o=o+i.virtual.slidesBefore;else{let a;if(s){const f=o*i.params.grid.rows;a=i.slides.filter(g=>g.getAttribute("data-swiper-slide-index")*1===f)[0].column}else a=i.getSlideIndexByData(o);const l=s?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:u}=i.params;let d=i.params.slidesPerView;d==="auto"?d=i.slidesPerViewDynamic():(d=Math.ceil(parseFloat(i.params.slidesPerView,10)),u&&d%2===0&&(d=d+1));let h=l-a<d;if(u&&(h=h||a<Math.ceil(d/2)),r&&u&&i.params.slidesPerView!=="auto"&&!s&&(h=!1),h){const f=u?a<i.activeIndex?"prev":"next":a-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?a+1:a-l+1,slideRealIndex:f==="next"?i.realIndex:void 0})}if(s){const f=o*i.params.grid.rows;o=i.slides.filter(g=>g.getAttribute("data-swiper-slide-index")*1===f)[0].column}else o=i.getSlideIndexByData(o)}return requestAnimationFrame(()=>{i.slideTo(o,e,n,r)}),i}function iH(t,e,n){e===void 0&&(e=!0);const r=this,{enabled:i,params:s,animating:o}=r;if(!i||r.destroyed)return r;typeof t>"u"&&(t=r.params.speed);let a=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<s.slidesPerGroupSkip?1:a,u=r.virtual&&s.virtual.enabled;if(s.loop){if(o&&!u&&s.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+l,t,e,n)}),!0}return s.rewind&&r.isEnd?r.slideTo(0,t,e,n):r.slideTo(r.activeIndex+l,t,e,n)}function sH(t,e,n){e===void 0&&(e=!0);const r=this,{params:i,snapGrid:s,slidesGrid:o,rtlTranslate:a,enabled:l,animating:u}=r;if(!l||r.destroyed)return r;typeof t>"u"&&(t=r.params.speed);const d=r.virtual&&i.virtual.enabled;if(i.loop){if(u&&!d&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const h=a?r.translate:-r.translate;function f(m){return m<0?-Math.floor(Math.abs(m)):Math.floor(m)}const g=f(h),_=s.map(m=>f(m));let E=s[_.indexOf(g)-1];if(typeof E>"u"&&i.cssMode){let m;s.forEach((v,w)=>{g>=v&&(m=w)}),typeof m<"u"&&(E=s[m>0?m-1:m])}let T=0;if(typeof E<"u"&&(T=o.indexOf(E),T<0&&(T=r.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(T=T-r.slidesPerViewDynamic("previous",!0)+1,T=Math.max(T,0))),i.rewind&&r.isBeginning){const m=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(m,t,e,n)}else if(i.loop&&r.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{r.slideTo(T,t,e,n)}),!0;return r.slideTo(T,t,e,n)}function oH(t,e,n){e===void 0&&(e=!0);const r=this;if(!r.destroyed)return typeof t>"u"&&(t=r.params.speed),r.slideTo(r.activeIndex,t,e,n)}function aH(t,e,n,r){e===void 0&&(e=!0),r===void 0&&(r=.5);const i=this;if(i.destroyed)return;typeof t>"u"&&(t=i.params.speed);let s=i.activeIndex;const o=Math.min(i.params.slidesPerGroupSkip,s),a=o+Math.floor((s-o)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[a]){const u=i.snapGrid[a],d=i.snapGrid[a+1];l-u>(d-u)*r&&(s+=i.params.slidesPerGroup)}else{const u=i.snapGrid[a-1],d=i.snapGrid[a];l-u<=(d-u)*r&&(s-=i.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,i.slidesGrid.length-1),i.slideTo(s,t,e,n)}function lH(){const t=this;if(t.destroyed)return;const{params:e,slidesEl:n}=t,r=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let i=t.clickedIndex,s;const o=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;s=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?i<t.loopedSlides-r/2||i>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),i=t.getSlideIndex(mr(n,`${o}[data-swiper-slide-index="${s}"]`)[0]),Cy(()=>{t.slideTo(i)})):t.slideTo(i):i>t.slides.length-r?(t.loopFix(),i=t.getSlideIndex(mr(n,`${o}[data-swiper-slide-index="${s}"]`)[0]),Cy(()=>{t.slideTo(i)})):t.slideTo(i)}else t.slideTo(i)}var uH={slideTo:nH,slideToLoop:rH,slideNext:iH,slidePrev:sH,slideReset:oH,slideToClosest:aH,slideToClickedSlide:lH};function cH(t){const e=this,{params:n,slidesEl:r}=e;if(!n.loop||e.virtual&&e.params.virtual.enabled)return;const i=()=>{mr(r,`.${n.slideClass}, swiper-slide`).forEach((h,f)=>{h.setAttribute("data-swiper-slide-index",f)})},s=e.grid&&n.grid&&n.grid.rows>1,o=n.slidesPerGroup*(s?n.grid.rows:1),a=e.slides.length%o!==0,l=s&&e.slides.length%n.grid.rows!==0,u=d=>{for(let h=0;h<d;h+=1){const f=e.isElement?If("swiper-slide",[n.slideBlankClass]):If("div",[n.slideClass,n.slideBlankClass]);e.slidesEl.append(f)}};if(a){if(n.loopAddBlankSlides){const d=o-e.slides.length%o;u(d),e.recalcSlides(),e.updateSlides()}else Ef("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(l){if(n.loopAddBlankSlides){const d=n.grid.rows-e.slides.length%n.grid.rows;u(d),e.recalcSlides(),e.updateSlides()}else Ef("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();e.loopFix({slideRealIndex:t,direction:n.centeredSlides?void 0:"next"})}function dH(t){let{slideRealIndex:e,slideTo:n=!0,direction:r,setTranslate:i,activeSlideIndex:s,byController:o,byMousewheel:a}=t===void 0?{}:t;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:u,allowSlidePrev:d,allowSlideNext:h,slidesEl:f,params:g}=l,{centeredSlides:_}=g;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&g.virtual.enabled){n&&(!g.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):g.centeredSlides&&l.snapIndex<g.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=d,l.allowSlideNext=h,l.emit("loopFix");return}let E=g.slidesPerView;E==="auto"?E=l.slidesPerViewDynamic():(E=Math.ceil(parseFloat(g.slidesPerView,10)),_&&E%2===0&&(E=E+1));const T=g.slidesPerGroupAuto?E:g.slidesPerGroup;let m=T;m%T!==0&&(m+=T-m%T),m+=g.loopAdditionalSlides,l.loopedSlides=m;const v=l.grid&&g.grid&&g.grid.rows>1;u.length<E+m?Ef("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):v&&g.grid.fill==="row"&&Ef("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const w=[],C=[];let O=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(u.filter(R=>R.classList.contains(g.slideActiveClass))[0]):O=s;const D=r==="next"||!r,A=r==="prev"||!r;let I=0,P=0;const S=v?Math.ceil(u.length/g.grid.rows):u.length,N=(v?u[s].column:s)+(_&&typeof i>"u"?-E/2+.5:0);if(N<m){I=Math.max(m-N,T);for(let R=0;R<m-N;R+=1){const Z=R-Math.floor(R/S)*S;if(v){const ie=S-Z-1;for(let Se=u.length-1;Se>=0;Se-=1)u[Se].column===ie&&w.push(Se)}else w.push(S-Z-1)}}else if(N+E>S-m){P=Math.max(N-(S-m*2),T);for(let R=0;R<P;R+=1){const Z=R-Math.floor(R/S)*S;v?u.forEach((ie,Se)=>{ie.column===Z&&C.push(Se)}):C.push(Z)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),A&&w.forEach(R=>{u[R].swiperLoopMoveDOM=!0,f.prepend(u[R]),u[R].swiperLoopMoveDOM=!1}),D&&C.forEach(R=>{u[R].swiperLoopMoveDOM=!0,f.append(u[R]),u[R].swiperLoopMoveDOM=!1}),l.recalcSlides(),g.slidesPerView==="auto"?l.updateSlides():v&&(w.length>0&&A||C.length>0&&D)&&l.slides.forEach((R,Z)=>{l.grid.updateSlide(Z,R,l.slides)}),g.watchSlidesProgress&&l.updateSlidesOffset(),n){if(w.length>0&&A){if(typeof e>"u"){const R=l.slidesGrid[O],ie=l.slidesGrid[O+I]-R;a?l.setTranslate(l.translate-ie):(l.slideTo(O+Math.ceil(I),0,!1,!0),i&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-ie,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-ie))}else if(i){const R=v?w.length/g.grid.rows:w.length;l.slideTo(l.activeIndex+R,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(C.length>0&&D)if(typeof e>"u"){const R=l.slidesGrid[O],ie=l.slidesGrid[O-P]-R;a?l.setTranslate(l.translate-ie):(l.slideTo(O-P,0,!1,!0),i&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-ie,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-ie))}else{const R=v?C.length/g.grid.rows:C.length;l.slideTo(l.activeIndex-R,0,!1,!0)}}if(l.allowSlidePrev=d,l.allowSlideNext=h,l.controller&&l.controller.control&&!o){const R={slideRealIndex:e,direction:r,setTranslate:i,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(Z=>{!Z.destroyed&&Z.params.loop&&Z.loopFix({...R,slideTo:Z.params.slidesPerView===g.slidesPerView?n:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...R,slideTo:l.controller.control.params.slidesPerView===g.slidesPerView?n:!1})}l.emit("loopFix")}function hH(){const t=this,{params:e,slidesEl:n}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const r=[];t.slides.forEach(i=>{const s=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;r[s]=i}),t.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),r.forEach(i=>{n.append(i)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var fH={loopCreate:cH,loopFix:dH,loopDestroy:hH};function pH(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const n=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function mH(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var gH={setGrabCursor:pH,unsetGrabCursor:mH};function vH(t,e){e===void 0&&(e=this);function n(r){if(!r||r===jr()||r===Cn())return null;r.assignedSlot&&(r=r.assignedSlot);const i=r.closest(t);return!i&&!r.getRootNode?null:i||n(r.getRootNode().host)}return n(e)}function LP(t,e,n){const r=Cn(),{params:i}=t,s=i.edgeSwipeDetection,o=i.edgeSwipeThreshold;return s&&(n<=o||n>=r.innerWidth-o)?s==="prevent"?(e.preventDefault(),!0):!1:!0}function yH(t){const e=this,n=jr();let r=t;r.originalEvent&&(r=r.originalEvent);const i=e.touchEventsData;if(r.type==="pointerdown"){if(i.pointerId!==null&&i.pointerId!==r.pointerId)return;i.pointerId=r.pointerId}else r.type==="touchstart"&&r.targetTouches.length===1&&(i.touchId=r.targetTouches[0].identifier);if(r.type==="touchstart"){LP(e,r,r.targetTouches[0].pageX);return}const{params:s,touches:o,enabled:a}=e;if(!a||!s.simulateTouch&&r.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=r.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(l)||"which"in r&&r.which===3||"button"in r&&r.button>0||i.isTouched&&i.isMoved)return;const u=!!s.noSwipingClass&&s.noSwipingClass!=="",d=r.composedPath?r.composedPath():r.path;u&&r.target&&r.target.shadowRoot&&d&&(l=d[0]);const h=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,f=!!(r.target&&r.target.shadowRoot);if(s.noSwiping&&(f?vH(h,l):l.closest(h))){e.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;o.currentX=r.pageX,o.currentY=r.pageY;const g=o.currentX,_=o.currentY;if(!LP(e,r,g))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=g,o.startY=_,i.touchStartTime=wf(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(i.allowThresholdMove=!1);let E=!0;l.matches(i.focusableElements)&&(E=!1,l.nodeName==="SELECT"&&(i.isTouched=!1)),n.activeElement&&n.activeElement.matches(i.focusableElements)&&n.activeElement!==l&&n.activeElement.blur();const T=E&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||T)&&!l.isContentEditable&&r.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",r)}function _H(t){const e=jr(),n=this,r=n.touchEventsData,{params:i,touches:s,rtlTranslate:o,enabled:a}=n;if(!a||!i.simulateTouch&&t.pointerType==="mouse")return;let l=t;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(r.touchId!==null||l.pointerId!==r.pointerId))return;let u;if(l.type==="touchmove"){if(u=[...l.changedTouches].filter(D=>D.identifier===r.touchId)[0],!u||u.identifier!==r.touchId)return}else u=l;if(!r.isTouched){r.startMoving&&r.isScrolling&&n.emit("touchMoveOpposite",l);return}const d=u.pageX,h=u.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=h;return}if(!n.allowTouchMove){l.target.matches(r.focusableElements)||(n.allowClick=!1),r.isTouched&&(Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h}),r.touchStartTime=wf());return}if(i.touchReleaseOnEdges&&!i.loop){if(n.isVertical()){if(h<s.startY&&n.translate<=n.maxTranslate()||h>s.startY&&n.translate>=n.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else if(d<s.startX&&n.translate<=n.maxTranslate()||d>s.startX&&n.translate>=n.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,n.allowClick=!1;return}r.allowTouchCallbacks&&n.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=d,s.currentY=h;const f=s.currentX-s.startX,g=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(f**2+g**2)<n.params.threshold)return;if(typeof r.isScrolling>"u"){let D;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:f*f+g*g>=25&&(D=Math.atan2(Math.abs(g),Math.abs(f))*180/Math.PI,r.isScrolling=n.isHorizontal()?D>i.touchAngle:90-D>i.touchAngle)}if(r.isScrolling&&n.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(r.startMoving=!0),r.isScrolling||l.type==="touchmove"&&r.preventTouchMoveFromPointerMove){r.isTouched=!1;return}if(!r.startMoving)return;n.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let _=n.isHorizontal()?f:g,E=n.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;i.oneWayMovement&&(_=Math.abs(_)*(o?1:-1),E=Math.abs(E)*(o?1:-1)),s.diff=_,_*=i.touchRatio,o&&(_=-_,E=-E);const T=n.touchesDirection;n.swipeDirection=_>0?"prev":"next",n.touchesDirection=E>0?"prev":"next";const m=n.params.loop&&!i.cssMode,v=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!r.isMoved){if(m&&v&&n.loopFix({direction:n.swipeDirection}),r.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const D=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(D)}r.allowMomentumBounce=!1,i.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}let w;if(new Date().getTime(),r.isMoved&&r.allowThresholdMove&&T!==n.touchesDirection&&m&&v&&Math.abs(_)>=1){Object.assign(s,{startX:d,startY:h,currentX:d,currentY:h,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,r.startTranslate=r.currentTranslate;return}n.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=_+r.startTranslate;let C=!0,O=i.resistanceRatio;if(i.touchReleaseOnEdges&&(O=0),_>0?(m&&v&&!w&&r.allowThresholdMove&&r.currentTranslate>(i.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>n.minTranslate()&&(C=!1,i.resistance&&(r.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+r.startTranslate+_)**O))):_<0&&(m&&v&&!w&&r.allowThresholdMove&&r.currentTranslate<(i.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]:n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(i.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<n.maxTranslate()&&(C=!1,i.resistance&&(r.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-r.startTranslate-_)**O))),C&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(r.currentTranslate=r.startTranslate),i.threshold>0)if(Math.abs(_)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{r.currentTranslate=r.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&n.freeMode||i.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(r.currentTranslate),n.setTranslate(r.currentTranslate))}function wH(t){const e=this,n=e.touchEventsData;let r=t;r.originalEvent&&(r=r.originalEvent);let i;if(r.type==="touchend"||r.type==="touchcancel"){if(i=[...r.changedTouches].filter(O=>O.identifier===n.touchId)[0],!i||i.identifier!==n.touchId)return}else{if(n.touchId!==null||r.pointerId!==n.pointerId)return;i=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&!(["pointercancel","contextmenu"].includes(r.type)&&(e.browser.isSafari||e.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:u,enabled:d}=e;if(!d||!o.simulateTouch&&r.pointerType==="mouse")return;if(n.allowTouchCallbacks&&e.emit("touchEnd",r),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&o.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}o.grabCursor&&n.isMoved&&n.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const h=wf(),f=h-n.touchStartTime;if(e.allowClick){const O=r.path||r.composedPath&&r.composedPath();e.updateClickedSlide(O&&O[0]||r.target,O),e.emit("tap click",r),f<300&&h-n.lastClickTime<300&&e.emit("doubleTap doubleClick",r)}if(n.lastClickTime=wf(),Cy(()=>{e.destroyed||(e.allowClick=!0)}),!n.isTouched||!n.isMoved||!e.swipeDirection||a.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let g;if(o.followFinger?g=l?e.translate:-e.translate:g=-n.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:g});return}const _=g>=-e.maxTranslate()&&!e.params.loop;let E=0,T=e.slidesSizesGrid[0];for(let O=0;O<u.length;O+=O<o.slidesPerGroupSkip?1:o.slidesPerGroup){const D=O<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof u[O+D]<"u"?(_||g>=u[O]&&g<u[O+D])&&(E=O,T=u[O+D]-u[O]):(_||g>=u[O])&&(E=O,T=u[u.length-1]-u[u.length-2])}let m=null,v=null;o.rewind&&(e.isBeginning?v=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(m=0));const w=(g-u[E])/T,C=E<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(f>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(w>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?m:E+C):e.slideTo(E)),e.swipeDirection==="prev"&&(w>1-o.longSwipesRatio?e.slideTo(E+C):v!==null&&w<0&&Math.abs(w)>o.longSwipesRatio?e.slideTo(v):e.slideTo(E))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(r.target===e.navigation.nextEl||r.target===e.navigation.prevEl)?r.target===e.navigation.nextEl?e.slideTo(E+C):e.slideTo(E):(e.swipeDirection==="next"&&e.slideTo(m!==null?m:E+C),e.swipeDirection==="prev"&&e.slideTo(v!==null?v:E))}}function MP(){const t=this,{params:e,el:n}=t;if(n&&n.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:s}=t,o=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!a?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!o?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=i,t.allowSlideNext=r,t.params.watchOverflow&&s!==t.snapGrid&&t.checkOverflow()}function EH(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function IH(){const t=this,{wrapperEl:e,rtlTranslate:n,enabled:r}=t;if(!r)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let i;const s=t.maxTranslate()-t.minTranslate();s===0?i=0:i=(t.translate-t.minTranslate())/s,i!==t.progress&&t.updateProgress(n?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function TH(t){const e=this;fh(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function SH(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const QN=(t,e)=>{const n=jr(),{params:r,el:i,wrapperEl:s,device:o}=t,a=!!r.nested,l=e==="on"?"addEventListener":"removeEventListener",u=e;n[l]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:a}),i[l]("touchstart",t.onTouchStart,{passive:!1}),i[l]("pointerdown",t.onTouchStart,{passive:!1}),n[l]("touchmove",t.onTouchMove,{passive:!1,capture:a}),n[l]("pointermove",t.onTouchMove,{passive:!1,capture:a}),n[l]("touchend",t.onTouchEnd,{passive:!0}),n[l]("pointerup",t.onTouchEnd,{passive:!0}),n[l]("pointercancel",t.onTouchEnd,{passive:!0}),n[l]("touchcancel",t.onTouchEnd,{passive:!0}),n[l]("pointerout",t.onTouchEnd,{passive:!0}),n[l]("pointerleave",t.onTouchEnd,{passive:!0}),n[l]("contextmenu",t.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[l]("click",t.onClick,!0),r.cssMode&&s[l]("scroll",t.onScroll),r.updateOnWindowResize?t[u](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",MP,!0):t[u]("observerUpdate",MP,!0),i[l]("load",t.onLoad,{capture:!0})};function PH(){const t=this,{params:e}=t;t.onTouchStart=yH.bind(t),t.onTouchMove=_H.bind(t),t.onTouchEnd=wH.bind(t),t.onDocumentTouchStart=SH.bind(t),e.cssMode&&(t.onScroll=IH.bind(t)),t.onClick=EH.bind(t),t.onLoad=TH.bind(t),QN(t,"on")}function bH(){QN(this,"off")}var AH={attachEvents:PH,detachEvents:bH};const VP=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function RH(){const t=this,{realIndex:e,initialized:n,params:r,el:i}=t,s=r.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=t.getBreakpoint(s,t.params.breakpointsBase,t.el);if(!o||t.currentBreakpoint===o)return;const l=(o in s?s[o]:void 0)||t.originalParams,u=VP(t,r),d=VP(t,l),h=t.params.grabCursor,f=l.grabCursor,g=r.enabled;u&&!d?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),t.emitContainerClasses()):!u&&d&&(i.classList.add(`${r.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&r.grid.fill==="column")&&i.classList.add(`${r.containerModifierClass}grid-column`),t.emitContainerClasses()),h&&!f?t.unsetGrabCursor():!h&&f&&t.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(w=>{if(typeof l[w]>"u")return;const C=r[w]&&r[w].enabled,O=l[w]&&l[w].enabled;C&&!O&&t[w].disable(),!C&&O&&t[w].enable()});const _=l.direction&&l.direction!==r.direction,E=r.loop&&(l.slidesPerView!==r.slidesPerView||_),T=r.loop;_&&n&&t.changeDirection(),yn(t.params,l);const m=t.params.enabled,v=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),g&&!m?t.disable():!g&&m&&t.enable(),t.currentBreakpoint=o,t.emit("_beforeBreakpoint",l),n&&(E?(t.loopDestroy(),t.loopCreate(e),t.updateSlides()):!T&&v?(t.loopCreate(e),t.updateSlides()):T&&!v&&t.loopDestroy()),t.emit("breakpoint",l)}function CH(t,e,n){if(e===void 0&&(e="window"),!t||e==="container"&&!n)return;let r=!1;const i=Cn(),s=e==="window"?i.innerHeight:n.clientHeight,o=Object.keys(t).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:s*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:u}=o[a];e==="window"?i.matchMedia(`(min-width: ${u}px)`).matches&&(r=l):u<=n.clientWidth&&(r=l)}return r||"max"}var xH={setBreakpoint:RH,getBreakpoint:CH};function kH(t,e){const n=[];return t.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(i=>{r[i]&&n.push(e+i)}):typeof r=="string"&&n.push(e+r)}),n}function NH(){const t=this,{classNames:e,params:n,rtl:r,el:i,device:s}=t,o=kH(["initialized",n.direction,{"free-mode":t.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:r},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);e.push(...o),i.classList.add(...e),t.emitContainerClasses()}function OH(){const t=this,{el:e,classNames:n}=t;e.classList.remove(...n),t.emitContainerClasses()}var DH={addClasses:NH,removeClasses:OH};function LH(){const t=this,{isLocked:e,params:n}=t,{slidesOffsetBefore:r}=n;if(r){const i=t.slides.length-1,s=t.slidesGrid[i]+t.slidesSizesGrid[i]+r*2;t.isLocked=t.size>s}else t.isLocked=t.snapGrid.length===1;n.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),n.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var MH={checkOverflow:LH},Ny={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function VH(t,e){return function(r){r===void 0&&(r={});const i=Object.keys(r)[0],s=r[i];if(typeof s!="object"||s===null){yn(e,r);return}if(t[i]===!0&&(t[i]={enabled:!0}),i==="navigation"&&t[i]&&t[i].enabled&&!t[i].prevEl&&!t[i].nextEl&&(t[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&t[i]&&t[i].enabled&&!t[i].el&&(t[i].auto=!0),!(i in t&&"enabled"in s)){yn(e,r);return}typeof t[i]=="object"&&!("enabled"in t[i])&&(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),yn(e,r)}}const Ng={eventsEmitter:D5,update:G5,translate:X5,transition:tH,slide:uH,loop:fH,grabCursor:gH,events:AH,breakpoints:xH,checkOverflow:MH,classes:DH},Og={};let LE=class Cr{constructor(){let e,n;for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?n=i[0]:[e,n]=i,n||(n={}),n=yn({},n),e&&!n.el&&(n.el=e);const o=jr();if(n.el&&typeof n.el=="string"&&o.querySelectorAll(n.el).length>1){const d=[];return o.querySelectorAll(n.el).forEach(h=>{const f=yn({},n,{el:h});d.push(new Cr(f))}),d}const a=this;a.__swiper__=!0,a.support=WN(),a.device=HN({userAgent:n.userAgent}),a.browser=k5(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],n.modules&&Array.isArray(n.modules)&&a.modules.push(...n.modules);const l={};a.modules.forEach(d=>{d({params:n,swiper:a,extendParams:VH(n,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const u=yn({},Ny,l);return a.params=yn({},u,Og,n),a.originalParams=yn({},a.params),a.passedParams=yn({},n),a.params&&a.params.on&&Object.keys(a.params.on).forEach(d=>{a.on(d,a.params.on[d])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:n,params:r}=this,i=mr(n,`.${r.slideClass}, swiper-slide`),s=Tf(i[0]);return Tf(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(n=>n.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:n,params:r}=e;e.slides=mr(n,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,n){const r=this;e=Math.min(Math.max(e,0),1);const i=r.minTranslate(),o=(r.maxTranslate()-i)*e+i;r.translateTo(o,typeof n>"u"?0:n),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",n.join(" "))}getSlideClasses(e){const n=this;return n.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const n=[];e.slides.forEach(r=>{const i=e.getSlideClasses(r);n.push({slideEl:r,classNames:i}),e.emit("_slideClass",r,i)}),e.emit("_slideClasses",n)}slidesPerViewDynamic(e,n){e===void 0&&(e="current"),n===void 0&&(n=!1);const r=this,{params:i,slides:s,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:u}=r;let d=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let h=s[u]?Math.ceil(s[u].swiperSlideSize):0,f;for(let g=u+1;g<s.length;g+=1)s[g]&&!f&&(h+=Math.ceil(s[g].swiperSlideSize),d+=1,h>l&&(f=!0));for(let g=u-1;g>=0;g-=1)s[g]&&!f&&(h+=s[g].swiperSlideSize,d+=1,h>l&&(f=!0))}else if(e==="current")for(let h=u+1;h<s.length;h+=1)(n?o[h]+a[h]-o[u]<l:o[h]-o[u]<l)&&(d+=1);else for(let h=u-1;h>=0;h-=1)o[u]-o[h]<l&&(d+=1);return d}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:n,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&fh(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)i(),r.autoHeight&&e.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&e.isEnd&&!r.centeredSlides){const o=e.virtual&&r.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(o.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||i()}r.watchOverflow&&n!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,n){n===void 0&&(n=!0);const r=this,i=r.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${i}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),r.emit("changeDirection"),n&&r.update()),r}changeLanguageDirection(e){const n=this;n.rtl&&e==="rtl"||!n.rtl&&e==="ltr"||(n.rtl=e==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(e){const n=this;if(n.mounted)return!0;let r=e||n.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=n,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const i=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(i()):mr(r,i())[0];return!o&&n.params.createElements&&(o=If("div",n.params.wrapperClass),r.append(o),mr(r,`.${n.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(n,{el:r,wrapperEl:o,slidesEl:n.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:o,hostEl:n.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||Ci(r,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||Ci(r,"direction")==="rtl"),wrongRTL:Ci(o,"display")==="-webkit-box"}),!0}init(e){const n=this;if(n.initialized||n.mount(e)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(),n.attachEvents();const i=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&i.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(s=>{s.complete?fh(n,s):s.addEventListener("load",o=>{fh(n,o.target)})}),ky(n),n.initialized=!0,ky(n),n.emit("init"),n.emit("afterInit"),n}destroy(e,n){e===void 0&&(e=!0),n===void 0&&(n=!0);const r=this,{params:i,el:s,wrapperEl:o,slides:a}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),n&&(r.removeClasses(),s.removeAttribute("style"),o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),e!==!1&&(r.el.swiper=null,I5(r)),r.destroyed=!0),null}static extendDefaults(e){yn(Og,e)}static get extendedDefaults(){return Og}static get defaults(){return Ny}static installModule(e){Cr.prototype.__modules__||(Cr.prototype.__modules__=[]);const n=Cr.prototype.__modules__;typeof e=="function"&&n.indexOf(e)<0&&n.push(e)}static use(e){return Array.isArray(e)?(e.forEach(n=>Cr.installModule(n)),Cr):(Cr.installModule(e),Cr)}};Object.keys(Ng).forEach(t=>{Object.keys(Ng[t]).forEach(e=>{LE.prototype[e]=Ng[t][e]})});LE.use([N5,O5]);const YN=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function lo(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"&&!t.__swiper__}function ga(t,e){const n=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>n.indexOf(r)<0).forEach(r=>{typeof t[r]>"u"?t[r]=e[r]:lo(e[r])&&lo(t[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?t[r]=e[r]:ga(t[r],e[r]):t[r]=e[r]})}function XN(t){return t===void 0&&(t={}),t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function JN(t){return t===void 0&&(t={}),t.pagination&&typeof t.pagination.el>"u"}function ZN(t){return t===void 0&&(t={}),t.scrollbar&&typeof t.scrollbar.el>"u"}function eO(t){t===void 0&&(t="");const e=t.split(" ").map(r=>r.trim()).filter(r=>!!r),n=[];return e.forEach(r=>{n.indexOf(r)<0&&n.push(r)}),n.join(" ")}function FH(t){return t===void 0&&(t=""),t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function UH(t){let{swiper:e,slides:n,passedParams:r,changedParams:i,nextEl:s,prevEl:o,scrollbarEl:a,paginationEl:l}=t;const u=i.filter(P=>P!=="children"&&P!=="direction"&&P!=="wrapperClass"),{params:d,pagination:h,navigation:f,scrollbar:g,virtual:_,thumbs:E}=e;let T,m,v,w,C,O,D,A;i.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&d.thumbs&&!d.thumbs.swiper&&(T=!0),i.includes("controller")&&r.controller&&r.controller.control&&d.controller&&!d.controller.control&&(m=!0),i.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(d.pagination||d.pagination===!1)&&h&&!h.el&&(v=!0),i.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||a)&&(d.scrollbar||d.scrollbar===!1)&&g&&!g.el&&(w=!0),i.includes("navigation")&&r.navigation&&(r.navigation.prevEl||o)&&(r.navigation.nextEl||s)&&(d.navigation||d.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(C=!0);const I=P=>{e[P]&&(e[P].destroy(),P==="navigation"?(e.isElement&&(e[P].prevEl.remove(),e[P].nextEl.remove()),d[P].prevEl=void 0,d[P].nextEl=void 0,e[P].prevEl=void 0,e[P].nextEl=void 0):(e.isElement&&e[P].el.remove(),d[P].el=void 0,e[P].el=void 0))};i.includes("loop")&&e.isElement&&(d.loop&&!r.loop?O=!0:!d.loop&&r.loop?D=!0:A=!0),u.forEach(P=>{if(lo(d[P])&&lo(r[P]))Object.assign(d[P],r[P]),(P==="navigation"||P==="pagination"||P==="scrollbar")&&"enabled"in r[P]&&!r[P].enabled&&I(P);else{const S=r[P];(S===!0||S===!1)&&(P==="navigation"||P==="pagination"||P==="scrollbar")?S===!1&&I(P):d[P]=r[P]}}),u.includes("controller")&&!m&&e.controller&&e.controller.control&&d.controller&&d.controller.control&&(e.controller.control=d.controller.control),i.includes("children")&&n&&_&&d.virtual.enabled?(_.slides=n,_.update(!0)):i.includes("virtual")&&_&&d.virtual.enabled&&(n&&(_.slides=n),_.update(!0)),i.includes("children")&&n&&d.loop&&(A=!0),T&&E.init()&&E.update(!0),m&&(e.controller.control=d.controller.control),v&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(d.pagination.el=l),h.init(),h.render(),h.update()),w&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(d.scrollbar.el=a),g.init(),g.updateSize(),g.setTranslate()),C&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=e.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),e.el.appendChild(s)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=e.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),e.el.appendChild(o))),s&&(d.navigation.nextEl=s),o&&(d.navigation.prevEl=o),f.init(),f.update()),i.includes("allowSlideNext")&&(e.allowSlideNext=r.allowSlideNext),i.includes("allowSlidePrev")&&(e.allowSlidePrev=r.allowSlidePrev),i.includes("direction")&&e.changeDirection(r.direction,!1),(O||A)&&e.loopDestroy(),(D||A)&&e.loopCreate(),e.update()}function $H(t,e){t===void 0&&(t={}),e===void 0&&(e=!0);const n={on:{}},r={},i={};ga(n,Ny),n._emitClasses=!0,n.init=!1;const s={},o=YN.map(l=>l.replace(/_/,"")),a=Object.assign({},t);return Object.keys(a).forEach(l=>{typeof t[l]>"u"||(o.indexOf(l)>=0?lo(t[l])?(n[l]={},i[l]={},ga(n[l],t[l]),ga(i[l],t[l])):(n[l]=t[l],i[l]=t[l]):l.search(/on[A-Z]/)===0&&typeof t[l]=="function"?e?r[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:n.on[`${l[2].toLowerCase()}${l.substr(3)}`]=t[l]:s[l]=t[l])}),["navigation","pagination","scrollbar"].forEach(l=>{n[l]===!0&&(n[l]={}),n[l]===!1&&delete n[l]}),{params:n,passedParams:i,rest:s,events:r}}function BH(t,e){let{el:n,nextEl:r,prevEl:i,paginationEl:s,scrollbarEl:o,swiper:a}=t;XN(e)&&r&&i&&(a.params.navigation.nextEl=r,a.originalParams.navigation.nextEl=r,a.params.navigation.prevEl=i,a.originalParams.navigation.prevEl=i),JN(e)&&s&&(a.params.pagination.el=s,a.originalParams.pagination.el=s),ZN(e)&&o&&(a.params.scrollbar.el=o,a.originalParams.scrollbar.el=o),a.init(n)}function jH(t,e,n,r,i){const s=[];if(!e)return s;const o=l=>{s.indexOf(l)<0&&s.push(l)};if(n&&r){const l=r.map(i),u=n.map(i);l.join("")!==u.join("")&&o("children"),r.length!==n.length&&o("children")}return YN.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in t&&l in e)if(lo(t[l])&&lo(e[l])){const u=Object.keys(t[l]),d=Object.keys(e[l]);u.length!==d.length?o(l):(u.forEach(h=>{t[l][h]!==e[l][h]&&o(l)}),d.forEach(h=>{t[l][h]!==e[l][h]&&o(l)}))}else t[l]!==e[l]&&o(l)}),s}const zH=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function Sf(){return Sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sf.apply(this,arguments)}function tO(t){return t.type&&t.type.displayName&&t.type.displayName.includes("SwiperSlide")}function nO(t){const e=[];return ve.Children.toArray(t).forEach(n=>{tO(n)?e.push(n):n.props&&n.props.children&&nO(n.props.children).forEach(r=>e.push(r))}),e}function qH(t){const e=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return ve.Children.toArray(t).forEach(r=>{if(tO(r))e.push(r);else if(r.props&&r.props.slot&&n[r.props.slot])n[r.props.slot].push(r);else if(r.props&&r.props.children){const i=nO(r.props.children);i.length>0?i.forEach(s=>e.push(s)):n["container-end"].push(r)}else n["container-end"].push(r)}),{slides:e,slots:n}}function GH(t,e,n){if(!n)return null;const r=d=>{let h=d;return d<0?h=e.length+d:h>=e.length&&(h=h-e.length),h},i=t.isHorizontal()?{[t.rtlTranslate?"right":"left"]:`${n.offset}px`}:{top:`${n.offset}px`},{from:s,to:o}=n,a=t.params.loop?-e.length:0,l=t.params.loop?e.length*2:e.length,u=[];for(let d=a;d<l;d+=1)d>=s&&d<=o&&u.push(e[r(d)]);return u.map((d,h)=>ve.cloneElement(d,{swiper:t,style:i,key:d.props.virtualIndex||d.key||`slide-${h}`}))}function Su(t,e){return typeof window>"u"?x.useEffect(t,e):x.useLayoutEffect(t,e)}const FP=x.createContext(null),WH=x.createContext(null),rO=x.forwardRef(function(t,e){let{className:n,tag:r="div",wrapperTag:i="div",children:s,onSwiper:o,...a}=t===void 0?{}:t,l=!1;const[u,d]=x.useState("swiper"),[h,f]=x.useState(null),[g,_]=x.useState(!1),E=x.useRef(!1),T=x.useRef(null),m=x.useRef(null),v=x.useRef(null),w=x.useRef(null),C=x.useRef(null),O=x.useRef(null),D=x.useRef(null),A=x.useRef(null),{params:I,passedParams:P,rest:S,events:k}=$H(a),{slides:N,slots:R}=qH(s),Z=()=>{_(!g)};Object.assign(I.on,{_containerClasses(H,Q){d(Q)}});const ie=()=>{Object.assign(I.on,k),l=!0;const H={...I};if(delete H.wrapperClass,m.current=new LE(H),m.current.virtual&&m.current.params.virtual.enabled){m.current.virtual.slides=N;const Q={cache:!1,slides:N,renderExternal:f,renderExternalUpdate:!1};ga(m.current.params.virtual,Q),ga(m.current.originalParams.virtual,Q)}};T.current||ie(),m.current&&m.current.on("_beforeBreakpoint",Z);const Se=()=>{l||!k||!m.current||Object.keys(k).forEach(H=>{m.current.on(H,k[H])})},Be=()=>{!k||!m.current||Object.keys(k).forEach(H=>{m.current.off(H,k[H])})};x.useEffect(()=>()=>{m.current&&m.current.off("_beforeBreakpoint",Z)}),x.useEffect(()=>{!E.current&&m.current&&(m.current.emitSlidesClasses(),E.current=!0)}),Su(()=>{if(e&&(e.current=T.current),!!T.current)return m.current.destroyed&&ie(),BH({el:T.current,nextEl:C.current,prevEl:O.current,paginationEl:D.current,scrollbarEl:A.current,swiper:m.current},I),o&&!m.current.destroyed&&o(m.current),()=>{m.current&&!m.current.destroyed&&m.current.destroy(!0,!1)}},[]),Su(()=>{Se();const H=jH(P,v.current,N,w.current,Q=>Q.key);return v.current=P,w.current=N,H.length&&m.current&&!m.current.destroyed&&UH({swiper:m.current,slides:N,passedParams:P,changedParams:H,nextEl:C.current,prevEl:O.current,scrollbarEl:A.current,paginationEl:D.current}),()=>{Be()}}),Su(()=>{zH(m.current)},[h]);function $(){return I.virtual?GH(m.current,N,h):N.map((H,Q)=>ve.cloneElement(H,{swiper:m.current,swiperSlideIndex:Q}))}return ve.createElement(r,Sf({ref:T,className:eO(`${u}${n?` ${n}`:""}`)},S),ve.createElement(WH.Provider,{value:m.current},R["container-start"],ve.createElement(i,{className:FH(I.wrapperClass)},R["wrapper-start"],$(),R["wrapper-end"]),XN(I)&&ve.createElement(ve.Fragment,null,ve.createElement("div",{ref:O,className:"swiper-button-prev"}),ve.createElement("div",{ref:C,className:"swiper-button-next"})),ZN(I)&&ve.createElement("div",{ref:A,className:"swiper-scrollbar"}),JN(I)&&ve.createElement("div",{ref:D,className:"swiper-pagination"}),R["container-end"]))});rO.displayName="Swiper";const iO=x.forwardRef(function(t,e){let{tag:n="div",children:r,className:i="",swiper:s,zoom:o,lazy:a,virtualIndex:l,swiperSlideIndex:u,...d}=t===void 0?{}:t;const h=x.useRef(null),[f,g]=x.useState("swiper-slide"),[_,E]=x.useState(!1);function T(C,O,D){O===h.current&&g(D)}Su(()=>{if(typeof u<"u"&&(h.current.swiperSlideIndex=u),e&&(e.current=h.current),!(!h.current||!s)){if(s.destroyed){f!=="swiper-slide"&&g("swiper-slide");return}return s.on("_slideClass",T),()=>{s&&s.off("_slideClass",T)}}}),Su(()=>{s&&h.current&&!s.destroyed&&g(s.getSlideClasses(h.current))},[s]);const m={isActive:f.indexOf("swiper-slide-active")>=0,isVisible:f.indexOf("swiper-slide-visible")>=0,isPrev:f.indexOf("swiper-slide-prev")>=0,isNext:f.indexOf("swiper-slide-next")>=0},v=()=>typeof r=="function"?r(m):r,w=()=>{E(!0)};return ve.createElement(n,Sf({ref:h,className:eO(`${f}${i?` ${i}`:""}`),"data-swiper-slide-index":l,onLoad:w},d),o&&ve.createElement(FP.Provider,{value:m},ve.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof o=="number"?o:void 0},v(),a&&!_&&ve.createElement("div",{className:"swiper-lazy-preloader"}))),!o&&ve.createElement(FP.Provider,{value:m},v(),a&&!_&&ve.createElement("div",{className:"swiper-lazy-preloader"})))});iO.displayName="SwiperSlide";function sO(t,e,n,r){return t.params.createElements&&Object.keys(r).forEach(i=>{if(!n[i]&&n.auto===!0){let s=mr(t.el,`.${r[i]}`)[0];s||(s=If("div",r[i]),s.className=r[i],t.el.append(s)),n[i]=s,e[i]=s}}),n}function HH(t){let{swiper:e,extendParams:n,on:r,emit:i}=t;n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function s(_){let E;return _&&typeof _=="string"&&e.isElement&&(E=e.el.querySelector(_),E)?E:(_&&(typeof _=="string"&&(E=[...document.querySelectorAll(_)]),e.params.uniqueNavElements&&typeof _=="string"&&E&&E.length>1&&e.el.querySelectorAll(_).length===1?E=e.el.querySelector(_):E&&E.length===1&&(E=E[0])),_&&!E?_:E)}function o(_,E){const T=e.params.navigation;_=ht(_),_.forEach(m=>{m&&(m.classList[E?"add":"remove"](...T.disabledClass.split(" ")),m.tagName==="BUTTON"&&(m.disabled=E),e.params.watchOverflow&&e.enabled&&m.classList[e.isLocked?"add":"remove"](T.lockClass))})}function a(){const{nextEl:_,prevEl:E}=e.navigation;if(e.params.loop){o(E,!1),o(_,!1);return}o(E,e.isBeginning&&!e.params.rewind),o(_,e.isEnd&&!e.params.rewind)}function l(_){_.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),i("navigationPrev"))}function u(_){_.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),i("navigationNext"))}function d(){const _=e.params.navigation;if(e.params.navigation=sO(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(_.nextEl||_.prevEl))return;let E=s(_.nextEl),T=s(_.prevEl);Object.assign(e.navigation,{nextEl:E,prevEl:T}),E=ht(E),T=ht(T);const m=(v,w)=>{v&&v.addEventListener("click",w==="next"?u:l),!e.enabled&&v&&v.classList.add(..._.lockClass.split(" "))};E.forEach(v=>m(v,"next")),T.forEach(v=>m(v,"prev"))}function h(){let{nextEl:_,prevEl:E}=e.navigation;_=ht(_),E=ht(E);const T=(m,v)=>{m.removeEventListener("click",v==="next"?u:l),m.classList.remove(...e.params.navigation.disabledClass.split(" "))};_.forEach(m=>T(m,"next")),E.forEach(m=>T(m,"prev"))}r("init",()=>{e.params.navigation.enabled===!1?g():(d(),a())}),r("toEdge fromEdge lock unlock",()=>{a()}),r("destroy",()=>{h()}),r("enable disable",()=>{let{nextEl:_,prevEl:E}=e.navigation;if(_=ht(_),E=ht(E),e.enabled){a();return}[..._,...E].filter(T=>!!T).forEach(T=>T.classList.add(e.params.navigation.lockClass))}),r("click",(_,E)=>{let{nextEl:T,prevEl:m}=e.navigation;T=ht(T),m=ht(m);const v=E.target;if(e.params.navigation.hideOnClick&&!m.includes(v)&&!T.includes(v)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===v||e.pagination.el.contains(v)))return;let w;T.length?w=T[0].classList.contains(e.params.navigation.hiddenClass):m.length&&(w=m[0].classList.contains(e.params.navigation.hiddenClass)),i(w===!0?"navigationShow":"navigationHide"),[...T,...m].filter(C=>!!C).forEach(C=>C.classList.toggle(e.params.navigation.hiddenClass))}});const f=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),a()},g=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(e.navigation,{enable:f,disable:g,update:a,init:d,destroy:h})}function jl(t){return t===void 0&&(t=""),`.${t.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function KH(t){let{swiper:e,extendParams:n,on:r,emit:i}=t;const s="swiper-pagination";n({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:m=>m,formatFractionTotal:m=>m,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),e.pagination={el:null,bullets:[]};let o,a=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function u(m,v){const{bulletActiveClass:w}=e.params.pagination;m&&(m=m[`${v==="prev"?"previous":"next"}ElementSibling`],m&&(m.classList.add(`${w}-${v}`),m=m[`${v==="prev"?"previous":"next"}ElementSibling`],m&&m.classList.add(`${w}-${v}-${v}`)))}function d(m){const v=m.target.closest(jl(e.params.pagination.bulletClass));if(!v)return;m.preventDefault();const w=Tf(v)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===w)return;e.slideToLoop(w)}else e.slideTo(w)}function h(){const m=e.rtl,v=e.params.pagination;if(l())return;let w=e.pagination.el;w=ht(w);let C,O;const D=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,A=e.params.loop?Math.ceil(D/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(O=e.previousRealIndex||0,C=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(C=e.snapIndex,O=e.previousSnapIndex):(O=e.previousIndex||0,C=e.activeIndex||0),v.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const I=e.pagination.bullets;let P,S,k;if(v.dynamicBullets&&(o=xy(I[0],e.isHorizontal()?"width":"height"),w.forEach(N=>{N.style[e.isHorizontal()?"width":"height"]=`${o*(v.dynamicMainBullets+4)}px`}),v.dynamicMainBullets>1&&O!==void 0&&(a+=C-(O||0),a>v.dynamicMainBullets-1?a=v.dynamicMainBullets-1:a<0&&(a=0)),P=Math.max(C-a,0),S=P+(Math.min(I.length,v.dynamicMainBullets)-1),k=(S+P)/2),I.forEach(N=>{const R=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(Z=>`${v.bulletActiveClass}${Z}`)].map(Z=>typeof Z=="string"&&Z.includes(" ")?Z.split(" "):Z).flat();N.classList.remove(...R)}),w.length>1)I.forEach(N=>{const R=Tf(N);R===C?N.classList.add(...v.bulletActiveClass.split(" ")):e.isElement&&N.setAttribute("part","bullet"),v.dynamicBullets&&(R>=P&&R<=S&&N.classList.add(...`${v.bulletActiveClass}-main`.split(" ")),R===P&&u(N,"prev"),R===S&&u(N,"next"))});else{const N=I[C];if(N&&N.classList.add(...v.bulletActiveClass.split(" ")),e.isElement&&I.forEach((R,Z)=>{R.setAttribute("part",Z===C?"bullet-active":"bullet")}),v.dynamicBullets){const R=I[P],Z=I[S];for(let ie=P;ie<=S;ie+=1)I[ie]&&I[ie].classList.add(...`${v.bulletActiveClass}-main`.split(" "));u(R,"prev"),u(Z,"next")}}if(v.dynamicBullets){const N=Math.min(I.length,v.dynamicMainBullets+4),R=(o*N-o)/2-k*o,Z=m?"right":"left";I.forEach(ie=>{ie.style[e.isHorizontal()?Z:"top"]=`${R}px`})}}w.forEach((I,P)=>{if(v.type==="fraction"&&(I.querySelectorAll(jl(v.currentClass)).forEach(S=>{S.textContent=v.formatFractionCurrent(C+1)}),I.querySelectorAll(jl(v.totalClass)).forEach(S=>{S.textContent=v.formatFractionTotal(A)})),v.type==="progressbar"){let S;v.progressbarOpposite?S=e.isHorizontal()?"vertical":"horizontal":S=e.isHorizontal()?"horizontal":"vertical";const k=(C+1)/A;let N=1,R=1;S==="horizontal"?N=k:R=k,I.querySelectorAll(jl(v.progressbarFillClass)).forEach(Z=>{Z.style.transform=`translate3d(0,0,0) scaleX(${N}) scaleY(${R})`,Z.style.transitionDuration=`${e.params.speed}ms`})}v.type==="custom"&&v.renderCustom?(I.innerHTML=v.renderCustom(e,C+1,A),P===0&&i("paginationRender",I)):(P===0&&i("paginationRender",I),i("paginationUpdate",I)),e.params.watchOverflow&&e.enabled&&I.classList[e.isLocked?"add":"remove"](v.lockClass)})}function f(){const m=e.params.pagination;if(l())return;const v=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let w=e.pagination.el;w=ht(w);let C="";if(m.type==="bullets"){let O=e.params.loop?Math.ceil(v/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&O>v&&(O=v);for(let D=0;D<O;D+=1)m.renderBullet?C+=m.renderBullet.call(e,D,m.bulletClass):C+=`<${m.bulletElement} ${e.isElement?'part="bullet"':""} class="${m.bulletClass}"></${m.bulletElement}>`}m.type==="fraction"&&(m.renderFraction?C=m.renderFraction.call(e,m.currentClass,m.totalClass):C=`<span class="${m.currentClass}"></span> / <span class="${m.totalClass}"></span>`),m.type==="progressbar"&&(m.renderProgressbar?C=m.renderProgressbar.call(e,m.progressbarFillClass):C=`<span class="${m.progressbarFillClass}"></span>`),e.pagination.bullets=[],w.forEach(O=>{m.type!=="custom"&&(O.innerHTML=C||""),m.type==="bullets"&&e.pagination.bullets.push(...O.querySelectorAll(jl(m.bulletClass)))}),m.type!=="custom"&&i("paginationRender",w[0])}function g(){e.params.pagination=sO(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const m=e.params.pagination;if(!m.el)return;let v;typeof m.el=="string"&&e.isElement&&(v=e.el.querySelector(m.el)),!v&&typeof m.el=="string"&&(v=[...document.querySelectorAll(m.el)]),v||(v=m.el),!(!v||v.length===0)&&(e.params.uniqueNavElements&&typeof m.el=="string"&&Array.isArray(v)&&v.length>1&&(v=[...e.el.querySelectorAll(m.el)],v.length>1&&(v=v.filter(w=>GN(w,".swiper")[0]===e.el)[0])),Array.isArray(v)&&v.length===1&&(v=v[0]),Object.assign(e.pagination,{el:v}),v=ht(v),v.forEach(w=>{m.type==="bullets"&&m.clickable&&w.classList.add(...(m.clickableClass||"").split(" ")),w.classList.add(m.modifierClass+m.type),w.classList.add(e.isHorizontal()?m.horizontalClass:m.verticalClass),m.type==="bullets"&&m.dynamicBullets&&(w.classList.add(`${m.modifierClass}${m.type}-dynamic`),a=0,m.dynamicMainBullets<1&&(m.dynamicMainBullets=1)),m.type==="progressbar"&&m.progressbarOpposite&&w.classList.add(m.progressbarOppositeClass),m.clickable&&w.addEventListener("click",d),e.enabled||w.classList.add(m.lockClass)}))}function _(){const m=e.params.pagination;if(l())return;let v=e.pagination.el;v&&(v=ht(v),v.forEach(w=>{w.classList.remove(m.hiddenClass),w.classList.remove(m.modifierClass+m.type),w.classList.remove(e.isHorizontal()?m.horizontalClass:m.verticalClass),m.clickable&&(w.classList.remove(...(m.clickableClass||"").split(" ")),w.removeEventListener("click",d))})),e.pagination.bullets&&e.pagination.bullets.forEach(w=>w.classList.remove(...m.bulletActiveClass.split(" ")))}r("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const m=e.params.pagination;let{el:v}=e.pagination;v=ht(v),v.forEach(w=>{w.classList.remove(m.horizontalClass,m.verticalClass),w.classList.add(e.isHorizontal()?m.horizontalClass:m.verticalClass)})}),r("init",()=>{e.params.pagination.enabled===!1?T():(g(),f(),h())}),r("activeIndexChange",()=>{typeof e.snapIndex>"u"&&h()}),r("snapIndexChange",()=>{h()}),r("snapGridLengthChange",()=>{f(),h()}),r("destroy",()=>{_()}),r("enable disable",()=>{let{el:m}=e.pagination;m&&(m=ht(m),m.forEach(v=>v.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),r("lock unlock",()=>{h()}),r("click",(m,v)=>{const w=v.target,C=ht(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&C&&C.length>0&&!w.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&w===e.navigation.nextEl||e.navigation.prevEl&&w===e.navigation.prevEl))return;const O=C[0].classList.contains(e.params.pagination.hiddenClass);i(O===!0?"paginationShow":"paginationHide"),C.forEach(D=>D.classList.toggle(e.params.pagination.hiddenClass))}});const E=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:m}=e.pagination;m&&(m=ht(m),m.forEach(v=>v.classList.remove(e.params.pagination.paginationDisabledClass))),g(),f(),h()},T=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:m}=e.pagination;m&&(m=ht(m),m.forEach(v=>v.classList.add(e.params.pagination.paginationDisabledClass))),_()};Object.assign(e.pagination,{enable:E,disable:T,render:f,update:h,init:g,destroy:_})}function QH(t){let{swiper:e,extendParams:n,on:r,emit:i,params:s}=t;e.autoplay={running:!1,paused:!1,timeLeft:0},n({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,a,l=s&&s.autoplay?s.autoplay.delay:3e3,u=s&&s.autoplay?s.autoplay.delay:3e3,d,h=new Date().getTime(),f,g,_,E,T,m,v;function w($){!e||e.destroyed||!e.wrapperEl||$.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",w),!(v||$.detail&&$.detail.bySwiperTouchMove)&&S())}const C=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?f=!0:f&&(u=d,f=!1);const $=e.autoplay.paused?d:h+u-new Date().getTime();e.autoplay.timeLeft=$,i("autoplayTimeLeft",$,$/l),a=requestAnimationFrame(()=>{C()})},O=()=>{let $;return e.virtual&&e.params.virtual.enabled?$=e.slides.filter(Q=>Q.classList.contains("swiper-slide-active"))[0]:$=e.slides[e.activeIndex],$?parseInt($.getAttribute("data-swiper-autoplay"),10):void 0},D=$=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(a),C();let H=typeof $>"u"?e.params.autoplay.delay:$;l=e.params.autoplay.delay,u=e.params.autoplay.delay;const Q=O();!Number.isNaN(Q)&&Q>0&&typeof $>"u"&&(H=Q,l=Q,u=Q),d=H;const oe=e.params.speed,ae=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(oe,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,oe,!0,!0),i("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(oe,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,oe,!0,!0),i("autoplay")),e.params.cssMode&&(h=new Date().getTime(),requestAnimationFrame(()=>{D()})))};return H>0?(clearTimeout(o),o=setTimeout(()=>{ae()},H)):requestAnimationFrame(()=>{ae()}),H},A=()=>{h=new Date().getTime(),e.autoplay.running=!0,D(),i("autoplayStart")},I=()=>{e.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(a),i("autoplayStop")},P=($,H)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(o),$||(m=!0);const Q=()=>{i("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",w):S()};if(e.autoplay.paused=!0,H){T&&(d=e.params.autoplay.delay),T=!1,Q();return}d=(d||e.params.autoplay.delay)-(new Date().getTime()-h),!(e.isEnd&&d<0&&!e.params.loop)&&(d<0&&(d=0),Q())},S=()=>{e.isEnd&&d<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(h=new Date().getTime(),m?(m=!1,D(d)):D(),e.autoplay.paused=!1,i("autoplayResume"))},k=()=>{if(e.destroyed||!e.autoplay.running)return;const $=jr();$.visibilityState==="hidden"&&(m=!0,P(!0)),$.visibilityState==="visible"&&S()},N=$=>{$.pointerType==="mouse"&&(m=!0,v=!0,!(e.animating||e.autoplay.paused)&&P(!0))},R=$=>{$.pointerType==="mouse"&&(v=!1,e.autoplay.paused&&S())},Z=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",N),e.el.addEventListener("pointerleave",R))},ie=()=>{e.el.removeEventListener("pointerenter",N),e.el.removeEventListener("pointerleave",R)},Se=()=>{jr().addEventListener("visibilitychange",k)},Be=()=>{jr().removeEventListener("visibilitychange",k)};r("init",()=>{e.params.autoplay.enabled&&(Z(),Se(),A())}),r("destroy",()=>{ie(),Be(),e.autoplay.running&&I()}),r("_freeModeStaticRelease",()=>{(_||m)&&S()}),r("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?I():P(!0,!0)}),r("beforeTransitionStart",($,H,Q)=>{e.destroyed||!e.autoplay.running||(Q||!e.params.autoplay.disableOnInteraction?P(!0,!0):I())}),r("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){I();return}g=!0,_=!1,m=!1,E=setTimeout(()=>{m=!0,_=!0,P(!0)},200)}}),r("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!g)){if(clearTimeout(E),clearTimeout(o),e.params.autoplay.disableOnInteraction){_=!1,g=!1;return}_&&e.params.cssMode&&S(),_=!1,g=!1}}),r("slideChange",()=>{e.destroyed||!e.autoplay.running||(T=!0)}),Object.assign(e.autoplay,{start:A,stop:I,pause:P,resume:S})}function YH({concerts:t,search:e,fetchErorr:n,catchError:r}){let i=Wa();const[s,o]=x.useState(""),a=t.filter(l=>l.name.toLowerCase().includes(e));return x.useEffect(()=>{r&&o("erorr")}),M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"imageSlider no-erorr "+s,children:[M.jsx(rO,{spaceBetween:20,centeredSlides:!0,autoplay:{delay:2e3,disableOnInteraction:!0},pagination:{clickable:!0},navigation:!0,modules:[QH,KH,HH],className:"mySwiper",children:t.length>0&&t.slice(0,3).map(l=>M.jsx("div",{className:"image-box",children:M.jsx(iO,{children:M.jsx("img",{className:"banner-image",src:l.images[0].url})})},l.promoter.id))}),M.jsx("p",{className:"neuigkeiten",children:"NEUIGKEITEN"}),M.jsx("div",{className:"cards-container",children:a&&a.map((l,u)=>{var d;return M.jsx("div",{className:"cards",onClick:()=>i(`/detail/${u}`),style:{backgroundImage:`url(${(d=l.images[1])==null?void 0:d.url})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:M.jsx("div",{className:"textBox",children:M.jsx("div",{children:l.name})})},l.id)})})]}),r&&M.jsxs("div",{className:"Erorr-modal",children:["Erorr: ",n]})]})}function XH(){let t=Wa(),e=mp(),n=Kf(E=>E.userSlice);console.log("LoggedinUser",n);const[r,i]=x.useState(""),[s,o]=x.useState(""),[a,l]=x.useState(""),[u,d]=x.useState(!1),h=E=>{console.log(E.target.value);let T=E.target.value;i(T)},f=E=>{console.log(E.target.value);let T=E.target.value;o(T)},g=()=>{pn.auth().signInWithEmailAndPassword(r,s).then(E=>{var m,v;console.log("",E.user);const T={Id:r,id:(m=E.user)==null?void 0:m.uid,name:(v=E.user)==null?void 0:v.displayName};e(hC(T)),console.log()}).catch(E=>{const T=E.message;console.log(T),l(T),d(!0)})};x.useEffect(()=>{vc(e)},[e]);const _=()=>{pn.auth().signOut().then(()=>{e(fC()),vc(e)}).catch(E=>{console.error("Logout failed: ",E)})};return M.jsx(M.Fragment,{children:n?M.jsxs("div",{className:"loggedIn",children:[M.jsx("div",{children:"Erfolgreich Eingeloggt"}),M.jsx("button",{onClick:()=>_(),children:"Logout"})]}):M.jsx("div",{className:"Login-page",children:M.jsxs("div",{className:"Login-container",children:[M.jsx("div",{className:"login ",children:"Email address"}),M.jsx("input",{type:"email form-control",onChange:E=>h(E)}),M.jsx("div",{className:"login",children:"Password"}),M.jsx("input",{type:"password form-control",onChange:E=>f(E)}),M.jsx(JH,{erorrMessage:a}),M.jsx("button",{type:"button",className:"btn btn-light",disabled:u,onClick:()=>{g()},children:"LOGIN"}),M.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>t("/Login/Register"),children:"CREATE AN ACCOUNT"})]})})})}function JH({erorrMessage:t}){if(t!=="")return M.jsx("div",{className:"register-error",children:t})}function ZH({concerts:t}){let{id:e}=EF();const n=parseInt(e??"0");let r=mp(),i=Wa();console.log(t);const s=()=>{const d=`${t[n].name}`,h=`${t[n].images[0].url}`,f=`${o.id}`,g=`${t[n].id}`;dr.collection("RecentSeen").where("Titel","==",d).where("userID","==",f).get().then(_=>{_.empty?dr.collection("RecentSeen").add({Image:h,Titel:d,userID:f,ItemId:g,timestamp:eN()}).then(()=>{console.log("Item added successfully")}).catch(E=>{console.log("Error adding item: ",E)}):console.log("Item already exists in RecentSeen")}).catch(_=>{console.log("Error adding item: ",_)})};let o=Kf(d=>d.userSlice);x.useEffect(()=>{o&&s()},[]),x.useEffect(()=>{vc(r)},[]);const a=()=>{const d=`${t[n].name}`,h=`${o.id}`;dr.collection("Cart").where("ItemTitel","==",d).where("UserId","==",h).get().then(f=>{f.empty?dr.collection("Cart").add({Count:1,ItemTitel:d,Price:`${t[n].priceRanges[0].max}`,UserId:h}).then(()=>{console.log("Item added successfully"),i("/Cart")}).catch(g=>{console.log("Error adding item: ",g)}):f.forEach(g=>{dr.collection("Cart").doc(g.id).update({Count:g.data().Count+1}).then(()=>{console.log("Count updated successfully"),i("/Cart")}).catch(_=>{console.log("Error updating count: ",_)})})})};let[l,u]=x.useState("");return x.useEffect(()=>{u("end")},[]),M.jsx("div",{className:"Detail-page start "+l,children:M.jsxs("div",{className:"detailPageDisplay",children:[M.jsx("div",{className:"detail-image",children:M.jsx("img",{src:t[n].images[0].url})}),M.jsxs("div",{className:"detail-info",children:[M.jsxs("div",{children:[" ",t[n].name]}),M.jsxs("div",{className:"detail-box",children:[M.jsx("p",{className:"detail-title",children:"DATUM"}),M.jsx("div",{className:"detail",children:t[n].dates.start.localDate}),M.jsx("p",{className:"detail-title",children:"ORT"}),M.jsx("div",{className:"detail",children:t[n]._embedded.venues[0].name}),M.jsxs("div",{children:[t[n].priceRanges[0].max,"EURO"]})]}),M.jsx("button",{className:"Cart-button",onClick:()=>{o?a():i("/Login")},children:"TICKES SICHERN"})]})]})})}function eK(){let t=Wa();const[e,n]=x.useState(""),[r,i]=x.useState(""),[s,o]=x.useState(""),[a,l]=x.useState(!0),[u,d]=x.useState(""),[h,f]=x.useState(!1),g=m=>{console.log(m.target.value);let v=m.target.value;o(v)},_=m=>{console.log(m.target.value);let v=m.target.value;n(v)},E=m=>{console.log(m.target.value);let v=m.target.value;i(v)},T=()=>{pn.auth().createUserWithEmailAndPassword(e,r).then(m=>{console.log(m),console.log(m.user),t(-2),l(!1),m.user&&m.user.updateProfile({displayName:s})}).catch(m=>{console.log(m.message),d(m.message),f(!0)})};return M.jsx(M.Fragment,{children:a&&M.jsx("div",{className:"Login-page",children:M.jsxs("div",{className:"Login-container",children:[M.jsx("div",{className:"login",children:"Name"}),M.jsx("input",{type:"text",onChange:m=>{g(m)}}),M.jsx("div",{className:"login",children:"Email address"}),M.jsx("input",{type:"email",onChange:m=>{_(m)}}),M.jsx("div",{className:"login",children:"Password"}),M.jsx("input",{type:"password",onChange:m=>{E(m)}}),M.jsx("div",{className:"login",children:"Confirm Password"}),M.jsx("input",{type:"password"}),M.jsx(tK,{erorrMessage:u}),M.jsx("button",{type:"button",className:"btn btn-light",disabled:h,onClick:()=>{T()},children:"REGISTER"})]})})})}function tK({erorrMessage:t}){if(t!=="")return M.jsx("div",{className:"register-error",children:t})}function nK({concerts:t}){let e=Wa(),n=mp(),r=Kf(T=>T.userSlice);const[i,s]=x.useState([]),[o,a]=x.useState([]),l=()=>dr.collection("RecentSeen").orderBy("timestamp","desc").onSnapshot(m=>{const v=[];m.forEach(C=>{const O=C.data();v.push(O)}),console.log(v);const w=v.filter(C=>C.userID==r.id);console.log(w),a(w)}),u=()=>dr.collection("Cart").onSnapshot(m=>{const v=[];m.forEach(C=>{const O={id:C.id,...C.data()};v.push(O)});const w=v.filter(C=>C.UserId==r.id);s(w)});x.useEffect(()=>{vc(n)},[]),x.useEffect(()=>{r&&(u(),l())},[r]),x.useEffect(()=>{r||s([])},[r]);const d=T=>{const m=`${i[T].id}`,v=dr.collection("Cart").doc(m);v.get().then(w=>{const C=w.data(),O=C.Count,A=parseFloat(C.Price)/O,I=O-1,P=A*I;console.log("newPrice",P),I<=0?v.delete().then(()=>{console.log("Item removed from cart")}).catch(S=>{console.error("Error removing item: ",S)}):v.update({Count:I,Price:P}).then(()=>{console.log("Count updated successfully")}).catch(S=>{console.error("Error updating count: ",S)})})},h=T=>{const m=`${i[T].id}`,v=dr.collection("Cart").doc(m);v.get().then(w=>{const C=w.data(),O=C.Count,A=parseFloat(C.Price)/O,I=O+1,P=I*A;v.update({Count:I,Price:P}).then(()=>{console.log("Count plused successfully")}).catch(S=>{console.error("Error updating count: ",S)})})},f=T=>{const m=`${i[T].id}`,v=dr.collection("Cart").doc(m);v.get().then(()=>{v.delete().then(()=>{console.log("successfullly removed")}).catch(w=>{console.log(w)})})},g=T=>{console.log("Clicked item index:",T),console.log("Recent items:",o);const m=t.findIndex(v=>v.id==o[T].ItemId);e(`/detail/${m}`),console.log(m)};let[_,E]=x.useState("");return x.useEffect(()=>{E("end")},[]),M.jsx(M.Fragment,{children:M.jsxs("div",{className:"Cart-container start "+_,children:[i.length==0?M.jsx("div",{className:"warenkorb-message",children:"Keine Artikel im Warenkorb"}):M.jsx("div",{className:"table",children:i.map((T,m)=>M.jsxs("div",{className:"item-row",children:[M.jsx("div",{children:T.ItemTitel}),M.jsxs("div",{className:"preis",children:[T.Price," Euro"]}),M.jsxs("div",{className:"count",children:[M.jsx("button",{onClick:()=>{d(m)},children:"-"}),T.Count,M.jsx("button",{onClick:()=>{h(m)},children:"+"})]}),M.jsx("div",{children:M.jsx("button",{onClick:()=>{f(m)},children:"Entfernen"})})]},m))}),M.jsx("div",{className:"recentwachted",children:"Recently Viewed"}),M.jsx("div",{className:"cards-container",children:r?o.map((T,m)=>M.jsx("div",{className:"cards",style:{backgroundImage:`url(${T.Image})`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},onClick:()=>g(m),children:M.jsx("div",{className:"textBox",children:M.jsx("div",{children:T.Titel})})},m)):null})]})})}function rK(){const[t,e]=x.useState([]),[n,r]=x.useState(""),[i,s]=x.useState(""),[o,a]=x.useState(!1);let l=null,u=null;console.log("test");function d(g){l=g.coords.latitude,u=g.coords.longitude,f(l,u)}function h(){if(!navigator.geolocation)throw"Geolocation is not supported";navigator.geolocation.getCurrentPosition(d)}x.useEffect(()=>{h()},[]);const f=async(g,_)=>{try{const E=await fetch(`https://app.ticketmaster.com/discovery/v2/events?locale=*&page=1&size=20&latlong=${g},${_}&apikey=jvlMIjBcTOi5UQIGi3HGqpNAVaVuSABO`);if(!E.ok)throw new Error("no network response");const T=await E.json();if(console.log(T._embedded.events),T._embedded&&T._embedded.events){e(T._embedded.events);const m=T._embedded.events.map(v=>{const w=v.images.filter(C=>C.width===1024);return{...v,images:w}});e(m)}}catch(E){console.log(E.message),s(E.message),a(!0)}};return M.jsxs("div",{children:[M.jsx(_5,{concerts:t,search:n,setSearch:r}),M.jsxs(LF,{children:[M.jsx(Lo,{path:"/",element:M.jsx(YH,{concerts:t,search:n,fetchErorr:i,catchError:o})}),M.jsx(Lo,{path:"/detail/:id",element:M.jsx(ZH,{concerts:t})}),M.jsx(Lo,{path:"/Login",element:M.jsx(XH,{})}),M.jsx(Lo,{path:"/Login/Register",element:M.jsx(eK,{})}),M.jsx(Lo,{path:"/Cart",element:M.jsx(nK,{concerts:t})})]})]})}Dg.createRoot(document.getElementById("root")).render(M.jsx(ve.StrictMode,{children:M.jsx(bU,{store:c$,children:M.jsx(FF,{basename:"/Ticketshop",children:M.jsx(rK,{})})})}));
